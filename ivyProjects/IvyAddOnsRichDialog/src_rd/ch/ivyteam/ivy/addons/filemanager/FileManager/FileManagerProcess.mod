[Ivy]
125FE583DB581114 3.20 #module
>Proto >Proto Collection #zClass
us0 updownloadPaneProcess Big #zClass
us0 RD #cInfo
us0 #process
us0 @AnnotationInP-0n ai ai #zField
us0 @TextInP .xml .xml #zField
us0 @TextInP .responsibility .responsibility #zField
us0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
us0 @TextInP .rdData2UIAction .rdData2UIAction #zField
us0 @TextInP .resExport .resExport #zField
us0 @TextInP .type .type #zField
us0 @TextInP .processKind .processKind #zField
us0 @MessageFlowInP-0n messageIn messageIn #zField
us0 @MessageFlowOutP-0n messageOut messageOut #zField
us0 @RichDialogInitStart f0 '' #zField
us0 @RichDialogProcessStep f3 '' #zField
us0 @RichDialogProcessStart f5 '' #zField
us0 @RichDialogProcessEnd f6 '' #zField
us0 @RichDialogMethodStart f9 '' #zField
us0 @RichDialogMethodStart f10 '' #zField
us0 @RichDialogProcessEnd f11 '' #zField
us0 @RichDialogProcessStep f15 '' #zField
us0 @RichDialogProcessStart f17 '' #zField
us0 @RichDialogProcessStart f18 '' #zField
us0 @RichDialogProcessStep f19 '' #zField
us0 @PushWFArc f20 '' #zField
us0 @RichDialogProcessEnd f21 '' #zField
us0 @RichDialogProcessEnd f25 '' #zField
us0 @RichDialogInitStart f34 '' #zField
us0 @RichDialogProcessStart f27 '' #zField
us0 @RichDialogProcessStep f28 '' #zField
us0 @RichDialogProcessEnd f30 '' #zField
us0 @RichDialogMethodStart f74 '' #zField
us0 @Alternative f77 '' #zField
us0 @RichDialogProcessEnd f81 '' #zField
us0 @Alternative f87 '' #zField
us0 @PushWFArc f29 '' #zField
us0 @Alternative f95 '' #zField
us0 @RichDialogProcessStep f105 '' #zField
us0 @PushWFArc f106 '' #zField
us0 @RichDialogProcessStart f116 '' #zField
us0 @Alternative f13 '' #zField
us0 @PushWFArc f16 '' #zField
us0 @PushWFArc f121 '' #zField
us0 @RichDialogProcessStart f122 '' #zField
us0 @RichDialogProcessEnd f44 '' #zField
us0 @RichDialogMethodStart f114 '' #zField
us0 @RichDialogMethodStart f126 '' #zField
us0 @RichDialogProcessEnd f127 '' #zField
us0 @PushWFArc f128 '' #zField
us0 @RichDialogInitStart f53 '' #zField
us0 @RichDialogProcessStart f92 '' #zField
us0 @RichDialogMethodStart f112 '' #zField
us0 @RichDialogProcessStep f124 '' #zField
us0 @PushWFArc f132 '' #zField
us0 @RichDialogProcessEnd f134 '' #zField
us0 @PushWFArc f135 '' #zField
us0 @RichDialogMethodStart f136 '' #zField
us0 @RichDialogProcessStep f137 '' #zField
us0 @PushWFArc f138 '' #zField
us0 @RichDialogProcessEnd f139 '' #zField
us0 @Alternative f140 '' #zField
us0 @PushWFArc f141 '' #zField
us0 @PushWFArc f144 '' #zField
us0 @RichDialogMethodStart f145 '' #zField
us0 @RichDialogProcessEnd f146 '' #zField
us0 @PushWFArc f147 '' #zField
us0 @RichDialogProcessEnd f94 '' #zField
us0 @RichDialogFireEvent f26 '' #zField
us0 @PushWFArc f12 '' #zField
us0 @RichDialogMethodStart f33 '' #zField
us0 @RichDialogProcessEnd f115 '' #zField
us0 @RichDialogProcessStart f150 '' #zField
us0 @RichDialogProcessEnd f151 '' #zField
us0 @PushWFArc f152 '' #zField
us0 @RichDialogMethodStart f153 '' #zField
us0 @RichDialogProcessStep f154 '' #zField
us0 @PushWFArc f155 '' #zField
us0 @RichDialogProcessEnd f156 '' #zField
us0 @RichDialogProcessStep f157 '' #zField
us0 @PushWFArc f158 '' #zField
us0 @PushWFArc f159 '' #zField
us0 @RichDialogInitStart f160 '' #zField
us0 @RichDialogMethodStart f162 '' #zField
us0 @RichDialogProcessEnd f163 '' #zField
us0 @PushWFArc f164 '' #zField
us0 @RichDialogMethodStart f165 '' #zField
us0 @RichDialogProcessStep f31 '' #zField
us0 @PushWFArc f168 '' #zField
us0 @RichDialogProcessStep f176 '' #zField
us0 @PushWFArc f177 '' #zField
us0 @PushWFArc f89 '' #zField
us0 @PushWFArc f107 '' #zField
us0 @RichDialogProcessStep f166 '' #zField
us0 @PushWFArc f179 '' #zField
us0 @PushWFArc f24 '' #zField
us0 @RichDialogProcessStep f180 '' #zField
us0 @PushWFArc f181 '' #zField
us0 @RichDialogMethodStart f182 '' #zField
us0 @RichDialogProcessStep f183 '' #zField
us0 @PushWFArc f184 '' #zField
us0 @RichDialogProcessEnd f185 '' #zField
us0 @PushWFArc f186 '' #zField
us0 @RichDialogProcessStart f187 '' #zField
us0 @RichDialogProcessEnd f188 '' #zField
us0 @PushWFArc f189 '' #zField
us0 @RichDialogProcessStart f190 '' #zField
us0 @RichDialogProcessStep f191 '' #zField
us0 @Alternative f73 '' #zField
us0 @Alternative f203 '' #zField
us0 @RichDialogProcessStart f205 '' #zField
us0 @RichDialogProcessStep f206 '' #zField
us0 @PushWFArc f207 '' #zField
us0 @PushWFArc f208 '' #zField
us0 @RichDialogProcessEnd f211 '' #zField
us0 @PushWFArc f212 '' #zField
us0 @RichDialogProcessStart f215 '' #zField
us0 @RichDialogProcessStart f227 '' #zField
us0 @RichDialogProcessEnd f228 '' #zField
us0 @PushWFArc f229 '' #zField
us0 @RichDialogProcessStart f230 '' #zField
us0 @RichDialogProcessEnd f231 '' #zField
us0 @PushWFArc f232 '' #zField
us0 @RichDialogProcessStart f239 '' #zField
us0 @RichDialog f240 '' #zField
us0 @PushWFArc f241 '' #zField
us0 @RichDialogProcessEnd f242 '' #zField
us0 @PushWFArc f243 '' #zField
us0 @RichDialogProcessStart f277 '' #zField
us0 @RichDialogProcessEnd f278 '' #zField
us0 @PushWFArc f279 '' #zField
us0 @RichDialogProcessStart f280 '' #zField
us0 @RichDialogProcessEnd f281 '' #zField
us0 @PushWFArc f282 '' #zField
us0 @RichDialogMethodStart f285 '' #zField
us0 @RichDialogProcessEnd f288 '' #zField
us0 @RichDialogMethodStart f301 '' #zField
us0 @RichDialogProcessStep f306 '' #zField
us0 @PushWFArc f312 '' #zField
us0 @RichDialogMethodStart f324 '' #zField
us0 @RichDialogProcessEnd f327 '' #zField
us0 @Alternative f329 '' #zField
us0 @RichDialogMethodStart f334 '' #zField
us0 @RichDialogMethodStart f335 '' #zField
us0 @RichDialogProcessEnd f336 '' #zField
us0 @PushWFArc f337 '' #zField
us0 @RichDialogProcessEnd f338 '' #zField
us0 @PushWFArc f339 '' #zField
us0 @RichDialogMethodStart f340 '' #zField
us0 @RichDialogProcessEnd f341 '' #zField
us0 @PushWFArc f342 '' #zField
us0 @RichDialogProcessStart f343 '' #zField
us0 @RichDialogProcessEnd f346 '' #zField
us0 @RichDialogMethodStart f8 '' #zField
us0 @PushWFArc f133 '' #zField
us0 @RichDialogProcessStep f358 '' #zField
us0 @PushWFArc f142 '' #zField
us0 @RichDialogProcessEnd f359 '' #zField
us0 @PushWFArc f360 '' #zField
us0 @RichDialogProcessStart f361 '' #zField
us0 @Alternative f366 '' #zField
us0 @RichDialogProcessStep f368 '' #zField
us0 @PushWFArc f370 '' #zField
us0 @RichDialogProcessEnd f373 '' #zField
us0 @PushWFArc f374 '' #zField
us0 @RichDialogMethodStart f274 '' #zField
us0 @RichDialogProcessStep f275 '' #zField
us0 @PushWFArc f276 '' #zField
us0 @PushWFArc f357 '' #zField
us0 @RichDialogMethodStart f209 '' #zField
us0 @RichDialogProcessStep f210 '' #zField
us0 @Alternative f284 '' #zField
us0 @PushWFArc f379 '' #zField
us0 @RichDialogProcessStep f380 '' #zField
us0 @PushWFArc f381 '' #zField
us0 @RichDialogProcessEnd f384 '' #zField
us0 @PushWFArc f385 '' #zField
us0 @RichDialogProcessStart f387 '' #zField
us0 @Alternative f395 '' #zField
us0 @RichDialogProcessStep f397 '' #zField
us0 @PushWFArc f398 '' #zField
us0 @RichDialogProcessEnd f399 '' #zField
us0 @PushWFArc f400 '' #zField
us0 @RichDialogProcessStep f411 '' #zField
us0 @Alternative f413 '' #zField
us0 @RichDialogProcessEnd f414 '' #zField
us0 @PushWFArc f415 '' #zField
us0 @PushWFArc f418 '' #zField
us0 @RichDialogProcessStep f403 '' #zField
us0 @Alternative f404 '' #zField
us0 @RichDialogProcessEnd f406 '' #zField
us0 @PushWFArc f407 '' #zField
us0 @PushWFArc f410 '' #zField
us0 @RichDialogProcessStep f416 '' #zField
us0 @PushWFArc f417 '' #zField
us0 @PushWFArc f412 '' #zField
us0 @RichDialogProcessStart f419 '' #zField
us0 @RichDialogProcessEnd f420 '' #zField
us0 @PushWFArc f421 '' #zField
us0 @RichDialogMethodStart f422 '' #zField
us0 @RichDialogProcessStep f423 '' #zField
us0 @PushWFArc f424 '' #zField
us0 @Alternative f425 '' #zField
us0 @Alternative f429 '' #zField
us0 @Alternative f437 '' #zField
us0 @RichDialogProcessStep f439 '' #zField
us0 @RichDialogProcessStep f442 '' #zField
us0 @PushWFArc f443 '' #zField
us0 @RichDialogProcessStep f445 '' #zField
us0 @PushWFArc f446 '' #zField
us0 @PushWFArc f449 '' #zField
us0 @RichDialogProcessStep f450 '' #zField
us0 @PushWFArc f447 '' #zField
us0 @Alternative f452 '' #zField
us0 @PushWFArc f453 '' #zField
us0 @RichDialogProcessEnd f458 '' #zField
us0 @RichDialogProcessStep f461 '' #zField
us0 @PushWFArc f460 '' #zField
us0 @RichDialogInitStart f467 '' #zField
us0 @Alternative f175 '' #zField
us0 @PushWFArc f426 '' #zField
us0 @RichDialogProcessEnd f492 '' #zField
us0 @RichDialogMethodStart f178 '' #zField
us0 @RichDialogMethodStart f469 '' #zField
us0 @RichDialogProcessEnd f470 '' #zField
us0 @PushWFArc f471 '' #zField
us0 @RichDialogProcessStart f473 '' #zField
us0 @RichDialogProcessEnd f474 '' #zField
us0 @RichDialogMethodStart f388 '' #zField
us0 @RichDialogProcessEnd f389 '' #zField
us0 @PushWFArc f390 '' #zField
us0 @RichDialogMethodStart f391 '' #zField
us0 @RichDialogProcessEnd f392 '' #zField
us0 @PushWFArc f476 '' #zField
us0 @RichDialogProcessStep f503 '' #zField
us0 @Alternative f223 '' #zField
us0 @PushWFArc f224 '' #zField
us0 @RichDialogProcessStep f456 '' #zField
us0 @PushWFArc f459 '' #zField
us0 @PushWFArc f440 '' #zField
us0 @RichDialogMethodStart f494 '' #zField
us0 @RichDialogProcessStart f513 '' #zField
us0 @RichDialogProcessEnd f514 '' #zField
us0 @RichDialogProcessStart f516 '' #zField
us0 @Alternative f519 '' #zField
us0 @RichDialogProcessEnd f523 '' #zField
us0 @PushWFArc f524 '' #zField
us0 @RichDialogProcessEnd f508 '' #zField
us0 @RichDialogProcessStep f579 '' #zField
us0 @PushWFArc f454 '' #zField
us0 @RichDialogMethodStart f584 '' #zField
us0 @RichDialogProcessStep f472 '' #zField
us0 @RichDialogMethodStart f588 '' #zField
us0 @RichDialogProcessEnd f592 '' #zField
us0 @RichDialogProcessEnd f14 '' #zField
us0 @PushWFArc f62 '' #zField
us0 @RichDialogProcessEnd f63 '' #zField
us0 @PushWFArc f65 '' #zField
us0 @RichDialogProcessStep f66 '' #zField
us0 @PushWFArc f67 '' #zField
us0 @PushWFArc f68 '' #zField
us0 @PushWFArc f32 '' #zField
us0 @PushWFArc f69 '' #zField
us0 @PushWFArc f70 '' #zField
us0 @RichDialogProcessStep f79 '' #zField
us0 @PushWFArc f82 '' #zField
us0 @PushWFArc f84 '' #zField
us0 @RichDialogProcessStep f90 '' #zField
us0 @PushWFArc f97 '' #zField
us0 @PushWFArc f98 '' #zField
us0 @RichDialogProcessEnd f40 '' #zField
us0 @RichDialogInitStart f52 '' #zField
us0 @RichDialogInitStart f99 '' #zField
us0 @RichDialogMethodStart f117 '' #zField
us0 @RichDialogMethodStart f118 '' #zField
us0 @RichDialogProcessEnd f119 '' #zField
us0 @PushWFArc f120 '' #zField
us0 @PushWFArc f148 '' #zField
us0 @RichDialogMethodStart f169 '' #zField
us0 @RichDialogProcessStep f170 '' #zField
us0 @PushWFArc f171 '' #zField
us0 @RichDialogProcessEnd f173 '' #zField
us0 @RichDialogMethodStart f172 '' #zField
us0 @RichDialogProcessStep f192 '' #zField
us0 @PushWFArc f194 '' #zField
us0 @RichDialogProcessEnd f195 '' #zField
us0 @PushWFArc f196 '' #zField
us0 @RichDialogMethodStart f218 '' #zField
us0 @RichDialogProcessStep f220 '' #zField
us0 @PushWFArc f294 '' #zField
us0 @RichDialogProcessEnd f295 '' #zField
us0 @PushWFArc f296 '' #zField
us0 @RichDialogMethodStart f219 '' #zField
us0 @RichDialogProcessEnd f297 '' #zField
us0 @PushWFArc f298 '' #zField
us0 @RichDialogProcessStart f299 '' #zField
us0 @RichDialogMethodStart f305 '' #zField
us0 @RichDialogProcessEnd f307 '' #zField
us0 @RichDialogProcessStep f309 '' #zField
us0 @PushWFArc f310 '' #zField
us0 @PushWFArc f308 '' #zField
us0 @RichDialogMethodStart f311 '' #zField
us0 @RichDialogMethodStart f314 '' #zField
us0 @RichDialogProcessStep f315 '' #zField
us0 @Alternative f317 '' #zField
us0 @PushWFArc f318 '' #zField
us0 @Alternative f326 '' #zField
us0 @PushWFArc f316 '' #zField
us0 @Alternative f347 '' #zField
us0 @PushWFArc f365 '' #zField
us0 @RichDialogProcessEnd f432 '' #zField
us0 @PushWFArc f479 '' #zField
us0 @RichDialogProcessStart f344 '' #zField
us0 @RichDialogProcessStep f345 '' #zField
us0 @PushWFArc f480 '' #zField
us0 @PushWFArc f485 '' #zField
us0 @PushWFArc f482 '' #zField
us0 @RichDialogProcessStep f319 '' #zField
us0 @PushWFArc f320 '' #zField
us0 @PushWFArc f431 '' #zField
us0 @RichDialogInitStart f486 '' #zField
us0 @RichDialogProcessStep f487 '' #zField
us0 @PushWFArc f488 '' #zField
us0 @RichDialogProcessStart f495 '' #zField
us0 @RichDialogProcessStart f496 '' #zField
us0 @RichDialogEnd f497 '' #zField
us0 @PushWFArc f498 '' #zField
us0 @PushWFArc f499 '' #zField
us0 @RichDialogProcessStep f457 '' #zField
us0 @PushWFArc f501 '' #zField
us0 @PushWFArc f7 '' #zField
us0 @RichDialogMethodStart f502 '' #zField
us0 @RichDialogProcessEnd f504 '' #zField
us0 @PushWFArc f505 '' #zField
us0 @RichDialogMethodStart f506 '' #zField
us0 @RichDialogProcessStep f507 '' #zField
us0 @PushWFArc f509 '' #zField
us0 @RichDialogProcessEnd f510 '' #zField
us0 @PushWFArc f511 '' #zField
us0 @RichDialogMethodStart f512 '' #zField
us0 @Alternative f517 '' #zField
us0 @PushWFArc f518 '' #zField
us0 @RichDialogProcessStep f525 '' #zField
us0 @PushWFArc f529 '' #zField
us0 @RichDialogProcessStep f532 '' #zField
us0 @RichDialogProcessStep f554 '' #zField
us0 @PushWFArc f561 '' #zField
us0 @RichDialogProcessStep f581 '' #zField
us0 @Alternative f590 '' #zField
us0 @PushWFArc f540 '' #zField
us0 @RichDialogProcessStep f594 '' #zField
us0 @PushWFArc f595 '' #zField
us0 @RichDialogProcessEnd f596 '' #zField
us0 @PushWFArc f597 '' #zField
us0 @Alternative f600 '' #zField
us0 @PushWFArc f601 '' #zField
us0 @PushWFArc f582 '' #zField
us0 @RichDialogProcessStep f603 '' #zField
us0 @PushWFArc f604 '' #zField
us0 @Alternative f605 '' #zField
us0 @PushWFArc f606 '' #zField
us0 @PushWFArc f598 '' #zField
us0 @PushWFArc f608 '' #zField
us0 @PushWFArc f602 '' #zField
us0 @RichDialogProcessStep f599 '' #zField
us0 @RichDialogProcessStep f610 '' #zField
us0 @PushWFArc f611 '' #zField
us0 @RichDialogProcessStep f612 '' #zField
us0 @RichDialogProcessStep f616 '' #zField
us0 @PushWFArc f143 '' #zField
us0 @RichDialogProcessStart f628 '' #zField
us0 @RichDialogProcessStep f629 '' #zField
us0 @PushWFArc f630 '' #zField
us0 @RichDialogProcessEnd f631 '' #zField
us0 @RichDialogInitStart f634 '' #zField
us0 @RichDialogProcessStep f637 '' #zField
us0 @RichDialogProcessEnd f193 '' #zField
us0 @RichDialogFireEvent f214 '' #zField
us0 @PushWFArc f641 '' #zField
us0 @PushWFArc f638 '' #zField
us0 @RichDialogProcessStep f642 '' #zField
us0 @PushWFArc f643 '' #zField
us0 @Alternative f645 '' #zField
us0 @RichDialogProcessStep f647 '' #zField
us0 @PushWFArc f648 '' #zField
us0 @RichDialogProcessEnd f649 '' #zField
us0 @PushWFArc f650 '' #zField
us0 @PushWFArc f651 '' #zField
us0 @RichDialogProcessStart f652 '' #zField
us0 @RichDialogProcessStep f653 '' #zField
us0 @PushWFArc f654 '' #zField
us0 @RichDialogProcessEnd f655 '' #zField
us0 @PushWFArc f656 '' #zField
us0 @RichDialogMethodStart f657 '' #zField
us0 @Alternative f41 '' #zField
us0 @PushWFArc f658 '' #zField
us0 @RichDialogProcessStep f659 '' #zField
us0 @PushWFArc f660 '' #zField
us0 @RichDialogProcessStep f661 '' #zField
us0 @PushWFArc f662 '' #zField
us0 @RichDialogProcessEnd f663 '' #zField
us0 @PushWFArc f664 '' #zField
us0 @PushWFArc f666 '' #zField
us0 @RichDialogProcessStart f665 '' #zField
us0 @RichDialogProcessStep f668 '' #zField
us0 @Alternative f667 '' #zField
us0 @PushWFArc f56 '' #zField
us0 @RichDialogProcessStep f675 '' #zField
us0 @RichDialogProcessEnd f677 '' #zField
us0 @PushWFArc f678 '' #zField
us0 @RichDialogProcessStep f129 '' #zField
us0 @RichDialogProcessStep f674 '' #zField
us0 @PushWFArc f682 '' #zField
us0 @RichDialogProcessStep f686 '' #zField
us0 @PushWFArc f687 '' #zField
us0 @Alternative f670 '' #zField
us0 @PushWFArc f695 '' #zField
us0 @PushWFArc f57 '' #zField
us0 @RichDialogProcessStep f696 '' #zField
us0 @PushWFArc f697 '' #zField
us0 @PushWFArc f698 '' #zField
us0 @RichDialogInitStart f699 '' #zField
us0 @RichDialogInitStart f701 '' #zField
us0 @PushWFArc f702 '' #zField
us0 @RichDialogProcessStep f703 '' #zField
us0 @Alternative f705 '' #zField
us0 @PushWFArc f706 '' #zField
us0 @RichDialogProcessStep f707 '' #zField
us0 @RichDialogFireEvent f708 '' #zField
us0 @PushWFArc f709 '' #zField
us0 @PushWFArc f515 '' #zField
us0 @RichDialogBroadcastStart f710 '' #zField
us0 @RichDialogProcessEnd f711 '' #zField
us0 @PushWFArc f712 '' #zField
us0 @PushWFArc f713 '' #zField
us0 @RichDialogInitStart f717 '' #zField
us0 @RichDialogInitStart f721 '' #zField
us0 @PushWFArc f725 '' #zField
us0 @InfoButton f694 '' #zField
us0 @AnnotationArc f100 '' #zField
us0 @RichDialogProcessEnd f101 '' #zField
us0 @PushWFArc f102 '' #zField
us0 @PushWFArc f669 '' #zField
us0 @PushWFArc f130 '' #zField
us0 @PushWFArc f726 '' #zField
us0 @RichDialogProcessStep f574 '' #zField
us0 @PushWFArc f727 '' #zField
us0 @PushWFArc f522 '' #zField
us0 @Alternative f520 '' #zField
us0 @RichDialogProcessStep f575 '' #zField
us0 @RichDialogProcessStep f576 '' #zField
us0 @PushWFArc f625 '' #zField
us0 @PushWFArc f714 '' #zField
us0 @RichDialogProcessEnd f728 '' #zField
us0 @PushWFArc f729 '' #zField
us0 @Alternative f730 '' #zField
us0 @PushWFArc f55 '' #zField
us0 @RichDialogFireEvent f738 '' #zField
us0 @RichDialogProcessEnd f740 '' #zField
us0 @PushWFArc f741 '' #zField
us0 @RichDialogMethodStart f733 '' #zField
us0 @PushWFArc f734 '' #zField
us0 @RichDialogMethodStart f735 '' #zField
us0 @Alternative f739 '' #zField
us0 @PushWFArc f743 '' #zField
us0 @RichDialogProcessEnd f744 '' #zField
us0 @PushWFArc f745 '' #zField
us0 @RichDialogProcessEnd f742 '' #zField
us0 @Alternative f748 '' #zField
us0 @PushWFArc f751 '' #zField
us0 @RichDialogBroadcastStart f51 '' #zField
us0 @Alternative f671 '' #zField
us0 @PushWFArc f672 '' #zField
us0 @PushWFArc f752 '' #zField
us0 @RichDialogProcessEnd f753 '' #zField
us0 @PushWFArc f754 '' #zField
us0 @PushWFArc f755 '' #zField
us0 @RichDialogMethodStart f103 '' #zField
us0 @PushWFArc f104 '' #zField
us0 @Alternative f369 '' #zField
us0 @RichDialogProcessEnd f483 '' #zField
us0 @PushWFArc f489 '' #zField
us0 @Alternative f521 '' #zField
us0 @PushWFArc f526 '' #zField
us0 @RichDialogBroadcastStart f539 '' #zField
us0 @PushWFArc f541 '' #zField
us0 @RichDialogBroadcastStart f269 '' #zField
us0 @PushWFArc f408 '' #zField
us0 @RichDialogBroadcastStart f537 '' #zField
us0 @PushWFArc f538 '' #zField
us0 @RichDialogFireEvent f542 '' #zField
us0 @PushWFArc f543 '' #zField
us0 @PushWFArc f544 '' #zField
us0 @RichDialogBroadcastStart f535 '' #zField
us0 @RichDialogProcessEnd f536 '' #zField
us0 @RichDialogBroadcastStart f548 '' #zField
us0 @RichDialogProcessEnd f549 '' #zField
us0 @PushWFArc f553 '' #zField
us0 @PushWFArc f550 '' #zField
us0 @RichDialogBroadcastStart f547 '' #zField
us0 @Alternative f551 '' #zField
us0 @PushWFArc f552 '' #zField
us0 @RichDialogProcessStep f555 '' #zField
us0 @PushWFArc f556 '' #zField
us0 @RichDialogProcessEnd f557 '' #zField
us0 @PushWFArc f558 '' #zField
us0 @PushWFArc f559 '' #zField
us0 @RichDialogMethodStart f560 '' #zField
us0 @RichDialogProcessStep f563 '' #zField
us0 @PushWFArc f564 '' #zField
us0 @PushWFArc f562 '' #zField
us0 @RichDialogMethodStart f565 '' #zField
us0 @RichDialogFireEvent f566 '' #zField
us0 @PushWFArc f567 '' #zField
us0 @RichDialogProcessEnd f568 '' #zField
us0 @PushWFArc f569 '' #zField
us0 @RichDialogBroadcastStart f571 '' #zField
us0 @Alternative f572 '' #zField
us0 @PushWFArc f573 '' #zField
us0 @RichDialogProcessStep f626 '' #zField
us0 @PushWFArc f627 '' #zField
us0 @PushWFArc f633 '' #zField
us0 @RichDialogProcessStart f646 '' #zField
us0 @Alternative f679 '' #zField
us0 @PushWFArc f680 '' #zField
us0 @RichDialogProcessEnd f681 '' #zField
us0 @PushWFArc f683 '' #zField
us0 @RichDialogProcessStep f715 '' #zField
us0 @RichDialogProcessEnd f749 '' #zField
us0 @RichDialogProcessEnd f756 '' #zField
us0 @PushWFArc f757 '' #zField
us0 @RichDialogBroadcastStart f758 '' #zField
us0 @RichDialogProcessEnd f759 '' #zField
us0 @PushWFArc f760 '' #zField
us0 @RichDialog f761 '' #zField
us0 @Alternative f763 '' #zField
us0 @PushWFArc f764 '' #zField
us0 @PushWFArc f716 '' #zField
us0 @RichDialogMethodStart f767 '' #zField
us0 @RichDialogFireEvent f768 '' #zField
us0 @PushWFArc f769 '' #zField
us0 @Alternative f771 '' #zField
us0 @PushWFArc f773 '' #zField
us0 @RichDialogProcessEnd f774 '' #zField
us0 @PushWFArc f775 '' #zField
us0 @RichDialogProcessEnd f776 '' #zField
us0 @PushWFArc f777 '' #zField
us0 @RichDialogBroadcastStart f770 '' #zField
us0 @PushWFArc f772 '' #zField
us0 @RichDialogProcessStep f778 '' #zField
us0 @PushWFArc f762 '' #zField
us0 @RichDialogBroadcastStart f781 '' #zField
us0 @RichDialogProcessEnd f782 '' #zField
us0 @PushWFArc f783 '' #zField
us0 @RichDialogMethodStart f784 '' #zField
us0 @RichDialogProcessEnd f785 '' #zField
us0 @PushWFArc f786 '' #zField
us0 @RichDialogMethodStart f787 '' #zField
us0 @RichDialogProcessEnd f788 '' #zField
us0 @PushWFArc f789 '' #zField
us0 @RichDialogFireEvent f790 '' #zField
us0 @PushWFArc f791 '' #zField
us0 @PushWFArc f174 '' #zField
us0 @RichDialogFireEvent f792 '' #zField
us0 @PushWFArc f793 '' #zField
us0 @PushWFArc f580 '' #zField
us0 @RichDialogFireEvent f794 '' #zField
us0 @PushWFArc f795 '' #zField
us0 @PushWFArc f64 '' #zField
us0 @RichDialogFireEvent f796 '' #zField
us0 @PushWFArc f797 '' #zField
us0 @PushWFArc f50 '' #zField
us0 @RichDialogMethodStart f798 '' #zField
us0 @Alternative f824 '' #zField
us0 @RichDialogProcessStep f821 '' #zField
us0 @RichDialogProcessEnd f801 '' #zField
us0 @Alternative f830 '' #zField
us0 @RichDialogProcessStep f826 '' #zField
us0 @RichDialogProcessEnd f836 '' #zField
us0 @Alternative f805 '' #zField
us0 @RichDialogProcessStep f803 '' #zField
us0 @RichDialogProcessStep f807 '' #zField
us0 @RichDialogProcessStep f809 '' #zField
us0 @RichDialogProcessStep f813 '' #zField
us0 @Alternative f817 '' #zField
us0 @RichDialogProcessStep f799 '' #zField
us0 @RichDialogProcessStep f815 '' #zField
us0 @RichDialogProcessStep f828 '' #zField
us0 @PushWFArc f806 '' #zField
us0 @PushWFArc f802 '' #zField
us0 @PushWFArc f808 '' #zField
us0 @PushWFArc f816 '' #zField
us0 @PushWFArc f822 '' #zField
us0 @PushWFArc f827 '' #zField
us0 @PushWFArc f829 '' #zField
us0 @PushWFArc f831 '' #zField
us0 @RichDialogMethodStart f838 '' #zField
us0 @RichDialogProcessStep f839 '' #zField
us0 @PushWFArc f840 '' #zField
us0 @RichDialogProcessEnd f841 '' #zField
us0 @PushWFArc f842 '' #zField
us0 @Alternative f843 '' #zField
us0 @PushWFArc f844 '' #zField
us0 @PushWFArc f810 '' #zField
us0 @RichDialogProcessStep f850 '' #zField
us0 @PushWFArc f851 '' #zField
us0 @PushWFArc f149 '' #zField
us0 @RichDialogMethodStart f780 '' #zField
us0 @RichDialogProcessEnd f852 '' #zField
us0 @PushWFArc f853 '' #zField
us0 @Alternative f854 '' #zField
us0 @PushWFArc f855 '' #zField
us0 @PushWFArc f800 '' #zField
us0 @RichDialogProcessStep f862 '' #zField
us0 @PushWFArc f863 '' #zField
us0 @RichDialogProcessStep f268 '' #zField
us0 @RichDialogProcessEnd f865 '' #zField
us0 @RichDialogProcessEnd f871 '' #zField
us0 @PushWFArc f873 '' #zField
us0 @Alternative f59 '' #zField
us0 @PushWFArc f60 '' #zField
us0 @PushWFArc f61 '' #zField
us0 @PushWFArc f313 '' #zField
us0 @PushWFArc f330 '' #zField
us0 @RichDialogProcessStep f874 '' #zField
us0 @PushWFArc f875 '' #zField
us0 @PushWFArc f428 '' #zField
us0 @PushWFArc f444 '' #zField
us0 @Alternative f434 '' #zField
us0 @PushWFArc f441 '' #zField
us0 @PushWFArc f451 '' #zField
us0 @PushWFArc f877 '' #zField
us0 @PushWFArc f878 '' #zField
us0 @RichDialogMethodStart f1 '' #zField
us0 @RichDialogProcessEnd f2 '' #zField
us0 @PushWFArc f36 '' #zField
us0 @RichDialogProcessStart f37 '' #zField
us0 @RichDialogProcessStep f42 '' #zField
us0 @Alternative f45 '' #zField
us0 @PushWFArc f46 '' #zField
us0 @PushWFArc f43 '' #zField
us0 @Alternative f71 '' #zField
us0 @RichDialogProcessStep f197 '' #zField
us0 @RichDialogProcessEnd f202 '' #zField
us0 @PushWFArc f213 '' #zField
us0 @PushWFArc f216 '' #zField
us0 @PushWFArc f217 '' #zField
us0 @RichDialogFireEvent f377 '' #zField
us0 @PushWFArc f433 '' #zField
us0 @PushWFArc f22 '' #zField
us0 @RichDialogMethodStart f500 '' #zField
us0 @RichDialogMethodStart f530 '' #zField
us0 @RichDialogProcessEnd f531 '' #zField
us0 @PushWFArc f533 '' #zField
us0 @PushWFArc f534 '' #zField
us0 @Alternative f869 '' #zField
us0 @PushWFArc f870 '' #zField
us0 @RichDialogProcessStep f880 '' #zField
us0 @PushWFArc f881 '' #zField
us0 @PushWFArc f882 '' #zField
us0 @RichDialogProcessStep f883 '' #zField
us0 @PushWFArc f884 '' #zField
us0 @RichDialogProcessStep f886 '' #zField
us0 @RichDialogProcessEnd f888 '' #zField
us0 @PushWFArc f889 '' #zField
us0 @RichDialogMethodStart f890 '' #zField
us0 @RichDialogProcessStep f891 '' #zField
us0 @PushWFArc f892 '' #zField
us0 @RichDialogProcessEnd f893 '' #zField
us0 @PushWFArc f894 '' #zField
us0 @InfoButton f895 '' #zField
us0 @RichDialogInitStart f896 '' #zField
us0 @RichDialogProcessStep f900 '' #zField
us0 @PushWFArc f901 '' #zField
us0 @Alternative f902 '' #zField
us0 @PushWFArc f903 '' #zField
us0 @PushWFArc f613 '' #zField
us0 @RichDialogProcessEnd f906 '' #zField
us0 @RichDialogProcessStep f911 '' #zField
us0 @RichDialogProcessEnd f913 '' #zField
us0 @Alternative f914 '' #zField
us0 @PushWFArc f915 '' #zField
us0 @PushWFArc f919 '' #zField
us0 @PushWFArc f283 '' #zField
us0 @RichDialogMethodStart f920 '' #zField
us0 @RichDialogProcessStep f921 '' #zField
us0 @PushWFArc f922 '' #zField
us0 @RichDialogProcessEnd f923 '' #zField
us0 @RichDialogMethodStart f925 '' #zField
us0 @Alternative f926 '' #zField
us0 @PushWFArc f927 '' #zField
us0 @RichDialogProcessStep f928 '' #zField
us0 @Alternative f930 '' #zField
us0 @RichDialogProcessStep f932 '' #zField
us0 @Alternative f936 '' #zField
us0 @RichDialogProcessStep f938 '' #zField
us0 @PushWFArc f939 '' #zField
us0 @RichDialogProcessStep f940 '' #zField
us0 @PushWFArc f941 '' #zField
us0 @RichDialogProcessStep f942 '' #zField
us0 @PushWFArc f943 '' #zField
us0 @RichDialogProcessEnd f944 '' #zField
us0 @PushWFArc f945 '' #zField
us0 @RichDialogProcessStep f946 '' #zField
us0 @PushWFArc f947 '' #zField
us0 @Alternative f948 '' #zField
us0 @PushWFArc f949 '' #zField
us0 @PushWFArc f951 '' #zField
us0 @PushWFArc f953 '' #zField
us0 @Alternative f954 '' #zField
us0 @RichDialogProcessStep f956 '' #zField
us0 @PushWFArc f957 '' #zField
us0 @RichDialogMethodStart f964 '' #zField
us0 @RichDialogProcessEnd f965 '' #zField
us0 @PushWFArc f966 '' #zField
us0 @Alternative f967 '' #zField
us0 @AnnotationArc f968 '' #zField
us0 @PushWFArc f970 '' #zField
us0 @RichDialogProcessStep f975 '' #zField
us0 @PushWFArc f976 '' #zField
us0 @Alternative f804 '' #zField
us0 @PushWFArc f977 '' #zField
us0 @RichDialogProcessEnd f983 '' #zField
us0 @RichDialogProcessStep f985 '' #zField
us0 @PushWFArc f986 '' #zField
us0 @PushWFArc f868 '' #zField
us0 @PushWFArc f378 '' #zField
us0 @PushWFArc f300 '' #zField
us0 @RichDialogProcessStep f987 '' #zField
us0 @PushWFArc f988 '' #zField
us0 @Alternative f989 '' #zField
us0 @PushWFArc f990 '' #zField
us0 @PushWFArc f72 '' #zField
us0 @Alternative f996 '' #zField
us0 @PushWFArc f997 '' #zField
us0 @PushWFArc f570 '' #zField
us0 @RichDialogProcessStep f999 '' #zField
us0 @PushWFArc f1001 '' #zField
us0 @RichDialogProcessEnd f1002 '' #zField
us0 @RichDialogProcessStep f1004 '' #zField
us0 @PushWFArc f1005 '' #zField
us0 @Alternative f1006 '' #zField
us0 @PushWFArc f1007 '' #zField
us0 @PushWFArc f779 '' #zField
us0 @RichDialogProcessEnd f1010 '' #zField
us0 @Alternative f1014 '' #zField
us0 @PushWFArc f372 '' #zField
us0 @RichDialogProcessStep f1016 '' #zField
us0 @PushWFArc f1017 '' #zField
us0 @RichDialogProcessEnd f1020 '' #zField
us0 @RichDialogProcessStart f1022 '' #zField
us0 @RichDialogProcessStep f1023 '' #zField
us0 @PushWFArc f1024 '' #zField
us0 @RichDialogProcessEnd f1025 '' #zField
us0 @PushWFArc f1026 '' #zField
us0 @RichDialogProcessStart f1027 '' #zField
us0 @RichDialogProcessStep f1028 '' #zField
us0 @PushWFArc f1029 '' #zField
us0 @PushWFArc f1030 '' #zField
us0 @Alternative f1031 '' #zField
us0 @PushWFArc f1033 '' #zField
us0 @RichDialogProcessStep f475 '' #zField
us0 @RichDialogProcessStep f1036 '' #zField
us0 @PushWFArc f1037 '' #zField
us0 @PushWFArc f1038 '' #zField
us0 @RichDialogProcessEnd f198 '' #zField
us0 @PushWFArc f199 '' #zField
us0 @InfoButton f233 '' #zField
us0 @AnnotationArc f234 '' #zField
us0 @InfoButton f235 '' #zField
us0 @AnnotationArc f244 '' #zField
us0 @PushWFArc f245 '' #zField
us0 @PushWFArc f249 '' #zField
us0 @PushWFArc f250 '' #zField
us0 @PushWFArc f247 '' #zField
us0 @PushWFArc f246 '' #zField
us0 @PushWFArc f248 '' #zField
us0 @InfoButton f251 '' #zField
us0 @AnnotationArc f252 '' #zField
us0 @InfoButton f253 '' #zField
us0 @AnnotationArc f254 '' #zField
us0 @RichDialogProcessEnd f255 '' #zField
us0 @PushWFArc f256 '' #zField
us0 @InfoButton f257 '' #zField
us0 @AnnotationArc f258 '' #zField
us0 @InfoButton f259 '' #zField
us0 @AnnotationArc f260 '' #zField
us0 @RichDialogMethodStart f261 '' #zField
us0 @RichDialogProcessEnd f264 '' #zField
us0 @PushWFArc f266 '' #zField
us0 @RichDialogProcessStep f262 '' #zField
us0 @PushWFArc f263 '' #zField
us0 @PushWFArc f110 '' #zField
us0 @PushWFArc f111 '' #zField
us0 @PushWFArc f54 '' #zField
us0 @PushWFArc f109 '' #zField
us0 @PushWFArc f4 '' #zField
us0 @PushWFArc f96 '' #zField
us0 @PushWFArc f93 '' #zField
us0 @PushWFArc f265 '' #zField
us0 @PushWFArc f267 '' #zField
us0 @PushWFArc f271 '' #zField
us0 @PushWFArc f35 '' #zField
us0 @RichDialogProcessStep f91 '' #zField
us0 @PushWFArc f123 '' #zField
us0 @PushWFArc f161 '' #zField
us0 @PushWFArc f349 '' #zField
us0 @RichDialogProcessStep f350 '' #zField
us0 @PushWFArc f351 '' #zField
us0 @PushWFArc f270 '' #zField
us0 @Alternative f355 '' #zField
us0 @RichDialogProcessEnd f402 '' #zField
us0 @RichDialogProcessStep f427 '' #zField
us0 @PushWFArc f527 '' #zField
us0 @RichDialogProcessStart f585 '' #zField
us0 @Alternative f586 '' #zField
us0 @PushWFArc f618 '' #zField
us0 @RichDialog f619 '' #zField
us0 @PushWFArc f620 '' #zField
us0 @RichDialogProcessEnd f621 '' #zField
us0 @PushWFArc f622 '' #zField
us0 @PushWFArc f623 '' #zField
us0 @Alternative f635 '' #zField
us0 @PushWFArc f636 '' #zField
us0 @PushWFArc f430 '' #zField
us0 @RichDialogProcessStart f354 '' #zField
us0 @PushWFArc f401 '' #zField
us0 @RichDialogProcessStart f273 '' #zField
us0 @RichDialogProcessEnd f640 '' #zField
us0 @PushWFArc f718 '' #zField
us0 @RichDialogMethodStart f766 '' #zField
us0 @RichDialogProcessEnd f876 '' #zField
us0 @PushWFArc f879 '' #zField
us0 @RichDialogProcessStep f897 '' #zField
us0 @PushWFArc f898 '' #zField
us0 @PushWFArc f272 '' #zField
us0 @RichDialogProcessStep f899 '' #zField
us0 @RichDialogInitStart f955 '' #zField
us0 @PushWFArc f962 '' #zField
us0 @PushWFArc f963 '' #zField
us0 @PushWFArc f1034 '' #zField
us0 @PushWFArc f468 '' #zField
us0 @RichDialogInitStart f528 '' #zField
us0 @RichDialogProcessStep f723 '' #zField
us0 @PushWFArc f724 '' #zField
us0 @PushWFArc f720 '' #zField
us0 @RichDialogProcessStart f765 '' #zField
us0 @RichDialogProcessStart f958 '' #zField
us0 @RichDialog f960 '' #zField
us0 @PushWFArc f1032 '' #zField
us0 @RichDialogProcessEnd f1035 '' #zField
us0 @PushWFArc f1039 '' #zField
us0 @RichDialog f1040 '' #zField
us0 @PushWFArc f1043 '' #zField
us0 @Alternative f1049 '' #zField
us0 @PushWFArc f1057 '' #zField
us0 @RichDialogProcessEnd f1058 '' #zField
us0 @RichDialogProcessStep f1059 '' #zField
us0 @PushWFArc f1062 '' #zField
us0 @PushWFArc f1060 '' #zField
us0 @RichDialogProcessStep f1063 '' #zField
us0 @PushWFArc f1064 '' #zField
us0 @PushWFArc f1061 '' #zField
us0 @RichDialogProcessStart f1065 '' #zField
us0 @RichDialog f1066 '' #zField
us0 @RichDialogProcessEnd f1068 '' #zField
us0 @PushWFArc f1069 '' #zField
us0 @Alternative f1070 '' #zField
us0 @PushWFArc f1071 '' #zField
us0 @RichDialog f1072 '' #zField
us0 @PushWFArc f1073 '' #zField
us0 @PushWFArc f1067 '' #zField
us0 @PushWFArc f1074 '' #zField
us0 @RichDialogBroadcastStart f1075 '' #zField
us0 @RichDialogProcessEnd f1076 '' #zField
us0 @PushWFArc f1077 '' #zField
us0 @Alternative f1078 '' #zField
us0 @PushWFArc f1079 '' #zField
us0 @PushWFArc f1081 '' #zField
us0 @RichDialog f1086 '' #zField
us0 @PushWFArc f1087 '' #zField
us0 @PushWFArc f49 '' #zField
us0 @PushWFArc f1088 '' #zField
us0 @RichDialogProcessStart f48 '' #zField
us0 @RichDialog f108 '' #zField
us0 @PushWFArc f200 '' #zField
us0 @RichDialogProcessEnd f1080 '' #zField
us0 @PushWFArc f1082 '' #zField
us0 @PushWFArc f86 '' #zField
us0 @RichDialogProcessStart f1083 '' #zField
us0 @PushWFArc f1084 '' #zField
us0 @RichDialogProcessStart f83 '' #zField
us0 @RichDialogProcessStep f1085 '' #zField
us0 @RichDialogProcessEnd f1090 '' #zField
us0 @PushWFArc f1091 '' #zField
us0 @Alternative f1094 '' #zField
us0 @PushWFArc f1089 '' #zField
us0 @PushWFArc f1097 '' #zField
us0 @RichDialogBroadcastStart f1098 '' #zField
us0 @RichDialogProcessEnd f1099 '' #zField
us0 @PushWFArc f1100 '' #zField
us0 @RichDialog f1101 '' #zField
us0 @PushWFArc f1102 '' #zField
us0 @PushWFArc f1096 '' #zField
us0 @RichDialog f1103 '' #zField
us0 @PushWFArc f1104 '' #zField
us0 @PushWFArc f363 '' #zField
us0 @RichDialogProcessStep f1107 '' #zField
us0 @PushWFArc f1106 '' #zField
us0 @PushWFArc f1109 '' #zField
us0 @RichDialogMethodStart f731 '' #zField
us0 @PushWFArc f1105 '' #zField
us0 @RichDialogMethodStart f1108 '' #zField
us0 @PushWFArc f1110 '' #zField
us0 @RichDialogProcessStep f1111 '' #zField
us0 @PushWFArc f1112 '' #zField
us0 @RichDialogProcessEnd f1113 '' #zField
us0 @PushWFArc f1114 '' #zField
us0 @RichDialog f1115 '' #zField
us0 @PushWFArc f1116 '' #zField
us0 @PushWFArc f593 '' #zField
us0 @RichDialog f1117 '' #zField
us0 @PushWFArc f546 '' #zField
us0 @RichDialog f587 '' #zField
us0 @PushWFArc f383 '' #zField
us0 @PushWFArc f382 '' #zField
us0 @PushWFArc f685 '' #zField
us0 @PushWFArc f545 '' #zField
us0 @RichDialog f113 '' #zField
us0 @RichDialog f386 '' #zField
us0 @PushWFArc f448 '' #zField
us0 @PushWFArc f356 '' #zField
us0 @RichDialog f238 '' #zField
us0 @PushWFArc f364 '' #zField
us0 @PushWFArc f405 '' #zField
us0 @RichDialog f409 '' #zField
us0 @PushWFArc f684 '' #zField
us0 @PushWFArc f394 '' #zField
us0 @RichDialog f376 '' #zField
us0 @PushWFArc f393 '' #zField
us0 @PushWFArc f396 '' #zField
us0 @RichDialog f375 '' #zField
us0 @PushWFArc f481 '' #zField
us0 @RichDialog f38 '' #zField
us0 @PushWFArc f292 '' #zField
us0 @PushWFArc f904 '' #zField
us0 @RichDialog f905 '' #zField
us0 @PushWFArc f907 '' #zField
us0 @PushWFArc f131 '' #zField
us0 @RichDialog f673 '' #zField
us0 @PushWFArc f908 '' #zField
us0 @RichDialog f732 '' #zField
us0 @PushWFArc f58 '' #zField
us0 @PushWFArc f909 '' #zField
us0 @RichDialog f201 '' #zField
us0 @PushWFArc f204 '' #zField
us0 @PushWFArc f236 '' #zField
us0 @RichDialog f237 '' #zField
us0 @PushWFArc f910 '' #zField
us0 @PushWFArc f577 '' #zField
us0 @RichDialog f578 '' #zField
us0 @PushWFArc f322 '' #zField
us0 @PushWFArc f624 '' #zField
us0 @RichDialog f321 '' #zField
us0 @PushWFArc f323 '' #zField
us0 @PushWFArc f325 '' #zField
us0 @RichDialog f328 '' #zField
us0 @PushWFArc f463 '' #zField
us0 @PushWFArc f465 '' #zField
us0 @RichDialog f466 '' #zField
us0 @PushWFArc f477 '' #zField
us0 @PushWFArc f478 '' #zField
us0 @RichDialog f736 '' #zField
us0 @PushWFArc f737 '' #zField
us0 @PushWFArc f700 '' #zField
us0 @RichDialog f644 '' #zField
us0 @PushWFArc f719 '' #zField
us0 @PushWFArc f746 '' #zField
us0 @RichDialog f747 '' #zField
us0 @PushWFArc f750 '' #zField
us0 @PushWFArc f589 '' #zField
us0 @RichDialog f912 '' #zField
us0 @PushWFArc f916 '' #zField
us0 @PushWFArc f332 '' #zField
us0 @RichDialog f917 '' #zField
us0 @PushWFArc f47 '' #zField
us0 @PushWFArc f688 '' #zField
us0 @RichDialog f75 '' #zField
us0 @PushWFArc f78 '' #zField
us0 @PushWFArc f226 '' #zField
us0 @RichDialog f80 '' #zField
us0 @PushWFArc f225 '' #zField
us0 @PushWFArc f331 '' #zField
us0 @RichDialog f333 '' #zField
us0 @PushWFArc f436 '' #zField
us0 @RichDialog f462 '' #zField
us0 @PushWFArc f583 '' #zField
us0 @RichDialog f484 '' #zField
us0 @PushWFArc f491 '' #zField
us0 @PushWFArc f490 '' #zField
us0 @PushWFArc f76 '' #zField
us0 @RichDialog f435 '' #zField
us0 @PushWFArc f438 '' #zField
us0 @RichDialog f591 '' #zField
us0 @PushWFArc f609 '' #zField
us0 @PushWFArc f493 '' #zField
us0 @RichDialog f690 '' #zField
us0 @PushWFArc f691 '' #zField
us0 @PushWFArc f692 '' #zField
us0 @RichDialog f693 '' #zField
us0 @PushWFArc f812 '' #zField
us0 @RichDialog f825 '' #zField
us0 @PushWFArc f845 '' #zField
us0 @RichDialogFireEvent f837 '' #zField
us0 @PushWFArc f846 '' #zField
us0 @PushWFArc f632 '' #zField
us0 @PushWFArc f857 '' #zField
us0 @PushWFArc f858 '' #zField
us0 @Alternative f847 '' #zField
us0 @PushWFArc f848 '' #zField
us0 @RichDialogProcessStep f856 '' #zField
us0 @PushWFArc f849 '' #zField
us0 @RichDialogProcessStep f860 '' #zField
us0 @PushWFArc f861 '' #zField
us0 @Alternative f918 '' #zField
us0 @PushWFArc f929 '' #zField
us0 @RichDialog f924 '' #zField
us0 @PushWFArc f933 '' #zField
us0 @Alternative f937 '' #zField
us0 @PushWFArc f950 '' #zField
us0 @RichDialog f971 '' #zField
us0 @PushWFArc f972 '' #zField
us0 @PushWFArc f931 '' #zField
us0 @PushWFArc f973 '' #zField
us0 @PushWFArc f974 '' #zField
us0 @RichDialog f834 '' #zField
us0 @Alternative f979 '' #zField
us0 @PushWFArc f980 '' #zField
us0 @PushWFArc f981 '' #zField
us0 @PushWFArc f818 '' #zField
us0 @PushWFArc f982 '' #zField
us0 @RichDialogProcessStep f984 '' #zField
us0 @PushWFArc f991 '' #zField
us0 @PushWFArc f689 '' #zField
us0 @RichDialogProcessStep f992 '' #zField
us0 @PushWFArc f993 '' #zField
us0 @PushWFArc f819 '' #zField
us0 @RichDialogProcessStep f994 '' #zField
us0 @PushWFArc f995 '' #zField
us0 @PushWFArc f832 '' #zField
us0 @RichDialogProcessStep f820 '' #zField
us0 @PushWFArc f835 '' #zField
us0 @PushWFArc f607 '' #zField
us0 @RichDialogProcessStep f998 '' #zField
us0 @PushWFArc f1000 '' #zField
us0 @PushWFArc f952 '' #zField
us0 @RichDialogProcessStep f1003 '' #zField
us0 @PushWFArc f1008 '' #zField
us0 @PushWFArc f455 '' #zField
us0 @PushWFArc f464 '' #zField
us0 @Alternative f1009 '' #zField
us0 @PushWFArc f1011 '' #zField
us0 @PushWFArc f1012 '' #zField
us0 @PushWFArc f676 '' #zField
us0 @RichDialogProcessStep f362 '' #zField
us0 @PushWFArc f367 '' #zField
us0 @PushWFArc f969 '' #zField
us0 @RichDialogProcessStep f1013 '' #zField
us0 @RichDialogProcessStart f1019 '' #zField
us0 @RichDialogProcessStep f1021 '' #zField
us0 @PushWFArc f1093 '' #zField
us0 @RichDialogProcessEnd f1095 '' #zField
us0 @PushWFArc f1119 '' #zField
us0 @RichDialogMethodStart f1120 '' #zField
us0 @RichDialogProcessEnd f1121 '' #zField
us0 @PushWFArc f1122 '' #zField
us0 @RichDialogMethodStart f1123 '' #zField
us0 @RichDialogProcessEnd f1124 '' #zField
us0 @PushWFArc f1125 '' #zField
us0 @PushWFArc f1128 '' #zField
us0 @RichDialogMethodStart f1127 '' #zField
us0 @RichDialogProcessEnd f1129 '' #zField
us0 @PushWFArc f1130 '' #zField
us0 @RichDialogMethodStart f1131 '' #zField
us0 @RichDialogProcessStep f1132 '' #zField
us0 @PushWFArc f1133 '' #zField
us0 @Alternative f1134 '' #zField
us0 @PushWFArc f1135 '' #zField
us0 @RichDialogProcessStep f1136 '' #zField
us0 @PushWFArc f1137 '' #zField
us0 @RichDialogProcessStep f1138 '' #zField
us0 @PushWFArc f1139 '' #zField
us0 @RichDialogProcessStep f1140 '' #zField
us0 @PushWFArc f1141 '' #zField
us0 @RichDialogProcessEnd f1142 '' #zField
us0 @PushWFArc f1143 '' #zField
us0 @RichDialog f1144 '' #zField
us0 @PushWFArc f1145 '' #zField
us0 @RichDialogProcessStep f1146 '' #zField
us0 @PushWFArc f1147 '' #zField
us0 @PushWFArc f1148 '' #zField
us0 @RichDialogProcessStart f1149 '' #zField
us0 @RichDialog f1150 '' #zField
us0 @PushWFArc f1151 '' #zField
us0 @RichDialogProcessEnd f1152 '' #zField
us0 @RichDialogProcessStep f864 '' #zField
us0 @PushWFArc f1126 '' #zField
us0 @PushWFArc f1153 '' #zField
us0 @Alternative f1156 '' #zField
us0 @PushWFArc f1155 '' #zField
us0 @RichDialog f1158 '' #zField
us0 @PushWFArc f1159 '' #zField
us0 @PushWFArc f1160 '' #zField
us0 @RichDialogMethodStart f1161 '' #zField
us0 @PushWFArc f1162 '' #zField
us0 @RichDialogProcessStep f885 '' #zField
us0 @PushWFArc f887 '' #zField
us0 @RichDialog f1154 '' #zField
us0 @Alternative f1157 '' #zField
us0 @PushWFArc f1163 '' #zField
us0 @PushWFArc f978 '' #zField
us0 @PushWFArc f1164 '' #zField
us0 @PushWFArc f1165 '' #zField
us0 @Alternative f1018 '' #zField
us0 @PushWFArc f1166 '' #zField
us0 @PushWFArc f1167 '' #zField
us0 @RichDialog f1118 '' #zField
us0 @PushWFArc f1168 '' #zField
us0 @PushWFArc f1169 '' #zField
us0 @PushWFArc f1170 '' #zField
us0 @RichDialogProcessStep f704 '' #zField
us0 @PushWFArc f23 '' #zField
us0 @Alternative f1172 '' #zField
us0 @PushWFArc f1173 '' #zField
us0 @PushWFArc f1171 '' #zField
us0 @RichDialog f1174 '' #zField
us0 @PushWFArc f1175 '' #zField
us0 @PushWFArc f1176 '' #zField
us0 @RichDialogBroadcastStart f1177 '' #zField
us0 @RichDialogProcessEnd f1178 '' #zField
us0 @PushWFArc f1179 '' #zField
us0 @PushWFArc f639 '' #zField
us0 @PushWFArc f1180 '' #zField
us0 @PushWFArc f722 '' #zField
us0 @PushWFArc f867 '' #zField
us0 @Alternative f353 '' #zField
us0 @RichDialogProcessEnd f959 '' #zField
us0 @PushWFArc f961 '' #zField
us0 @RichDialogMethodStart f1041 '' #zField
us0 @RichDialogProcessEnd f1042 '' #zField
us0 @PushWFArc f1044 '' #zField
us0 @RichDialogBroadcastStart f1045 '' #zField
us0 @Alternative f1046 '' #zField
us0 @PushWFArc f1047 '' #zField
us0 @PushWFArc f1048 '' #zField
us0 @RichDialogProcessEnd f1050 '' #zField
us0 @PushWFArc f1051 '' #zField
us0 @RichDialogProcessStep f1053 '' #zField
us0 @PushWFArc f1054 '' #zField
us0 @PushWFArc f1015 '' #zField
us0 @RichDialogProcessStep f872 '' #zField
us0 @PushWFArc f1055 '' #zField
us0 @RichDialogProcessStep f1056 '' #zField
us0 @PushWFArc f1092 '' #zField
us0 @PushWFArc f352 '' #zField
us0 @PushWFArc f1181 '' #zField
us0 @PushWFArc f125 '' #zField
us0 @CallSub f39 '' #zField
us0 @PushWFArc f85 '' #zField
us0 @PushWFArc f88 '' #zField
us0 @PushWFArc f167 '' #zField
us0 @PushWFArc f290 '' #zField
us0 @PushWFArc f291 '' #zField
us0 @CallSub f293 '' #zField
us0 @PushWFArc f371 '' #zField
us0 @PushWFArc f614 '' #zField
us0 @PushWFArc f615 '' #zField
us0 @PushWFArc f617 '' #zField
us0 @RichDialogBroadcastStart f811 '' #zField
us0 @RichDialogProcessStep f814 '' #zField
us0 @RichDialogProcessEnd f833 '' #zField
us0 @RichDialog f934 '' #zField
us0 @PushWFArc f935 '' #zField
us0 @RichDialogProcessStep f1052 '' #zField
us0 @PushWFArc f1182 '' #zField
us0 @PushWFArc f859 '' #zField
us0 @Alternative f1183 '' #zField
us0 @PushWFArc f1184 '' #zField
us0 @PushWFArc f1186 '' #zField
us0 @RichDialogProcessStep f1185 '' #zField
us0 @PushWFArc f1187 '' #zField
us0 @Alternative f1188 '' #zField
us0 @PushWFArc f1189 '' #zField
us0 @PushWFArc f823 '' #zField
us0 @PushWFArc f1190 '' #zField
us0 @RichDialogProcessStart f302 '' #zField
us0 @RichDialogProcessEnd f303 '' #zField
us0 @PushWFArc f304 '' #zField
us0 @RichDialogProcessStep f222 '' #zField
us0 @RichDialogMethodStart f221 '' #zField
us0 @RichDialogProcessEnd f287 '' #zField
us0 @PushWFArc f286 '' #zField
us0 @PushWFArc f289 '' #zField
us0 @RichDialogProcessStep f1191 '' #zField
us0 @PushWFArc f1192 '' #zField
us0 @CallSub f1193 '' #zField
us0 @PushWFArc f1194 '' #zField
us0 @PushWFArc f866 '' #zField
us0 @PushWFArc f1195 '' #zField
>Proto us0 us0 updownloadPaneProcess #zField
us0 f0 guid 11D3EC39343F50E1 #txt
us0 f0 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f0 method start() #txt
us0 f0 disableUIEvents false #txt
us0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f0 inParameterMapAction 'out.clientTempDirPath="";
out.filesNumber="0";
' #txt
us0 f0 outParameterDecl '<> result;
' #txt
us0 f0 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
        <nameStyle>7,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f0 326 86 20 20 13 0 #rect
us0 f0 @|RichDialogInitStartIcon #fIcon
us0 f3 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f3 actionTable 'out=in;
' #txt
us0 f3 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileManagementHandlersFactory;
import ch.ivyteam.ivy.addons.filemanager.database.security.DirectorySecurityController;

import ch.ivyteam.ivy.addons.filemanager.FileDownloadHandler;
import ch.ivyteam.ivy.addons.filemanager.FileUploadHandler;

//Make date and time
Date d = new Date();
in.today = d.format("dd.MM.yyyy");
Time t = new Time();
in.time = t.format();
in.applicationUserName = ivy.session.getSessionUserName();
in.selectedFolderOnServer.path = in.configurationController.rootPath; 

try{
	if(in.#fileManagementHandler == null){
		if(in.configurationController.getFileManagementHandler() != null){
			in.fileManagementHandler = in.configurationController.getFileManagementHandler();
		}else{
			in.fileManagementHandler = FileManagementHandlersFactory.getFileManagementHandlerInstance(in.configurationController);
			in.configurationController.fileManagementHandler = in.fileManagementHandler;
		}
	}

	if(in.configurationController.activateSecurity)
	{
		if(in.fileManagementHandler.getSecurityHandler() == null) {
			ivy.log.error("The SECURITY HANDLER IS NULL !!!!!!");
		}
		if(in.#configurationController.#securityHandler == null){
			in.configurationController.securityHandler = in.fileManagementHandler.getSecurityController() as DirectorySecurityController;
		}
		//find out if the current user has the file manager admin role
		in.isUserFileManagerAdmin = in.fileManagementHandler.getSecurityHandler()
				.hasRight(null,ch.ivyteam.ivy.addons.filemanager.database.security.SecurityRightsEnum.MANAGE_SECURITY_RIGHT,
					null,ivy.session.getSessionUser(),null).isAllow();
		in.configurationController.showFileTypeManagement = in.isUserFileManagerAdmin;
	}

	if(in.configurationController.activateFileVersioning)
	{
		panel.deleteMenuItem.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFilesVersions"));
		panel.deleteButton.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/deleteFilesVersions"));
		panel.deleteButton.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteVersion"));
	}else{
		panel.makeVersionMenuItem.setVisible(false);
		panel.openVersionsMenuItem.setVisible(false);
	}

}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}

//Build the 2 file handler objects
if(in.configurationController.storeFilesInDB){
	File dir = new File(in.applicationUserName+"/"+System.nanoTime()+"/Upload/",true);
	dir.mkdir();
	if(dir.isDirectory())
	{
		in.uploadHandler = new FileUploadHandler(panel,"_onError","_onUploadSuccessForFilesInDB","_askIfOverwriteExistingDocumentsOnServer","_onProgressWithText","_changeUploadButtonState",dir.getAbsolutePath(),true);
		in.downloadHandler = new FileDownloadHandler(panel,"_onError", "_onDownloadSuccess","_onProgress",dir.getAbsolutePath());
		in.uploadHandler.setFileHandlerMgt(in.fileManagementHandler);
	}
	else{
		in.uploadHandler = new FileUploadHandler(panel,"_onError","_onUploadSuccess","_askIfOverwriteExistingDocumentsOnServer","_onProgressWithText",in.configurationController.rootPath);
		in.downloadHandler = new FileDownloadHandler(panel,"_onError", "_onDownloadSuccess","_onProgress",in.configurationController.rootPath);
		in.uploadHandler.setFileHandlerMgt(in.fileManagementHandler);
	}
	in.uploadHandler.setFilesDestinationPathForDB(in.configurationController.rootPath);
}else{
	in.uploadHandler = new FileUploadHandler(panel,"_onError","_onUploadSuccess","_askIfOverwriteExistingFiles","_onProgressWithText",in.configurationController.rootPath);
	in.downloadHandler = new FileDownloadHandler(panel,"_onError", "_onDownloadSuccess","_onProgress",in.configurationController.rootPath);
}

in.uploadHandler.config = in.configurationController;
if(in.configurationController.maxFileUploadSize>0)
{
	in.uploadHandler.setMaxSize(in.configurationController.maxFileUploadSize);
}

if(in.isUserFileManagerAdmin){
	panel.toogleFileListingButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/admin/16"));
	panel.toogleFileListingButton.setRolloverIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/admin/24"));
	panel.toogleFileListingButton.setPressedIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/admin/24"));
	panel.toogleFileListingButton.toolTipText=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/openSecurityAdministration");
}else{
	panel.toogleFileListingButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/fileSharing/16"));
	panel.toogleFileListingButton.setRolloverIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/fileSharing/24"));
	panel.toogleFileListingButton.setPressedIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/fileSharing/24"));
	panel.toogleFileListingButton.toolTipText=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/toogleFileListing");
	
}

in.downloadHandler.setCallbackForOverriding("_askForDownloadOverride");
import ch.ivyteam.ivy.event.SystemEventCategory;
// register
ivy.rd.subscribeToSystemEvents(SystemEventCategory.THIRD_PARTY);

' #txt
us0 f3 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make FileUploadHandler
make FileDownloadHandler
make fileManagementHandler
make the date
subscribes to System Event
set isUserFileManagerAdmin</name>
        <nameStyle>142,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f3 318 605 36 23 -192 -55 #rect
us0 f3 @|RichDialogProcessStepIcon #fIcon
us0 f3 -613726|-613726|-16777216 #nodeStyle
us0 f5 guid 11D3ECBE28E494B6 #txt
us0 f5 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f5 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f5 actionTable 'out=in;
' #txt
us0 f5 actionCode 'out.returnedMessage.text="";
panel.ProgressBar.setIndeterminate(true);
out.progressText="";' #txt
us0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Upload a file</name>
        <nameStyle>13,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f5 2358 734 20 20 -28 -29 #rect
us0 f5 @|RichDialogProcessStartIcon #fIcon
us0 f6 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f6 2355 843 26 26 14 0 #rect
us0 f6 @|RichDialogProcessEndIcon #fIcon
us0 f9 guid 11D41FC191668E79 #txt
us0 f9 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f9 method _onError(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f9 disableUIEvents false #txt
us0 f9 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f9 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
us0 f9 outParameterDecl '<> result;
' #txt
us0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onError(ReturnedMessage)</name>
        <nameStyle>25,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f9 4174 110 20 20 -53 -32 #rect
us0 f9 @|RichDialogMethodStartIcon #fIcon
us0 f10 guid 11D41FC2555BE3A2 #txt
us0 f10 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f10 method _onSuccess(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f10 disableUIEvents false #txt
us0 f10 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f10 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
us0 f10 outParameterDecl '<> result;
' #txt
us0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onSuccess(ReturnedMessage)</name>
        <nameStyle>27,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f10 4102 366 20 20 -60 -32 #rect
us0 f10 @|RichDialogMethodStartIcon #fIcon
us0 f11 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f11 5003 355 26 26 14 0 #rect
us0 f11 @|RichDialogProcessEndIcon #fIcon
us0 f15 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f15 actionTable 'out=in;
' #txt
us0 f15 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

in.time=new Time().format("HH:mm:ss");
in.today =  new Date().format("d.M.yyyy");

DocumentOnServer doc = new DocumentOnServer();
List<DocumentOnServer> docs = new List<DocumentOnServer>();
doc.creationDate= in.today;
doc.creationTime=in.time;
doc.userID=in.applicationUserName;
doc.filename=in.returnedMessage.file.getName().trim();
doc.path=in.returnedMessage.file.getPath().trim();
doc.fileSize=FileHandler.getFileSize(in.returnedMessage.file);
doc.modificationDate= in.today;
doc.modificationTime=in.time;
doc.modificationUserID=in.applicationUserName;
doc.locked="0";
in.selectedDocument.filename="";

docs.add(doc);
int id=0;
try{
	id=in.fileManagementHandler.insertDocuments(docs);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
if(id>0){
	in.documentsInDb.add(doc);
	in.filesNumber=(in.filesNumber.toNumber()+1).toString();
}else{
	panel.refresh();
}


in.progressUnit=-1;
in.fileUploadInProgress=false;' #txt
us0 f15 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>retrieves Infos from uploadedFile
and insert it into the Filemanagement
File indexing system</name>
        <nameStyle>92,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f15 4998 244 36 24 27 -25 #rect
us0 f15 @|RichDialogProcessStepIcon #fIcon
us0 f17 guid 11D42758DEB45FD8 #txt
us0 f17 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f17 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f17 actionTable 'out=in;
' #txt
us0 f17 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterAnswer;
List<DocumentOnServer> accepted = new List<DocumentOnServer>();
List<DocumentOnServer> rejected = new List<DocumentOnServer>();
in.tmpListOfFiles.clear();
in.errorUtil.message="";
if(in.#downloadHandler!=null&& in.selectedDocument.filename!=""){
	
	if(in.#configurationController.#documentFilter!=null) {
		for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
			DocumentFilterAnswer answer = in.configurationController.documentFilter.allowAction(doc,ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterActionEnum.DOWNLOAD);
			if(answer.allow) {
				accepted.add(doc);
			}else {
				rejected.add(doc);
			}
		}
	}else {
		accepted.addAll(panel.filesTable.selectedListEntries);
	}
	if(!rejected.isEmpty()) {
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=false;
		in.errorUtil.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/documentFilter/downloadActionNotAllowForTheseFiles")+"<br>";
		for(DocumentOnServer doc: rejected){ 
			in.errorUtil.message+="<br>"+doc.getFilename();
		}
		in.errorUtil.message+="</html>";
		in.dialogParam.windowTitle = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/actionVorbidden");
	}
	panel.ProgressBar.setValue(0);
	for(DocumentOnServer doc: accepted){
		
		try{
			DocumentOnServer doc1=in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
			if(doc1.getJavaFile() !=null){
				in.tmpListOfFiles.add(doc1.getJavaFile());
				if(in.configurationController.fileActionHistoryConfiguration.downloadFileTracked)
				{
					in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(Long.parseLong(doc1.fileID),6,in.applicationUserName,"");
				}
			}
		}catch(Throwable t){
			
		}

	}
	


}' #txt
us0 f17 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>download selected Files</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f17 2254 878 20 20 -28 -31 #rect
us0 f17 @|RichDialogProcessStartIcon #fIcon
us0 f17 -14336|-1|-16777216 #nodeStyle
us0 f18 guid 11D42EE9868EE3A0 #txt
us0 f18 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f18 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f18 actionTable 'out=in;
' #txt
us0 f18 actionCode in.progressUnit=-1; #txt
us0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File choosed in the table</name>
        <nameStyle>25,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f18 2190 22 20 20 17 -14 #rect
us0 f18 @|RichDialogProcessStartIcon #fIcon
us0 f19 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f19 actionTable 'out=in;
' #txt
us0 f19 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerPanelGuiManager;
import org.apache.commons.beanutils.BeanUtils;
import ch.ivyteam.ivy.addons.filemanager.database.filelink.FileLink;
import org.apache.commons.lang3.StringUtils;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
 	DocumentOnServer doc = new DocumentOnServer();
	if(panel.filesTable.selectedListEntry instanceof FileLink) {
		doc = panel.filesTable.selectedListEntry as FileLink;
		in.selectedDocument = new FileLink();
	} else {
		doc = panel.filesTable.selectedListEntry as DocumentOnServer;
		in.selectedDocument = new DocumentOnServer();
	}
  BeanUtils.copyProperties(in.selectedDocument, doc);
	
	in.selectedDocument.versionnumber=doc.versionnumber>1?doc.versionnumber:1;
	in.selectedDocument.isLocked=(doc.locked.compareTo("1")==0);
	if(doc instanceof FileLink) {
		in.returnedMessage.type = FileHandler.INFORMATION_MESSAGE;
		if(!StringUtils.isEmpty(in.selectedDocument.displayedPath)) {
			in.returnedMessage.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/fileLinks/linkTo")+doc.displayedPath);
		} else {
			in.returnedMessage.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/fileLinks/linkTo")+doc.getPath());
		}
	} else {
		in.returnedMessage.type = FileHandler.INFORMATION_MESSAGE;
		if(!StringUtils.isEmpty(in.selectedDocument.displayedPath)) {
			in.returnedMessage.setText(in.selectedDocument.displayedPath);
		} else {
			in.returnedMessage.setText(in.selectedDocument.path);
		}
	}
	if(doc.fileType!=null)
	{
		in.selectedDocument.fileType=doc.fileType.clone();
	}else{
		in.selectedDocument=null;
	}
	
	in.selectedDocumentsForParent.clear();
	for(Object o: panel.filesTable.selectedListEntries){
			DocumentOnServer doc = o as DocumentOnServer;
			in.selectedDocumentsForParent.add(doc);
	}
	FileManagerPanelGuiManager.manageDocumentSelectionChange(panel,in.configurationController,in.selectedFolderOnServer,in.isUserFileManagerAdmin);
}else{
	panel.deleteMenuItem.enabled=false;
	panel.deleteButton.enabled=false;
	in.selectedDocument = new DocumentOnServer();
	panel.FileNameInvisibleTextField.setText("");
	in.selectedDocumentsForParent.clear();
}
' #txt
us0 f19 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Build 
selectedDocument</name>
        <nameStyle>23,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f19 2182 60 36 24 -121 -14 #rect
us0 f19 @|RichDialogProcessStepIcon #fIcon
us0 f19 -613726|-613726|-16777216 #nodeStyle
us0 f20 expr out #txt
us0 f20 2200 42 2200 60 #arcP
us0 f21 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f21 2187 147 26 26 14 0 #rect
us0 f21 @|RichDialogProcessEndIcon #fIcon
us0 f25 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f25 2251 1027 26 26 14 0 #rect
us0 f25 @|RichDialogProcessEndIcon #fIcon
us0 f34 guid 11D4343AE72A9CC1 #txt
us0 f34 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f34 method startWithServerPath(String) #txt
us0 f34 disableUIEvents false #txt
us0 f34 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f34 inParameterMapAction 'out.clientTempDirPath="";
out.configurationController.activateFileVersioning=false;
out.configurationController.activateSecurity=false;
out.configurationController.folderTreeVisible=true;
out.configurationController.rootPath=param.serverPath;
out.configurationController.storeFilesInDB=false;
out.configurationController.toolBarVisible=true;
out.configurationController.useIvySystemDB=false;
out.cursor=0;
' #txt
us0 f34 outParameterDecl '<> result;
' #txt
us0 f34 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPath(String)</name>
        <nameStyle>27,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f34 446 126 20 20 15 -8 #rect
us0 f34 @|RichDialogInitStartIcon #fIcon
us0 f27 guid 11D438D57924C5D9 #txt
us0 f27 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f27 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f27 actionTable 'out=in;
' #txt
us0 f27 actionCode 'import ch.ivyteam.ivy.richdialog.widgets.menus.RMenuItem;
in.progressUnit=-1;
if(event.getSource() instanceof RMenuItem)
{
	out.dialogParam.outputBoolean=true;
}else
{
	out.dialogParam.outputBoolean=false;
}
' #txt
us0 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete selected Files</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f27 2486 70 20 20 -38 -31 #rect
us0 f27 @|RichDialogProcessStartIcon #fIcon
us0 f28 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f28 actionTable 'out=in;
' #txt
us0 f28 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.filelink.FileLink;
import ch.ivyteam.ivy.addons.filemanager.database.FileStoreDBHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

//get the selected docs
List<DocumentOnServer> tmp = new List<DocumentOnServer>();
tmp.addAll(in.selectedDocuments);
in.selectedDocuments = new List<DocumentOnServer>();

// get and remove the locked docs from the list to delete
try{
	if(in.#selectedFolderOnServer.#path!=null) {
		List<DocumentOnServer> lockedDocs = new List<DocumentOnServer>();
		lockedDocs.addAll(in.fileManagementHandler.getDocumentsLocked(in.selectedFolderOnServer.path,in.configurationController.diplayFilesRecursively));
		for(DocumentOnServer doc : tmp){
			boolean found = false;
			for(DocumentOnServer doc1 : lockedDocs) {
				if(doc.fileID.equalsIgnoreCase(doc1.fileID)) {
					found = true;
					break;
				}
			}
			if(!found) {
				in.selectedDocuments.add(doc);
			}
		}
	}
	
	if(in.selectedDocuments.size()>0) {
		in.returnedMessage.type=1;
		in.errorUtil.errorOccurred=false;
		if(in.configurationController.activateFileVersioning && !in.dialogParam.outputBoolean) {
			FileStoreDBHandler fs = in.fileManagementHandler as FileStoreDBHandler;
			for(DocumentOnServer d: in.selectedDocuments) {
				if(d instanceof FileLink) {
					in.returnedMessage = in.fileManagementHandler.deleteDocumentOnServer(d);
				} else if(d.versionnumber>1) {
					in.returnedMessage = fs.rollBackToPreviousVersion(d);
				} else {
					in.returnedMessage = in.fileManagementHandler.deleteDocumentOnServer(d);
				}
				if(in.returnedMessage.type!=1) {
					in.errorUtil.panelId = in.panelId;
					in.errorUtil.errorOccurred=true;
					in.errorUtil.message=in.returnedMessage.text;
					panel.fireErrorOccurred(in.errorUtil);
				}
			}
		} else {
			in.returnedMessage=in.fileManagementHandler.deleteDocumentOnServers(in.selectedDocuments);
			if(in.returnedMessage.type!=1) {
				 in.errorUtil.panelId = in.panelId;
				in.errorUtil.errorOccurred=true;
				in.errorUtil.message=in.returnedMessage.text;
				panel.fireErrorOccurred(in.errorUtil);
			 }
		} 
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
' #txt
us0 f28 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f28 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Select the unlocked Files
and delete them</name>
        <nameStyle>41,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f28 2478 468 36 24 20 -17 #rect
us0 f28 @|RichDialogProcessStepIcon #fIcon
us0 f28 -613726|-613726|-16777216 #nodeStyle
us0 f30 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f30 2307 219 26 26 14 0 #rect
us0 f30 @|RichDialogProcessEndIcon #fIcon
us0 f74 guid 11D47C7A35A8E128 #txt
us0 f74 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f74 method _onChangeFile(java.io.File,String) #txt
us0 f74 disableUIEvents false #txt
us0 f74 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File existingFileOnServer,java.lang.String fileName> param = methodEvent.getInputArguments();
' #txt
us0 f74 inParameterMapAction 'out.fileUpload=param.existingFileOnServer;
out.selectedServerFileName=param.fileName;
' #txt
us0 f74 outParameterDecl '<> result;
' #txt
us0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onChangeFile
(File existingFileOnServer, String FileName)</name>
        <nameStyle>58,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f74 5110 710 20 20 -152 -36 #rect
us0 f74 @|RichDialogMethodStartIcon #fIcon
us0 f77 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f77 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Confirmed ?</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f77 5186 962 28 28 14 0 #rect
us0 f77 @|AlternativeIcon #fIcon
us0 f81 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f81 5187 1155 26 26 14 0 #rect
us0 f81 @|RichDialogProcessEndIcon #fIcon
us0 f87 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f87 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Confirmed ?</name>
        <nameStyle>11,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f87 2482 410 28 28 10 -23 #rect
us0 f87 @|AlternativeIcon #fIcon
us0 f29 expr in #txt
us0 f29 outCond 'in.dialogParam.clickedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFiles")) ||
in.dialogParam.clickedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"))' #txt
us0 f29 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f29 2496 438 2496 468 #arcP
us0 f95 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f95 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File delete successfull ?</name>
        <nameStyle>25,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f95 2482 538 28 28 16 0 #rect
us0 f95 @|AlternativeIcon #fIcon
us0 f105 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f105 actionTable 'out=in;
' #txt
us0 f105 actionCode 'try{
	in.fileManagementHandler.deleteFiles(new List<java.io.File>().add(in.fileUpload));
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
' #txt
us0 f105 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f105 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete the file that
 will be overwritten</name>
        <nameStyle>41,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f105 5182 1036 36 24 28 -17 #rect
us0 f105 @|RichDialogProcessStepIcon #fIcon
us0 f106 expr in #txt
us0 f106 outCond in.dialogParam.clickedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f106 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f106 5200 990 5200 1036 #arcP
us0 f106 0 0.22580645161290322 0 0 #arcLabel
us0 f116 guid 11D4DCC4107AFD90 #txt
us0 f116 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f116 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f116 actionTable 'out=in;
' #txt
us0 f116 actionCode out.eventSource=null; #txt
us0 f116 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Tree selection</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f116 1078 94 20 20 -71 -11 #rect
us0 f116 @|RichDialogProcessStartIcon #fIcon
us0 f13 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f13 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>returnedMessage not null, And
returnedMessage.file not null, AND
returned.message.type SUCCESS (1)</name>
        <nameStyle>98,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f13 5002 170 28 28 15 -21 #rect
us0 f13 @|AlternativeIcon #fIcon
us0 f16 expr in #txt
us0 f16 outCond 'in.#returnedMessage!=null && in.#returnedMessage.#file!=null && in.returnedMessage.type==1' #txt
us0 f16 5016 198 5016 244 #arcP
us0 f121 expr in #txt
us0 f121 5002 184 5003 368 #arcP
us0 f121 1 4930 184 #addKink
us0 f121 2 4930 368 #addKink
us0 f121 1 0.8575546111881776 0 0 #arcLabel
us0 f122 guid 11D53743C81FC390 #txt
us0 f122 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f122 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f122 actionTable 'out=in;
' #txt
us0 f122 actionCode in.selectedFolderOnServer.path=in.configurationController.rootPath; #txt
us0 f122 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f122 462 686 20 20 -15 -33 #rect
us0 f122 @|RichDialogProcessStartIcon #fIcon
us0 f44 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f44 4171 299 26 26 14 0 #rect
us0 f44 @|RichDialogProcessEndIcon #fIcon
us0 f114 guid 11D62B490588F9CC #txt
us0 f114 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f114 method setServerPath(String) #txt
us0 f114 disableUIEvents false #txt
us0 f114 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f114 inParameterMapAction 'out.configurationController.rootPath=param.serverPath;
' #txt
us0 f114 outParameterDecl '<> result;
' #txt
us0 f114 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setServerPath(String)</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f114 982 518 20 20 -37 -29 #rect
us0 f114 @|RichDialogMethodStartIcon #fIcon
us0 f126 guid 11D62B6254A6CA0C #txt
us0 f126 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f126 method getSelectedDocument() #txt
us0 f126 disableUIEvents false #txt
us0 f126 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f126 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer selectedDocument> result;
' #txt
us0 f126 outActionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
if(panel.#filesTable.getSelectedListEntry()!=null &&
panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer) {
     result.selectedDocument = panel.filesTable.getSelectedListEntry() as DocumentOnServer;
}
' #txt
us0 f126 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedDocument()</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f126 2678 1774 20 20 -47 -31 #rect
us0 f126 @|RichDialogMethodStartIcon #fIcon
us0 f127 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f127 2675 1835 26 26 14 0 #rect
us0 f127 @|RichDialogProcessEndIcon #fIcon
us0 f128 expr out #txt
us0 f128 2688 1794 2688 1835 #arcP
us0 f53 guid 11D66E760E6E980E #txt
us0 f53 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f53 method startWithServerPathAndShowTree(String,Boolean) #txt
us0 f53 disableUIEvents false #txt
us0 f53 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.Boolean isTreeVisible> param = methodEvent.getInputArguments();
' #txt
us0 f53 inParameterMapAction 'out.clientTempDirPath="";
out.configurationController.folderTreeVisible=param.isTreeVisible;
out.configurationController.rootPath=param.serverPath;
' #txt
us0 f53 outParameterDecl '<> result;
' #txt
us0 f53 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f53 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndShowTree(String,Boolean)</name>
        <nameStyle>46,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f53 446 190 20 20 12 -10 #rect
us0 f53 @|RichDialogInitStartIcon #fIcon
us0 f92 guid 11D678B90A9EFC22 #txt
us0 f92 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f92 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f92 actionTable 'out=in;
' #txt
us0 f92 actionCode 'if(in.configurationController.folderTreeVisible){
	in.configurationController.folderTreeVisible=false;
}
else{
	in.configurationController.folderTreeVisible=true;
}
' #txt
us0 f92 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show/hide Tree</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f92 1422 710 20 20 -24 -43 #rect
us0 f92 @|RichDialogProcessStartIcon #fIcon
us0 f112 guid 11D6793D8E57A42A #txt
us0 f112 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f112 method showTree(Boolean) #txt
us0 f112 disableUIEvents false #txt
us0 f112 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean isTreeVisible> param = methodEvent.getInputArguments();
' #txt
us0 f112 inParameterMapAction 'out.configurationController.folderTreeVisible=param.isTreeVisible;
' #txt
us0 f112 outParameterDecl '<> result;
' #txt
us0 f112 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showTree(Boolean)</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f112 1494 710 20 20 13 0 #rect
us0 f112 @|RichDialogMethodStartIcon #fIcon
us0 f124 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f124 actionTable 'out=in;
' #txt
us0 f124 actionCode 'if(in.configurationController.folderTreeVisible){
	panel.SplitPane.setDividerLocation(0.2);
}else{
	panel.SplitPane.setDividerLocation(0);
}' #txt
us0 f124 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f124 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>If visible: SplitPane
 enabled and dividor to 0.2</name>
        <nameStyle>49,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f124 1486 756 36 24 22 -6 #rect
us0 f124 @|RichDialogProcessStepIcon #fIcon
us0 f132 expr out #txt
us0 f132 1504 730 1504 756 #arcP
us0 f134 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f134 1491 811 26 26 14 0 #rect
us0 f134 @|RichDialogProcessEndIcon #fIcon
us0 f135 expr out #txt
us0 f135 1504 780 1504 811 #arcP
us0 f136 guid 11D67B142FB2A5DD #txt
us0 f136 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f136 method makeDirectory(String) #txt
us0 f136 disableUIEvents false #txt
us0 f136 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String dirName> param = methodEvent.getInputArguments();
' #txt
us0 f136 inParameterMapAction 'out.stringVariable=param.dirName;
' #txt
us0 f136 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f136 outParameterMapAction 'result.returnedMessage=in.returnedMessage;
' #txt
us0 f136 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>makeDirectory(String)</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f136 1686 1238 20 20 -44 -32 #rect
us0 f136 @|RichDialogMethodStartIcon #fIcon
us0 f137 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f137 actionTable 'out=in;
' #txt
us0 f137 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
try{
		in.returnedMessage = in.fileManagementHandler.createDirectory(in.selectedFolderOnServer.path,in.stringVariable);
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
		ivy.log.error(in.errorUtil.message,t);

	}





' #txt
us0 f137 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f137 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f137 1678 1284 36 24 20 -2 #rect
us0 f137 @|RichDialogProcessStepIcon #fIcon
us0 f137 -613726|-613726|-16777216 #nodeStyle
us0 f138 expr out #txt
us0 f138 1696 1258 1696 1284 #arcP
us0 f139 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f139 1523 1355 26 26 14 0 #rect
us0 f139 @|RichDialogProcessEndIcon #fIcon
us0 f140 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f140 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>makedir successfull?</name>
        <nameStyle>20,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f140 1746 1354 28 28 16 -8 #rect
us0 f140 @|AlternativeIcon #fIcon
us0 f141 expr out #txt
us0 f141 1696 1308 1753 1361 #arcP
us0 f144 expr out #txt
us0 f144 1432 730 1486 768 #arcP
us0 f144 1 1432 768 #addKink
us0 f144 1 0.10466362465211641 0 0 #arcLabel
us0 f145 guid 11D6BB6133451C6F #txt
us0 f145 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f145 method getLastFileUploaded() #txt
us0 f145 disableUIEvents false #txt
us0 f145 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f145 outParameterDecl '<java.io.File file> result;
' #txt
us0 f145 outParameterMapAction 'result.file=in.fileUpload;
' #txt
us0 f145 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getLastFileUploaded()</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f145 2262 1766 20 20 -40 -32 #rect
us0 f145 @|RichDialogMethodStartIcon #fIcon
us0 f146 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f146 2259 1819 26 26 14 0 #rect
us0 f146 @|RichDialogProcessEndIcon #fIcon
us0 f147 expr out #txt
us0 f147 2272 1786 2272 1819 #arcP
us0 f94 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f94 4099 459 26 26 14 0 #rect
us0 f94 @|RichDialogProcessEndIcon #fIcon
us0 f26 actionCode panel.fireFileUploaded(); #txt
us0 f26 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f26 fireEvent fileUploaded() #txt
us0 f26 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Fire fileUploaded event</name>
        <nameStyle>23,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f26 4998 308 36 24 20 -2 #rect
us0 f26 @|RichDialogFireEventIcon #fIcon
us0 f12 expr out #txt
us0 f12 5016 332 5016 355 #arcP
us0 f33 guid 11D8F8E713A833A8 #txt
us0 f33 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f33 method _onProgress(Number) #txt
us0 f33 disableUIEvents false #txt
us0 f33 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Number progress> param = methodEvent.getInputArguments();
' #txt
us0 f33 inParameterMapAction 'out.progressUnit=param.progress;
' #txt
us0 f33 outParameterDecl '<> result;
' #txt
us0 f33 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onProgress()</name>
        <nameStyle>13,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f33 4774 246 20 20 13 0 #rect
us0 f33 @|RichDialogMethodStartIcon #fIcon
us0 f115 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f115 4771 299 26 26 14 0 #rect
us0 f115 @|RichDialogProcessEndIcon #fIcon
us0 f150 guid 11D96118A6725A12 #txt
us0 f150 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f150 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f150 actionTable 'out=in;
' #txt
us0 f150 actionCode 'import ch.ivyteam.ivy.addons.filemanager.RichDialogFileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

try{
	DocumentOnServer doc1=in.fileManagementHandler.getDocumentOnServerWithJavaFile(in.selectedDocument);
	
	if(doc1.getJavaFile().isFile()){
		RichDialogFileHandler.download(doc1.getJavaFile());
		if(in.configurationController.fileActionHistoryConfiguration.downloadFileTracked)
		{
			in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(Long.parseLong(doc1.fileID),6,in.applicationUserName,"");
		}
	}
	
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred")+"\n"+t.getMessage();
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f150 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>download to temp</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f150 2390 918 20 20 -35 -33 #rect
us0 f150 @|RichDialogProcessStartIcon #fIcon
us0 f150 -14336|-1|-16777216 #nodeStyle
us0 f151 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f151 2387 971 26 26 14 0 #rect
us0 f151 @|RichDialogProcessEndIcon #fIcon
us0 f152 expr out #txt
us0 f152 2400 938 2400 971 #arcP
us0 f153 guid 11DA9E1658C4C90F #txt
us0 f153 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f153 method downloadToTemp() #txt
us0 f153 disableUIEvents false #txt
us0 f153 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f153 outParameterDecl '<java.lang.Boolean isSuccess> result;
' #txt
us0 f153 outParameterMapAction 'result.isSuccess=in.responseBoolean;
' #txt
us0 f153 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>downloadToTemp()</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f153 3878 1302 20 20 13 0 #rect
us0 f153 @|RichDialogMethodStartIcon #fIcon
us0 f154 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f154 actionTable 'out=in;
' #txt
us0 f154 actionCode 'import ch.ivyteam.ivy.addons.filemanager.RichDialogFileHandler;

java.io.File f = in.fileManagementHandler.getDocumentOnServerWithJavaFile(in.selectedDocument).javaFile;
in.responseBoolean=RichDialogFileHandler.download(f,in.clientTempDirPath);' #txt
us0 f154 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f154 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f154 3870 1348 36 24 20 -2 #rect
us0 f154 @|RichDialogProcessStepIcon #fIcon
us0 f155 expr out #txt
us0 f155 3888 1322 3888 1348 #arcP
us0 f156 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f156 3875 1443 26 26 14 0 #rect
us0 f156 @|RichDialogProcessEndIcon #fIcon
us0 f157 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f157 actionTable 'out=in;
' #txt
us0 f157 actionCode 'if(in.responseBoolean){
	panel.statusLabel.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/downloadToTempFolderSuccess"));
}else{
	panel.statusLabel.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/downloadError"));
}' #txt
us0 f157 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f157 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set status message</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f157 3870 1396 36 24 20 -2 #rect
us0 f157 @|RichDialogProcessStepIcon #fIcon
us0 f158 expr out #txt
us0 f158 3888 1372 3888 1396 #arcP
us0 f159 expr out #txt
us0 f159 3888 1420 3888 1443 #arcP
us0 f160 guid 11DA9E8966AF6777 #txt
us0 f160 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f160 method startWithServerPathAndWithClientTempDirAndShowTree(String,String,Boolean) #txt
us0 f160 disableUIEvents false #txt
us0 f160 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.String clientTempDir,java.lang.Boolean showTree> param = methodEvent.getInputArguments();
' #txt
us0 f160 inParameterMapAction 'out.clientTempDirPath=param.clientTempDir;
out.configurationController.folderTreeVisible=param.showTree;
out.configurationController.rootPath=param.serverPath;
' #txt
us0 f160 outParameterDecl '<> result;
' #txt
us0 f160 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f160 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndWithClientTempDirAndShowTree(String,String,ApplicationContext,Boolean)</name>
        <nameStyle>92,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f160 446 222 20 20 13 -9 #rect
us0 f160 @|RichDialogInitStartIcon #fIcon
us0 f162 guid 11DA9EB0D478D637 #txt
us0 f162 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f162 method setClientTempDir(String) #txt
us0 f162 disableUIEvents false #txt
us0 f162 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String clientTempDir> param = methodEvent.getInputArguments();
' #txt
us0 f162 inParameterMapAction 'out.clientTempDirPath=param.clientTempDir;
' #txt
us0 f162 outParameterDecl '<> result;
' #txt
us0 f162 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setClientTempDir(String)</name>
        <nameStyle>24,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f162 2246 1918 20 20 -48 -30 #rect
us0 f162 @|RichDialogMethodStartIcon #fIcon
us0 f163 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f163 2243 1979 26 26 14 0 #rect
us0 f163 @|RichDialogProcessEndIcon #fIcon
us0 f164 expr out #txt
us0 f164 2256 1938 2256 1979 #arcP
us0 f165 guid 11DE2EF0C5EF4018 #txt
us0 f165 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f165 method refresh() #txt
us0 f165 disableUIEvents false #txt
us0 f165 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f165 outParameterDecl '<> result;
' #txt
us0 f165 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh()</name>
    </language>
</elementInfo>
' #txt
us0 f165 423 686 18 20 -24 8 #rect
us0 f165 @|RichDialogMethodStartIcon #fIcon
us0 f31 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f31 actionTable 'out=in;
' #txt
us0 f31 actionCode 'try{
	if(in.selectedDocuments.size()>0){
		if(in.configurationController.activateFileVersioning && !in.dialogParam.outputBoolean)
		{
			panel.fireSE_DocumentsDeleted([in.selectedFolderOnServer.path,in.panelId]);
			panel.refreshActualSelectedFolder();
		}else{
			in.documentsInDb.removeAll(in.selectedDocuments);
			panel.fireSE_DocumentsDeleted([in.selectedFolderOnServer.path,in.panelId]);
		}
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f31 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f31 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fireSE_DocumentsDeleted</name>
        <nameStyle>23,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f31 2478 596 36 24 20 -14 #rect
us0 f31 @|RichDialogProcessStepIcon #fIcon
us0 f31 -5972572|-5972572|-16777216 #nodeStyle
us0 f168 expr in #txt
us0 f168 outCond !in.errorUtil.errorOccurred #txt
us0 f168 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f168 2496 566 2496 596 #arcP
us0 f168 0 0.3333333333333333 0 0 #arcLabel
us0 f176 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f176 actionTable 'out=in;
' #txt
us0 f176 actionCode in.progressUnit=-1; #txt
us0 f176 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f176 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>in.progressUnit=-1;</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f176 5102 1036 36 24 -130 -7 #rect
us0 f176 @|RichDialogProcessStepIcon #fIcon
us0 f177 expr in #txt
us0 f177 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f177 5186 976 5120 1036 #arcP
us0 f177 1 5120 976 #addKink
us0 f177 1 0.31692438544296825 0 0 #arcLabel
us0 f89 expr out #txt
us0 f89 5120 1060 5187 1168 #arcP
us0 f89 1 5120 1168 #addKink
us0 f89 0 0.6579784171316438 0 0 #arcLabel
us0 f107 expr out #txt
us0 f107 4784 266 4784 299 #arcP
us0 f166 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f166 actionTable 'out=in;
' #txt
us0 f166 actionCode 'in.progressUnit=-1;
' #txt
us0 f166 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f166 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>progress Unit set to -1
to Hide the Progressbar</name>
        <nameStyle>47,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f166 4094 404 36 24 20 -1 #rect
us0 f166 @|RichDialogProcessStepIcon #fIcon
us0 f179 expr out #txt
us0 f179 4112 386 4112 404 #arcP
us0 f24 expr out #txt
us0 f24 4112 428 4112 459 #arcP
us0 f180 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f180 actionTable 'out=in;
' #txt
us0 f180 actionCode 'out.progressUnit=-1;
panel.ProgressBar.setIndeterminate(false);' #txt
us0 f180 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f180 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f180 4166 148 36 24 20 -2 #rect
us0 f180 @|RichDialogProcessStepIcon #fIcon
us0 f181 expr out #txt
us0 f181 4184 130 4184 148 #arcP
us0 f182 guid 11E16F7BDA4344F3 #txt
us0 f182 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f182 method getSelectedDocuments() #txt
us0 f182 disableUIEvents false #txt
us0 f182 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f182 outParameterDecl '<List<ch.xpertline.common.ria.component.DocumentOnServer> listOfDocumentOnServer> result;
' #txt
us0 f182 outParameterMapAction 'result.listOfDocumentOnServer=in.selectedDocuments;
' #txt
us0 f182 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedDocuments()</name>
        <nameStyle>22,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f182 2382 1766 20 20 -44 -33 #rect
us0 f182 @|RichDialogMethodStartIcon #fIcon
us0 f183 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f183 actionTable 'out=in;
' #txt
us0 f183 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocuments = new List<DocumentOnServer>();
for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
	in.selectedDocuments.add(doc);
}
' #txt
us0 f183 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f183 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f183 2374 1805 36 23 20 -2 #rect
us0 f183 @|RichDialogProcessStepIcon #fIcon
us0 f184 expr out #txt
us0 f184 2392 1786 2392 1804 #arcP
us0 f185 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f185 2379 1843 26 26 14 0 #rect
us0 f185 @|RichDialogProcessEndIcon #fIcon
us0 f186 expr out #txt
us0 f186 2392 1827 2392 1843 #arcP
us0 f187 guid 11E266B093A206B7 #txt
us0 f187 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f187 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f187 actionTable 'out=in;
' #txt
us0 f187 actionCode panel.desktopHandlerPanel.setTableVisible(!panel.desktopHandlerPanel.getTableVisible()); #txt
us0 f187 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show/hidde the selected Files Panel</name>
        <nameStyle>35,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f187 2230 1118 20 20 -61 -32 #rect
us0 f187 @|RichDialogProcessStartIcon #fIcon
us0 f188 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f188 2227 1171 26 26 14 0 #rect
us0 f188 @|RichDialogProcessEndIcon #fIcon
us0 f189 expr out #txt
us0 f189 2240 1138 2240 1171 #arcP
us0 f190 guid 11E266F60B7C1BDB #txt
us0 f190 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f190 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f190 actionTable 'out=in;
out.isFileEditable=false;
' #txt
us0 f190 actionCode 'in.eventSource.eventSource=event.getSource();
' #txt
us0 f190 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>edit file</name>
        <nameStyle>9,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f190 3046 86 20 20 -16 -30 #rect
us0 f190 @|RichDialogProcessStartIcon #fIcon
us0 f190 -613726|-613726|-16777216 #nodeStyle
us0 f191 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f191 actionTable 'out=in;
' #txt
us0 f191 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
	DocumentOnServer doc = new DocumentOnServer();
	if(in.#selectedDocument.#javaFile != null && in.selectedDocument.javaFile.isFile()){
		doc=in.selectedDocument;
	}else{
 		doc = panel.filesTable.selectedListEntry as DocumentOnServer;
		doc= in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
	}
	panel.desktopHandlerPanel.openDocumentOnServerAndCheckForChanges(doc);
	//OLD SYSTEM panel.desktopHandlerPanel.openFileAndCheckForChanges(new java.io.File(doc.path));
	out.selectedDocument.locked="1";
	out.selectedDocument.lockingUserID=in.applicationUserName;

}' #txt
us0 f191 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f191 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Edit</name>
        <nameStyle>4,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f191 2894 540 36 24 19 -9 #rect
us0 f191 @|RichDialogProcessStepIcon #fIcon
us0 f191 -613726|-613726|-16777216 #nodeStyle
us0 f73 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f73 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Locked ?</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f73 2850 386 28 28 -62 -19 #rect
us0 f73 @|AlternativeIcon #fIcon
us0 f203 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f203 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Confirmed ?</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f203 2978 490 28 28 4 -35 #rect
us0 f203 @|AlternativeIcon #fIcon
us0 f205 guid 11E447BF8696BEA3 #txt
us0 f205 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f205 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f205 actionTable 'out=in;
' #txt
us0 f205 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open File (read only)</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f205 3262 118 20 20 -36 -31 #rect
us0 f205 @|RichDialogProcessStartIcon #fIcon
us0 f206 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f206 actionTable 'out=in;
' #txt
us0 f206 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.filelink.FileLink;
import ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterAnswer;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null){
	DocumentOnServer doc ;
	if(panel.filesTable.getSelectedListEntry() instanceof FileLink) {
  	doc = panel.filesTable.selectedListEntry as FileLink;
	} else {
  	doc = panel.filesTable.selectedListEntry as DocumentOnServer;
	}
	
	boolean allow =true;
	if(in.#configurationController.#documentFilter!=null) {
		DocumentFilterAnswer answer = in.configurationController.documentFilter.allowAction(doc, ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterActionEnum.OPEN);
		allow = answer.allow;
		if(!allow) {
			in.errorUtil.panelId = in.panelId;
			in.errorUtil.errorOccurred=false;
			in.errorUtil.message =answer.message;
			in.dialogParam.windowTitle = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/actionVorbidden");
			panel.fireErrorOccurred(in.errorUtil);
		}
	}
	
	if(allow){
		if(doc instanceof FileLink) {
  		doc = panel.filesTable.selectedListEntry as FileLink;
		}
		if(doc.getJavaFile()==null){
			doc = in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
		}
		panel.desktopHandlerPanel.openFile(doc.getJavaFile());
		if(in.configurationController.fileActionHistoryConfiguration.readFileTracked)
		{
			in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(Long.parseLong(doc.fileID),8,in.applicationUserName,"");
		}
	} 
}
panel.refreshActualSelectedFolder();' #txt
us0 f206 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f206 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open File with DesktopHandler
The eventual changes are not going
to be transmitted at the server side</name>
        <nameStyle>30,0,7,9
71,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f206 3214 420 36 24 8 -21 #rect
us0 f206 @|RichDialogProcessStepIcon #fIcon
us0 f206 -14336|-1|-16777216 #nodeStyle
us0 f207 expr out #txt
us0 f207 3272 138 3232 420 #arcP
us0 f207 1 3272 280 #addKink
us0 f207 0 0.38093416165386274 0 0 #arcLabel
us0 f208 expr in #txt
us0 f208 outCond in.dialogParam.clickedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f208 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f208 3006 504 3214 442 #arcP
us0 f208 1 3108 504 #addKink
us0 f208 0 0.9776145380448146 0 0 #arcLabel
us0 f211 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f211 3219 531 26 26 14 0 #rect
us0 f211 @|RichDialogProcessEndIcon #fIcon
us0 f212 expr out #txt
us0 f212 3232 444 3232 531 #arcP
us0 f215 guid 11E44AB51B132D31 #txt
us0 f215 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f215 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f215 actionTable 'out=in;
' #txt
us0 f215 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileCouple;
import ch.ivyteam.ivy.richdialog.exec.RdEvent;

RdEvent e = event as RdEvent;
if(e.getParameter() instanceof List<FileCouple>){
	List<FileCouple> list = e.getParameter() as List<FileCouple>;
	List<java.io.File> files = new List<java.io.File>();
	for(FileCouple fc: list){
		ivy.log.info("Try to unlock following file: "+fc.serverSidePath);
		in.fileManagementHandler.unlockFile(new java.io.File(fc.serverSidePath));
		files.add(new java.io.File(fc.serverSidePath));
	}
	panel.fireSE_FilesUnlocked(files);
}

panel.refreshActualSelectedFolder();' #txt
us0 f215 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unlock Files</name>
        <nameStyle>12,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f215 3470 510 20 20 -23 -33 #rect
us0 f215 @|RichDialogProcessStartIcon #fIcon
us0 f227 guid 11E454903325E8BD #txt
us0 f227 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f227 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f227 actionTable 'out=in;
' #txt
us0 f227 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;


RdEvent e = event as RdEvent;
if(e.getParameter() instanceof String){
	in.clientTempDirPath=e.getParameter() as String;
}

' #txt
us0 f227 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Change temp Dir</name>
        <nameStyle>15,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f227 1502 1054 20 20 -36 -28 #rect
us0 f227 @|RichDialogProcessStartIcon #fIcon
us0 f228 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f228 1499 1115 26 26 14 0 #rect
us0 f228 @|RichDialogProcessEndIcon #fIcon
us0 f229 expr out #txt
us0 f229 1512 1074 1512 1115 #arcP
us0 f230 guid 11E454BBE55F1836 #txt
us0 f230 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f230 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f230 actionTable 'out=in;
' #txt
us0 f230 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;

RdEvent e = event as RdEvent;
if(e.getParameter() instanceof String){
	if(in.applicationUserName.trim().equalsIgnoreCase("")){
		in.applicationUserName=e.getParameter() as String;
	}else{
		panel.desktopHandlerPanel.setUserName(in.applicationUserName);
	}
}

' #txt
us0 f230 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>changeUserName</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f230 1670 1054 20 20 -39 -28 #rect
us0 f230 @|RichDialogProcessStartIcon #fIcon
us0 f231 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f231 1667 1115 26 26 14 0 #rect
us0 f231 @|RichDialogProcessEndIcon #fIcon
us0 f232 expr out #txt
us0 f232 1680 1074 1680 1115 #arcP
us0 f239 guid 11E48B5A05732BAE #txt
us0 f239 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f239 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f239 actionTable 'out=in;
' #txt
us0 f239 actionCode out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f239 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get user infos</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f239 1806 1046 20 20 -27 -29 #rect
us0 f239 @|RichDialogProcessStartIcon #fIcon
us0 f240 targetWindow NEW:card: #txt
us0 f240 targetDisplay TOP #txt
us0 f240 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
us0 f240 startMethod showMessage(String) #txt
us0 f240 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f240 requestActionDecl '<String message> param;' #txt
us0 f240 requestActionCode 'param.message="Welcome ! Your user Id is: "+ in.applicationUserName+" and your temporary directory is: "+in.clientTempDirPath;' #txt
us0 f240 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f240 responseMappingAction 'out=in;
' #txt
us0 f240 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f240 isAsynch false #txt
us0 f240 isInnerRd true #txt
us0 f240 isDialog true #txt
us0 f240 userContext '* ' #txt
us0 f240 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Shows UserId and TempDir</name>
        <nameStyle>24,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f240 1798 1100 36 24 -93 6 #rect
us0 f240 @|RichDialogIcon #fIcon
us0 f241 expr out #txt
us0 f241 1816 1066 1816 1100 #arcP
us0 f242 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f242 1803 1155 26 26 14 0 #rect
us0 f242 @|RichDialogProcessEndIcon #fIcon
us0 f243 expr out #txt
us0 f243 1816 1124 1816 1155 #arcP
us0 f277 guid 11E498DAE43CF912 #txt
us0 f277 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f277 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f277 actionTable 'out=in;
' #txt
us0 f277 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocuments = new List<DocumentOnServer>();

for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
	in.selectedDocuments.add(doc);
}

panel.desktopHandlerPanel.unLockSelectedDocumentsOnServer(in.selectedDocuments);
' #txt
us0 f277 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unLockSelectedFiles</name>
        <nameStyle>19,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f277 3574 510 20 20 -37 -29 #rect
us0 f277 @|RichDialogProcessStartIcon #fIcon
us0 f278 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f278 3571 555 26 26 14 0 #rect
us0 f278 @|RichDialogProcessEndIcon #fIcon
us0 f279 expr out #txt
us0 f279 3584 530 3584 555 #arcP
us0 f280 guid 11E498EBEDA97565 #txt
us0 f280 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f280 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f280 actionTable 'out=in;
' #txt
us0 f280 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocuments = new List<DocumentOnServer>();

for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
	in.selectedDocuments.add(doc);
}

panel.desktopHandlerPanel.forceUnlock(in.selectedDocuments);' #txt
us0 f280 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>force unlock selected Files</name>
        <nameStyle>27,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f280 3366 510 20 20 -53 -30 #rect
us0 f280 @|RichDialogProcessStartIcon #fIcon
us0 f281 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f281 3363 555 26 26 14 0 #rect
us0 f281 @|RichDialogProcessEndIcon #fIcon
us0 f282 expr out #txt
us0 f282 3376 530 3376 555 #arcP
us0 f285 guid 11E8761934C2F21A #txt
us0 f285 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f285 method _checkIfFileLocked(ch.ivyteam.ivy.addons.filemanager.DocumentOnServer) #txt
us0 f285 disableUIEvents false #txt
us0 f285 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer document> param = methodEvent.getInputArguments();
' #txt
us0 f285 inParameterMapAction 'out.selectedDocument=param.document;
' #txt
us0 f285 outParameterDecl '<java.lang.Boolean fileLocked> result;
' #txt
us0 f285 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_checkIfFileLocked
(DocumentOnServer)</name>
        <nameStyle>37,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f285 2902 1774 20 20 -42 -38 #rect
us0 f285 @|RichDialogMethodStartIcon #fIcon
us0 f288 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f288 2899 1867 26 26 14 0 #rect
us0 f288 @|RichDialogProcessEndIcon #fIcon
us0 f301 guid 11E8B995CB02EF34 #txt
us0 f301 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f301 method addDocuments(List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer>) #txt
us0 f301 disableUIEvents false #txt
us0 f301 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> documentsList> param = methodEvent.getInputArguments();
' #txt
us0 f301 inActionCode 'out.filesToAdd.clear();
out.filesToAdd.addAll(param.documentsList);' #txt
us0 f301 outParameterDecl '<> result;
' #txt
us0 f301 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addDocuments(List&lt;DocumentOnServer&gt;)</name>
        <nameStyle>36,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f301 2358 1318 20 20 -72 -32 #rect
us0 f301 @|RichDialogMethodStartIcon #fIcon
us0 f306 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f306 actionTable 'out=in;
' #txt
us0 f306 actionCode 'if(in.filesToAdd.size()>0){
	in.time=new Time().format();
	in.today =  new Date().format("d.M.yyyy");
	
	int j= in.filesToAdd.size();
	for(int i=0; i<j; i++){
		in.filesToAdd.get(i).userID=in.applicationUserName;
		in.filesToAdd.get(i).creationDate=in.today;
		in.filesToAdd.get(i).creationTime=in.time;
		in.filesToAdd.get(i).modificationUserID=in.applicationUserName;
		in.filesToAdd.get(i).modificationDate=in.today;
		in.filesToAdd.get(i).modificationTime=in.time;
	}
	try{
		in.fileManagementHandler.insertDocuments(in.filesToAdd);
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
}
panel.refreshActualSelectedFolder();' #txt
us0 f306 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f306 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>insert the documents 
and refresh the selected folder</name>
        <nameStyle>53,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f306 2350 1380 36 24 14 -16 #rect
us0 f306 @|RichDialogProcessStepIcon #fIcon
us0 f312 expr out #txt
us0 f312 2368 1338 2368 1380 #arcP
us0 f324 guid 11E8C1D3ADF7C062 #txt
us0 f324 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f324 method isFileLocked(java.io.File) #txt
us0 f324 disableUIEvents false #txt
us0 f324 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File file> param = methodEvent.getInputArguments();
' #txt
us0 f324 inParameterMapAction 'out.stringVariable=param.file.getPath();
' #txt
us0 f324 outParameterDecl '<java.lang.Boolean locked> result;
' #txt
us0 f324 outParameterMapAction 'result.locked=in.responseBoolean;
' #txt
us0 f324 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>isFileLocked(File)</name>
        <nameStyle>18,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f324 2798 1766 20 20 -33 -31 #rect
us0 f324 @|RichDialogMethodStartIcon #fIcon
us0 f327 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f327 2795 1859 26 26 14 0 #rect
us0 f327 @|RichDialogProcessEndIcon #fIcon
us0 f329 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f329 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File to overwrite locked ?</name>
        <nameStyle>26,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f329 5186 818 28 28 -141 -27 #rect
us0 f329 @|AlternativeIcon #fIcon
us0 f334 guid 11E8C4DEA7966282 #txt
us0 f334 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f334 method getSelectedDirectoryPath() #txt
us0 f334 disableUIEvents false #txt
us0 f334 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f334 outParameterDecl '<java.lang.String selectedDirectoryPath> result;
' #txt
us0 f334 outParameterMapAction 'result.selectedDirectoryPath=in.selectedFolderOnServer.path;
' #txt
us0 f334 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedDirectoryPath()</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f334 1662 94 20 20 -54 -25 #rect
us0 f334 @|RichDialogMethodStartIcon #fIcon
us0 f335 guid 11E8C4E041BE73B6 #txt
us0 f335 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f335 method getServerPath() #txt
us0 f335 disableUIEvents false #txt
us0 f335 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f335 outParameterDecl '<java.lang.String serverPath> result;
' #txt
us0 f335 outParameterMapAction 'result.serverPath=in.configurationController.rootPath;
' #txt
us0 f335 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getServerPath()</name>
        <nameStyle>15,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f335 1662 206 20 20 -31 -39 #rect
us0 f335 @|RichDialogMethodStartIcon #fIcon
us0 f336 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f336 1659 131 26 26 14 0 #rect
us0 f336 @|RichDialogProcessEndIcon #fIcon
us0 f337 expr out #txt
us0 f337 1672 114 1672 131 #arcP
us0 f338 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f338 1659 243 26 26 14 0 #rect
us0 f338 @|RichDialogProcessEndIcon #fIcon
us0 f339 expr out #txt
us0 f339 1672 226 1672 243 #arcP
us0 f340 guid 11E8C53675E2C7C7 #txt
us0 f340 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f340 method getUserTempDirectoryPath() #txt
us0 f340 disableUIEvents false #txt
us0 f340 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f340 outParameterDecl '<java.lang.String userTempDirectoryPath> result;
' #txt
us0 f340 outParameterMapAction 'result.userTempDirectoryPath=in.clientTempDirPath;
' #txt
us0 f340 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getUserTempDirectoryPath()</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f340 1662 310 20 20 -50 -30 #rect
us0 f340 @|RichDialogMethodStartIcon #fIcon
us0 f341 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f341 1659 347 26 26 14 0 #rect
us0 f341 @|RichDialogProcessEndIcon #fIcon
us0 f342 expr out #txt
us0 f342 1672 330 1672 347 #arcP
us0 f343 guid 11E8D090292C69A8 #txt
us0 f343 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f343 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f343 actionTable 'out=in;
' #txt
us0 f343 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileCouple;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.richdialog.exec.RdEvent;

RdEvent e = event as RdEvent;
try{
	ivy.log.debug("file couple modified parameter "+e.getParameter().getClass());
	if(e.getParameter() instanceof java.io.File){
		
			java.io.File file = e.getParameter() as java.io.File;
			in.fileManagementHandler.changeModificationInformations(file, in.applicationUserName);
			if(in.configurationController.fileActionHistoryConfiguration.editFileTracked)
			{
				try
				{
					long id = Long.parseLong(in.fileManagementHandler.getDocumentOnServer(file.getPath()).fileID);
					in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(id,2,in.applicationUserName,"");
				}catch(Throwable t)
				{
					ivy.log.error("File Manager error: an error occurred while writing file changed history. "+t.getMessage());
				}
			}
	}
	else if(e.getParameter() instanceof FileCouple){
		FileCouple fc = e.getParameter() as FileCouple;
		
		if(in.configurationController.activateFileVersioningExtended && !fc.hasChanged){
			ivy.log.debug("I should create a new version first for file id "+fc.referencedDocumentOnServer.fileID);
			try{
				long id = Long.parseLong(fc.getReferencedDocumentOnServer().fileID);
				fc.getReferencedDocumentOnServer().versionnumber = panel.getFileVersioningController().createNewVersion(id).versionNumber;
				panel.fireSE_fileChanged(fc.getReferencedDocumentOnServer().fileID);
			}catch(Throwable t){
				ivy.log.error("File Manager error: an error occurred while creating new file version in extended versioning. "+t.getMessage(),t);
			}
		}
		
		fc.setHasChanged(true);
		if(fc.referencedDocumentOnServer!=null){
			long id = Long.parseLong(fc.getReferencedDocumentOnServer().fileID);
			DocumentOnServer doc = in.fileManagementHandler.getDocumentOnServerById(id,false);
			ivy.log.debug("doc modified cached {0} \ndoc in DB {1}",fc.referencedDocumentOnServer,doc);
			fc.getReferencedDocumentOnServer().setPath(doc.getPath());
			in.fileManagementHandler.saveDocumentOnServer(fc.getReferencedDocumentOnServer(),doc.path);
			if(in.configurationController.fileActionHistoryConfiguration.editFileTracked){
				try{
					in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(id,2,in.applicationUserName,"");
				}catch(Throwable t){
					ivy.log.error("File Manager error: an error occurred while writing file changed history. "+t.getMessage());
				}
			}
		}
	}
	else if(e.getParameter() instanceof DocumentOnServer)
	{
		DocumentOnServer doc = e.getParameter() as DocumentOnServer;
		in.fileManagementHandler.saveDocumentOnServer(doc,doc.path);
		if(in.configurationController.fileActionHistoryConfiguration.editFileTracked){
				try{
					long id = Long.parseLong(doc.fileID);
					in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(id,2,in.applicationUserName,"");
				}catch(Throwable t){
					ivy.log.error("File Manager error: an error occurred while writing file changed history. "+t.getMessage());
				}
			}
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred")+" changeModificationInformations";
	panel.fireErrorOccurred(in.errorUtil);


}' #txt
us0 f343 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileModified</name>
        <nameStyle>12,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f343 3518 118 20 20 -23 -27 #rect
us0 f343 @|RichDialogProcessStartIcon #fIcon
us0 f343 -14336|-1|-16777216 #nodeStyle
us0 f346 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f346 3515 227 26 26 14 0 #rect
us0 f346 @|RichDialogProcessEndIcon #fIcon
us0 f8 guid 11EB0CD093347480 #txt
us0 f8 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f8 method _getUploadedFileFromUploadHandler(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f8 disableUIEvents false #txt
us0 f8 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f8 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
us0 f8 outParameterDecl '<> result;
' #txt
us0 f8 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_getUploadedFileFromUploadHandler(ReturnedMessage)</name>
        <nameStyle>50,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f8 5006 118 20 20 -91 -31 #rect
us0 f8 @|RichDialogMethodStartIcon #fIcon
us0 f133 expr out #txt
us0 f133 5016 138 5016 170 #arcP
us0 f358 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f358 actionTable 'out=in;
' #txt
us0 f358 actionCode '
in.folderTree = new Tree();
in.folderTree = in.fileManagementHandler.getDirectoryTree(in.configurationController.rootPath);


' #txt
us0 f358 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f358 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f358 1742 1428 36 24 20 -2 #rect
us0 f358 @|RichDialogProcessStepIcon #fIcon
us0 f358 -613726|-613726|-16777216 #nodeStyle
us0 f142 expr in #txt
us0 f142 outCond in.returnedMessage.type==1 #txt
us0 f142 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f142 1760 1382 1760 1428 #arcP
us0 f359 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f359 1747 1483 26 26 14 0 #rect
us0 f359 @|RichDialogProcessEndIcon #fIcon
us0 f360 expr out #txt
us0 f360 1760 1452 1760 1483 #arcP
us0 f361 guid 11EB17DDCC0AC783 #txt
us0 f361 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f361 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f361 actionTable 'out=in;
out.dialogParam.clickedButton="";
out.dialogParam.outputString="";
out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/enterNewDirectoryName");
' #txt
us0 f361 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;

if(in.#selectedFolderOnServer.#name!=null){
	List<FolderOnServer> l = in.fileManagementHandler.getListDirectDirectoriesUnderPath(in.selectedFolderOnServer.path);
	in.dialogParam.stringList.clear();
	for(FolderOnServer fo:l){
		in.dialogParam.stringList.add(fo.name);
	}
}' #txt
us0 f361 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make new directory</name>
        <nameStyle>18,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f361 1470 94 20 20 -36 -30 #rect
us0 f361 @|RichDialogProcessStartIcon #fIcon
us0 f366 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f366 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>New Name not empty
and not cancel</name>
        <nameStyle>19,0,7,9
14,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f366 1466 210 28 28 20 -15 #rect
us0 f366 @|AlternativeIcon #fIcon
us0 f368 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f368 actionTable 'out=in;
' #txt
us0 f368 actionCode '
panel.makeDirectory(in.dialogParam.outputString);' #txt
us0 f368 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f368 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f368 1462 276 36 24 20 -2 #rect
us0 f368 @|RichDialogProcessStepIcon #fIcon
us0 f368 -613726|-613726|-16777216 #nodeStyle
us0 f370 expr in #txt
us0 f370 outCond 'in.dialogParam.outputString.trim().length()>0 && in.dialogParam.clickedButton.equalsIgnoreCase("OK")' #txt
us0 f370 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f370 1480 238 1480 276 #arcP
us0 f373 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f373 1467 331 26 26 14 0 #rect
us0 f373 @|RichDialogProcessEndIcon #fIcon
us0 f374 expr out #txt
us0 f374 1480 300 1480 331 #arcP
us0 f274 guid 11EB4DA0E227A107 #txt
us0 f274 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f274 method makeDirectoryWithPath(String) #txt
us0 f274 disableUIEvents false #txt
us0 f274 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String newDir> param = methodEvent.getInputArguments();
' #txt
us0 f274 inParameterMapAction 'out.stringVariable=param.newDir.trim();
' #txt
us0 f274 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f274 outParameterMapAction 'result.returnedMessage=in.returnedMessage;
' #txt
us0 f274 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>makeDirectoryWithPath(String)</name>
        <nameStyle>29,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f274 1806 1238 20 20 -57 -31 #rect
us0 f274 @|RichDialogMethodStartIcon #fIcon
us0 f275 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f275 actionTable 'out=in;
' #txt
us0 f275 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;

try{
	in.stringVariable=in.fileManagementHandler.formatPath(in.stringVariable);

	if(in.configurationController.activateSecurity){
		FolderOnServer fos = in.fileManagementHandler.getSecurityController().createDirectoryWithParentSecurity(in.fileManagementHandler.formatPathForDirectoryWithoutLastSeparator(in.selectedFolderOnServer.path)+"/"+in.stringVariable);
		if(fos!=null && fos.getId()>0){
			in.returnedMessage.type=1;
		}

	}else{
		
		if(in.stringVariable.endsWith("/") && in.stringVariable.length()>=2)
		{
			in.stringVariable=in.stringVariable.substring(0,in.stringVariable.length()-2);
		}
		if(in.stringVariable.length()>0 && in.stringVariable.lastIndexOf("/")>0)
		{
			int n = in.stringVariable.lastIndexOf("/");
			String newDir = in.stringVariable.substring(n);
			String parent = in.stringVariable.substring(0,n);
			in.returnedMessage=in.fileManagementHandler.createDirectory(parent,newDir);
		}
	}
}catch(Throwable t){
	in.returnedMessage.text=t.getMessage();
	in.returnedMessage.type= FileHandler.ERROR_MESSAGE;
}
' #txt
us0 f275 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f275 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f275 1798 1284 36 24 20 -2 #rect
us0 f275 @|RichDialogProcessStepIcon #fIcon
us0 f275 -613726|-613726|-16777216 #nodeStyle
us0 f276 expr out #txt
us0 f276 1816 1258 1816 1284 #arcP
us0 f357 expr out #txt
us0 f357 1816 1308 1766 1360 #arcP
us0 f209 guid 11EB5375A466CA8F #txt
us0 f209 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f209 method deleteDirectory(String) #txt
us0 f209 disableUIEvents false #txt
us0 f209 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String dirPath> param = methodEvent.getInputArguments();
' #txt
us0 f209 inParameterMapAction 'out.stringVariable=param.dirPath;
' #txt
us0 f209 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f209 outActionCode 'import ch.ivyteam.ivy.addons.filemanager.ReturnedMessage;
if(in.#returnedMessage!=null){
	result.returnedMessage=in.returnedMessage;
}else{
	result.returnedMessage=new ReturnedMessage();
}' #txt
us0 f209 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteDirectory(String)
return ReturnMessage object</name>
        <nameStyle>51,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f209 1830 78 20 20 16 -12 #rect
us0 f209 @|RichDialogMethodStartIcon #fIcon
us0 f210 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f210 actionTable 'out=in;
' #txt
us0 f210 actionCode '
in.returnedMessage=in.fileManagementHandler.deleteDirectory(in.stringVariable);' #txt
us0 f210 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f210 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileManagerBackEnd deleteDir</name>
        <nameStyle>28,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f210 1822 292 36 24 20 -2 #rect
us0 f210 @|RichDialogProcessStepIcon #fIcon
us0 f210 -613726|-613726|-16777216 #nodeStyle
us0 f284 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f284 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>success?</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f284 1826 338 28 28 -71 -9 #rect
us0 f284 @|AlternativeIcon #fIcon
us0 f379 expr out #txt
us0 f379 1840 316 1840 338 #arcP
us0 f380 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f380 actionTable 'out=in;
' #txt
us0 f380 actionCode 'in.selectedFolderOnServer.path=in.configurationController.rootPath;
panel.refresh();' #txt
us0 f380 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f380 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the panel</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f380 1822 396 36 24 -121 -9 #rect
us0 f380 @|RichDialogProcessStepIcon #fIcon
us0 f381 expr in #txt
us0 f381 outCond in.returnedMessage.type==1 #txt
us0 f381 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f381 1840 366 1840 396 #arcP
us0 f384 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f384 1827 435 26 26 14 0 #rect
us0 f384 @|RichDialogProcessEndIcon #fIcon
us0 f385 expr out #txt
us0 f385 1840 420 1840 435 #arcP
us0 f385 0 0.23743997212000584 0 0 #arcLabel
us0 f387 guid 11EB53CBAE7DBC6A #txt
us0 f387 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f387 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f387 actionTable 'out=in;
' #txt
us0 f387 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete directory</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f387 1830 526 20 20 -34 -30 #rect
us0 f387 @|RichDialogProcessStartIcon #fIcon
us0 f395 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f395 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f395 1826 866 28 28 14 0 #rect
us0 f395 @|AlternativeIcon #fIcon
us0 f397 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f397 actionTable 'out=in;
' #txt
us0 f397 actionCode panel.deleteDirectory(in.selectedFolderOnServer.path); #txt
us0 f397 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f397 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>call the deleteDirectory method</name>
        <nameStyle>31,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f397 1822 916 36 24 20 -2 #rect
us0 f397 @|RichDialogProcessStepIcon #fIcon
us0 f398 expr in #txt
us0 f398 outCond in.dialogParam.clickedButton.trim().equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f398 1840 894 1840 916 #arcP
us0 f399 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f399 1827 971 26 26 14 0 #rect
us0 f399 @|RichDialogProcessEndIcon #fIcon
us0 f400 expr out #txt
us0 f400 1840 940 1840 971 #arcP
us0 f411 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f411 actionTable 'out=in;
' #txt
us0 f411 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
if(FileHandler.formatPathWithEndSeparator(in.stringVariable).equals(
FileHandler.formatPathWithEndSeparator(in.configurationController.rootPath))){
	in.responseBoolean=false;
}else{
	in.responseBoolean=true;
	}' #txt
us0 f411 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f411 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if try to delete root path</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f411 1822 116 36 24 20 -2 #rect
us0 f411 @|RichDialogProcessStepIcon #fIcon
us0 f413 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f413 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f413 1826 162 28 28 14 0 #rect
us0 f413 @|AlternativeIcon #fIcon
us0 f414 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f414 1987 163 26 26 14 0 #rect
us0 f414 @|RichDialogProcessEndIcon #fIcon
us0 f415 expr out #txt
us0 f415 1840 140 1840 162 #arcP
us0 f418 expr out #txt
us0 f418 1840 98 1840 116 #arcP
us0 f403 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f403 actionTable 'out=in;
' #txt
us0 f403 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
if(FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path).equals(
FileHandler.formatPathWithEndSeparator(in.configurationController.rootPath))){
	in.responseBoolean=false;
}else{
	in.responseBoolean=true;
	}' #txt
us0 f403 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f403 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if try to delete root path</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f403 1822 572 36 24 25 -6 #rect
us0 f403 @|RichDialogProcessStepIcon #fIcon
us0 f404 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f404 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f404 1826 618 28 28 14 0 #rect
us0 f404 @|AlternativeIcon #fIcon
us0 f406 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f406 1979 619 26 26 14 0 #rect
us0 f406 @|RichDialogProcessEndIcon #fIcon
us0 f407 expr out #txt
us0 f407 1840 596 1840 618 #arcP
us0 f410 expr out #txt
us0 f410 1840 546 1840 572 #arcP
us0 f410 0 0.6202216473491985 0 0 #arcLabel
us0 f416 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f416 actionTable 'out=in;
' #txt
us0 f416 actionCode 'in.returnedMessage.text="It is unpossible to delete the root directory of your working path";
in.returnedMessage.type=2;
in.returnedMessage.file=null;' #txt
us0 f416 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f416 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f416 1886 164 36 24 20 -2 #rect
us0 f416 @|RichDialogProcessStepIcon #fIcon
us0 f417 expr in #txt
us0 f417 1854 176 1886 176 #arcP
us0 f412 expr out #txt
us0 f412 1922 176 1987 176 #arcP
us0 f419 guid 11EB58926D29F7A5 #txt
us0 f419 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f419 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f419 actionTable 'out=in;
' #txt
us0 f419 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

List<java.io.File> files = new List<java.io.File>();

List<DocumentOnServer> docs = new List<DocumentOnServer>();
try{
	docs = in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,false);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred")+"\n"+t.getMessage();
	panel.fireErrorOccurred(in.errorUtil);
}

for(DocumentOnServer doc:docs){
	try{
		DocumentOnServer doc1 = in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
		if(doc1.getJavaFile().isFile()){
			files.add(doc1.getJavaFile());
		}
	}catch(Throwable t){
		
	}
}
if(!files.isEmpty()){
	in.downloadHandler.downloadFiles(files);
	/*if(files.size()<2){
			in.downloadHandler.download(files.get(0).getName(), files.get(0).getPath());
	}else{
			in.downloadHandler.downloadFiles(files);
	}*/
}
	
else{
	in.returnedMessage.text=ivy.cms.co("/ch/xpertline/common/ria/component/fileManagement/messages/information/selectedDirectoryEmpty");
	in.returnedMessage.type=FileHandler.INFORMATION_MESSAGE;
}' #txt
us0 f419 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>download content of directory</name>
        <nameStyle>29,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f419 1262 854 20 20 -54 -28 #rect
us0 f419 @|RichDialogProcessStartIcon #fIcon
us0 f419 -613726|-613726|-16777216 #nodeStyle
us0 f420 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f420 1259 907 26 26 14 0 #rect
us0 f420 @|RichDialogProcessEndIcon #fIcon
us0 f421 expr out #txt
us0 f421 1272 874 1272 907 #arcP
us0 f422 guid 11EB9F1B8465A0BD #txt
us0 f422 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f422 method _moveFile(String,java.util.ArrayList) #txt
us0 f422 disableUIEvents false #txt
us0 f422 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String newPath,java.util.ArrayList documentOnServer> param = methodEvent.getInputArguments();
' #txt
us0 f422 inParameterMapAction 'out.DnDDestinationPath=param.newPath;
out.fileUploadInProgress=true;
' #txt
us0 f422 inActionCode 'out.filesToMove.clear();
for(Object o: param.documentOnServer){
	if(o instanceof ch.ivyteam.ivy.addons.filemanager.DocumentOnServer){
		out.filesToMove.add(o as ch.ivyteam.ivy.addons.filemanager.DocumentOnServer);
	}
}

' #txt
us0 f422 outParameterDecl '<> result;
' #txt
us0 f422 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_moveFile(String,List&lt;DocumentOnServer&gt;)</name>
        <nameStyle>40,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f422 5558 102 20 20 -82 -30 #rect
us0 f422 @|RichDialogMethodStartIcon #fIcon
us0 f423 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f423 actionTable 'out=in;
' #txt
us0 f423 actionCode 'import ch.ivyteam.ivy.addons.filemanager.document.DocumentMoveChecker;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

ivy.log.debug("Files to move: {0}",in.filesToMove);
in.DnDDestinationPath=in.DnDDestinationPath.replaceAll("\\\\","/");
in.dialogParam.outputBoolean=true;
in.consistancyOK=true;
in.filesUnpossibleToMove.clear();

try{
	in.filesUnpossibleToMove = DocumentMoveChecker.getFilesThatCannotBeMoved(in.filesToMove,in.DnDDestinationPath,in.fileManagementHandler);
	in.filesToMove.removeAll(in.filesUnpossibleToMove);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}


' #txt
us0 f423 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f423 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Diverses checks (File to be moved is locked, 
potential File to overwritte is locked in destination folder)</name>
        <nameStyle>107,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f423 5551 148 34 24 23 -17 #rect
us0 f423 @|RichDialogProcessStepIcon #fIcon
us0 f424 expr out #txt
us0 f424 5568 122 5568 148 #arcP
us0 f425 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f425 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>for each file
to be moved</name>
        <nameStyle>25
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f425 5554 346 28 28 14 0 #rect
us0 f425 @|AlternativeIcon #fIcon
us0 f429 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f429 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f429 5810 418 28 28 14 0 #rect
us0 f429 @|AlternativeIcon #fIcon
us0 f437 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f437 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check
response</name>
        <nameStyle>14,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f437 5954 562 28 28 6 -42 #rect
us0 f437 @|AlternativeIcon #fIcon
us0 f439 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f439 actionTable 'out=in;
' #txt
us0 f439 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.selectedDocument=in.filesToMove.get(0);
/*
in.returnedMessage=FileHandler.moveFile(
	in.fileToMove,
	in.DnDDestinationPath,
	false);
*/
in.returnedMessage=in.fileManagementHandler.moveDocumentOnServer(in.selectedDocument,in.DnDDestinationPath);' #txt
us0 f439 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f439 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>move file </name>
        <nameStyle>10,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f439 5742 420 36 24 -3 15 #rect
us0 f439 @|RichDialogProcessStepIcon #fIcon
us0 f439 -613726|-613726|-16777216 #nodeStyle
us0 f442 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f442 actionTable 'out=in;
' #txt
us0 f442 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
for(DocumentOnServer doc : in.filesToMove){
	if(in.fileManagementHandler.documentOnServerExists(doc,in.DnDDestinationPath))
	{
		DocumentOnServer doc1 = new DocumentOnServer();
		doc1.setFilename(doc.getFilename());
		doc1.setPath(in.DnDDestinationPath+doc.getFilename());
		in.fileManagementHandler.deleteDocumentOnServer(doc1);

	}
	
}
in.responseBoolean=false;
' #txt
us0 f442 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f442 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Overwrite all</name>
        <nameStyle>13,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f442 6054 564 36 24 -32 16 #rect
us0 f442 @|RichDialogProcessStepIcon #fIcon
us0 f443 expr in #txt
us0 f443 outCond in.dialogParam.clickedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwriteAll")) #txt
us0 f443 5982 576 6054 576 #arcP
us0 f445 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f445 actionTable 'out=in;
' #txt
us0 f445 actionCode in.filesToMove.removeAt(0); #txt
us0 f445 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f445 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>remove the last
doc from the list</name>
        <nameStyle>33,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f445 5606 588 36 24 -67 9 #rect
us0 f445 @|RichDialogProcessStepIcon #fIcon
us0 f446 expr in #txt
us0 f446 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>skip</name>
        <nameStyle>4,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f446 5968 590 5642 600 #arcP
us0 f446 1 5968 632 #addKink
us0 f446 2 5700 632 #addKink
us0 f446 0 0.40476190476190477 1 0 #arcLabel
us0 f449 expr out #txt
us0 f449 5606 600 5568 374 #arcP
us0 f449 1 5568 600 #addKink
us0 f449 1 0.2762988154698122 0 0 #arcLabel
us0 f450 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f450 actionTable 'out=in;
' #txt
us0 f450 actionCode in.consistancyOK=false; #txt
us0 f450 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f450 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set consistancy
to false</name>
        <nameStyle>24,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f450 5670 492 36 24 -30 9 #rect
us0 f450 @|RichDialogProcessStepIcon #fIcon
us0 f447 expr out #txt
us0 f447 5688 516 5642 600 #arcP
us0 f447 1 5688 600 #addKink
us0 f447 1 0.26363684719831004 0 0 #arcLabel
us0 f452 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f452 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>success ?
(= consistancy is true)</name>
        <nameStyle>33,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f452 5474 346 28 28 -72 -45 #rect
us0 f452 @|AlternativeIcon #fIcon
us0 f453 expr in #txt
us0 f453 5554 360 5502 360 #arcP
us0 f453 0 0.7576692504412407 0 0 #arcLabel
us0 f458 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f458 5475 587 26 26 14 0 #rect
us0 f458 @|RichDialogProcessEndIcon #fIcon
us0 f461 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f461 actionTable 'out=in;
' #txt
us0 f461 actionCode 'in.fileUploadInProgress=false;

panel.refresh();' #txt
us0 f461 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f461 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh
All</name>
        <nameStyle>11,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f461 5470 524 36 24 22 -15 #rect
us0 f461 @|RichDialogProcessStepIcon #fIcon
us0 f460 expr out #txt
us0 f460 5488 548 5488 587 #arcP
us0 f460 0 0.44427157237405074 0 0 #arcLabel
us0 f467 guid 11EBB991F2E68963 #txt
us0 f467 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f467 method startWithServerPathAndIsRecursiveAndShowTree(String,Boolean,Boolean) #txt
us0 f467 disableUIEvents false #txt
us0 f467 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.Boolean isRecursive,java.lang.Boolean showTree> param = methodEvent.getInputArguments();
' #txt
us0 f467 inParameterMapAction 'out.configurationController.diplayFilesRecursively=param.isRecursive;
out.configurationController.folderTreeVisible=param.showTree;
out.configurationController.rootPath=param.serverPath;
' #txt
us0 f467 outParameterDecl '<> result;
' #txt
us0 f467 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f467 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndIsRecursivetAndShowTree(String,Boolean,Boolean)</name>
        <nameStyle>69,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f467 446 254 20 20 13 0 #rect
us0 f467 @|RichDialogInitStartIcon #fIcon
us0 f175 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f175 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f175 5554 282 28 28 14 0 #rect
us0 f175 @|AlternativeIcon #fIcon
us0 f426 expr in #txt
us0 f426 outCond in.filesToMove.size()>0 #txt
us0 f426 5568 310 5568 346 #arcP
us0 f492 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f492 5755 283 26 26 14 0 #rect
us0 f492 @|RichDialogProcessEndIcon #fIcon
us0 f178 guid 11ED3C35BD2F9DBA #txt
us0 f178 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f178 method getIsRecursive() #txt
us0 f178 disableUIEvents false #txt
us0 f178 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f178 outParameterDecl '<java.lang.Boolean isRecursive> result;
' #txt
us0 f178 outParameterMapAction 'result.isRecursive=in.configurationController.diplayFilesRecursively;
' #txt
us0 f178 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getIsRecursive()</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f178 1318 1214 20 20 -33 -34 #rect
us0 f178 @|RichDialogMethodStartIcon #fIcon
us0 f469 guid 11ED3C3707049453 #txt
us0 f469 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f469 method setIsRecursive(Boolean) #txt
us0 f469 disableUIEvents false #txt
us0 f469 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean isRecursive> param = methodEvent.getInputArguments();
' #txt
us0 f469 inParameterMapAction 'out.configurationController.diplayFilesRecursively=param.isRecursive;
' #txt
us0 f469 outParameterDecl '<> result;
' #txt
us0 f469 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setIsRecursive(Boolean)</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f469 1317 1061 23 22 -41 -33 #rect
us0 f469 @|RichDialogMethodStartIcon #fIcon
us0 f470 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f470 1315 1251 26 26 14 0 #rect
us0 f470 @|RichDialogProcessEndIcon #fIcon
us0 f471 expr out #txt
us0 f471 1328 1234 1328 1251 #arcP
us0 f473 guid 11ED3CBB378B6FDB #txt
us0 f473 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f473 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f473 actionTable 'out=in;
' #txt
us0 f473 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>toogle recursive</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f473 1222 1054 20 20 -31 -26 #rect
us0 f473 @|RichDialogProcessStartIcon #fIcon
us0 f474 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f474 1219 1203 26 26 14 0 #rect
us0 f474 @|RichDialogProcessEndIcon #fIcon
us0 f388 guid 11ED3F3051528067 #txt
us0 f388 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f388 method getAdvancedActionsEnable() #txt
us0 f388 disableUIEvents false #txt
us0 f388 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f388 outParameterDecl '<java.lang.Boolean enabled> result;
' #txt
us0 f388 outParameterMapAction 'result.enabled=in.configurationController.advancedActionsEnabled;
' #txt
us0 f388 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getAdvancedActionsEnable()</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f388 2502 1918 20 20 -55 -32 #rect
us0 f388 @|RichDialogMethodStartIcon #fIcon
us0 f389 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f389 2499 1963 26 26 14 0 #rect
us0 f389 @|RichDialogProcessEndIcon #fIcon
us0 f390 expr out #txt
us0 f390 2512 1938 2512 1963 #arcP
us0 f391 guid 11ED3F34F1D69059 #txt
us0 f391 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f391 method setAdvancedActionsEnable(Boolean) #txt
us0 f391 disableUIEvents false #txt
us0 f391 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean enable> param = methodEvent.getInputArguments();
' #txt
us0 f391 inActionCode out.configurationController.advancedActionsEnabled=param.enable; #txt
us0 f391 outParameterDecl '<> result;
' #txt
us0 f391 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setAdvancedActionsEnable
(Boolean)</name>
        <nameStyle>34,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f391 2366 1918 20 20 -39 -40 #rect
us0 f391 @|RichDialogMethodStartIcon #fIcon
us0 f392 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f392 2363 1963 26 26 14 0 #rect
us0 f392 @|RichDialogProcessEndIcon #fIcon
us0 f476 expr out #txt
us0 f476 2376 1938 2376 1963 #arcP
us0 f503 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f503 actionTable 'out=in;
' #txt
us0 f503 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;

try{
	if(panel.ordnersTree.selectedTreeNode.value instanceof FolderOnServer){
		FolderOnServer FOS = panel.ordnersTree.selectedTreeNode.value as FolderOnServer;
		in.selectedFolderOnServer.name=FOS.name;
		in.selectedFolderOnServer.path=FOS.path;
	}else {
		in.selectedFolderOnServer.path=in.configurationController.rootPath;
	}
	in.uploadHandler.setServerPath(in.selectedFolderOnServer.path);
	
	in.documentsInDb = new List<DocumentOnServer>();
	in.documentsInDb=in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,in.configurationController.diplayFilesRecursively);
	
	in.uploadHandler.uploadPreparedUpload(in.fileUpload);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f503 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f503 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the files in selected folder
and upload the file</name>
        <nameStyle>52,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f503 5182 1092 36 24 25 -12 #rect
us0 f503 @|RichDialogProcessStepIcon #fIcon
us0 f223 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f223 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>All the choosed 
files were moved</name>
        <nameStyle>33,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f223 5330 410 28 28 -82 -56 #rect
us0 f223 @|AlternativeIcon #fIcon
us0 f224 expr in #txt
us0 f224 outCond in.consistancyOK #txt
us0 f224 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f224 5474 360 5344 410 #arcP
us0 f224 1 5344 360 #addKink
us0 f224 0 0.6846153846153846 0 -1 #arcLabel
us0 f456 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f456 actionTable 'out=in;
' #txt
us0 f456 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocument=in.filesToMove.get(0);
DocumentOnServer doc = new DocumentOnServer();
doc.setFilename(in.selectedDocument.getFilename());
doc.setPath(in.DnDDestinationPath+in.selectedDocument.getFilename());
in.fileManagementHandler.deleteDocumentOnServer(doc);
' #txt
us0 f456 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f456 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete the overwriten file</name>
        <nameStyle>26,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f456 5822 564 36 24 -61 17 #rect
us0 f456 @|RichDialogProcessStepIcon #fIcon
us0 f459 expr in #txt
us0 f459 outCond in.dialogParam.clickedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite")) #txt
us0 f459 5954 576 5858 576 #arcP
us0 f459 0 0.5190620903112219 0 0 #arcLabel
us0 f440 expr out #txt
us0 f440 5822 576 5760 444 #arcP
us0 f440 1 5760 576 #addKink
us0 f440 0 0.7621718788904441 0 0 #arcLabel
us0 f494 guid 11ED8D735F06B96F #txt
us0 f494 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f494 method deleteFiles(List<java.io.File>) #txt
us0 f494 disableUIEvents false #txt
us0 f494 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> filesList> param = methodEvent.getInputArguments();
' #txt
us0 f494 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

int i = out.fileManagementHandler.deleteFiles(param.filesList);


' #txt
us0 f494 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f494 outParameterMapAction 'result.returnedMessage=in.returnedMessage;
' #txt
us0 f494 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteFiles(List&lt;File&gt;)</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f494 3798 118 20 20 -46 -31 #rect
us0 f494 @|RichDialogMethodStartIcon #fIcon
us0 f494 -14336|-1|-16777216 #nodeStyle
us0 f513 guid 11ED95C2B7BDD5B8 #txt
us0 f513 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f513 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f513 actionTable 'out=in;
' #txt
us0 f513 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>copy Files</name>
        <nameStyle>10,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f513 2574 814 20 20 -23 -30 #rect
us0 f513 @|RichDialogProcessStartIcon #fIcon
us0 f514 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f514 2571 947 26 26 14 0 #rect
us0 f514 @|RichDialogProcessEndIcon #fIcon
us0 f516 guid 11ED95E211BB06C2 #txt
us0 f516 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f516 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f516 actionTable 'out=in;
' #txt
us0 f516 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.responseBoolean=true;
if(in.#selectedFolderOnServer == null || in.selectedFolderOnServer.path.trim().equals("")){
	in.copyOn=false;
}
if(in.copiedDocuments.size()<=0){
	in.copyOn=false;
}
' #txt
us0 f516 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Paste</name>
        <nameStyle>5,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f516 2918 822 20 20 -12 -30 #rect
us0 f516 @|RichDialogProcessStartIcon #fIcon
us0 f519 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f519 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Copy On ?</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f519 2914 946 28 28 14 0 #rect
us0 f519 @|AlternativeIcon #fIcon
us0 f523 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f523 2851 947 26 26 14 0 #rect
us0 f523 @|RichDialogProcessEndIcon #fIcon
us0 f524 expr in #txt
us0 f524 2914 960 2877 960 #arcP
us0 f508 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f508 3795 211 26 26 14 0 #rect
us0 f508 @|RichDialogProcessEndIcon #fIcon
us0 f579 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f579 actionTable 'out=in;
' #txt
us0 f579 actionCode 'in.fileUploadInProgress=false;

try{
	List<String> l = [ivy.case.getApplication().getName(), in.panelId.toString(), in.selectedFolderOnServer.path];
	panel.fireSE_FilesDeleted(l);

}catch(Throwable t){
	// do nothing
	ivy.log.error(t.getMessage());
}

panel.refreshActualSelectedFolder();' #txt
us0 f579 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f579 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the selected directory</name>
        <nameStyle>30,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f579 5326 588 36 24 -138 16 #rect
us0 f579 @|RichDialogProcessStepIcon #fIcon
us0 f454 expr in #txt
us0 f454 outCond in.filesUnpossibleToMove.size()==0 #txt
us0 f454 5330 424 5326 600 #arcP
us0 f454 1 5266 424 #addKink
us0 f454 2 5266 600 #addKink
us0 f454 1 0.40264264247267284 0 0 #arcLabel
us0 f584 guid 11EDF26AA8C360DC #txt
us0 f584 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f584 method refreshActualSelectedFolder() #txt
us0 f584 disableUIEvents false #txt
us0 f584 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f584 inActionCode out.eventSource=null; #txt
us0 f584 outParameterDecl '<> result;
' #txt
us0 f584 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshActualSelectedFolder()</name>
        <nameStyle>29,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f584 1206 94 20 20 15 -10 #rect
us0 f584 @|RichDialogMethodStartIcon #fIcon
us0 f472 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f472 actionTable 'out=in;
' #txt
us0 f472 actionCode 'import com.ulcjava.base.application.ULCListSelectionModel;


panel.refreshActualSelectedFolder();
panel.filesTable.setSelectionMode(
	(in.configurationController.isActivateSecurity()&&in.configurationController.diplayFilesRecursively)?
	ULCListSelectionModel.SINGLE_SELECTION:ULCListSelectionModel.MULTIPLE_INTERVAL_SELECTION
);' #txt
us0 f472 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f472 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh selected folder</name>
        <nameStyle>23,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f472 1310 1108 36 24 20 1 #rect
us0 f472 @|RichDialogProcessStepIcon #fIcon
us0 f588 guid 11EF7ED5CEAD6145 #txt
us0 f588 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f588 method getDocumentsListInPath(String) #txt
us0 f588 disableUIEvents false #txt
us0 f588 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path> param = methodEvent.getInputArguments();
' #txt
us0 f588 inParameterMapAction 'out.stringVariable=param.path;
' #txt
us0 f588 outParameterDecl '<List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> documentsList> result;
' #txt
us0 f588 outActionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.stringVariable=FileHandler.formatPathWithEndSeparator(in.stringVariable,false);
result.documentsList= in.fileManagementHandler.getDocumentsInPath(in.stringVariable,false);

' #txt
us0 f588 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getDocumentsListInPath(String)</name>
        <nameStyle>30,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f588 3798 286 20 20 -63 -33 #rect
us0 f588 @|RichDialogMethodStartIcon #fIcon
us0 f592 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f592 3795 339 26 26 14 0 #rect
us0 f592 @|RichDialogProcessEndIcon #fIcon
us0 f14 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f14 3467 555 26 26 14 0 #rect
us0 f14 @|RichDialogProcessEndIcon #fIcon
us0 f62 expr out #txt
us0 f62 3480 530 3480 555 #arcP
us0 f63 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f63 2355 1475 26 26 14 0 #rect
us0 f63 @|RichDialogProcessEndIcon #fIcon
us0 f65 expr out #txt
us0 f65 3808 306 3808 339 #arcP
us0 f66 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f66 actionTable 'out=in;
' #txt
us0 f66 actionCode 'panel.refreshActualSelectedFolder();

try{
	List<String> l = [ivy.case.getApplication().getName(), in.panelId.toString(), in.selectedFolderOnServer.path];
	panel.fireSE_FilesDeleted(l);
}catch(Throwable t){
	// do nothing
}
' #txt
us0 f66 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f66 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f66 3790 164 36 24 20 -2 #rect
us0 f66 @|RichDialogProcessStepIcon #fIcon
us0 f66 -613726|-613726|-16777216 #nodeStyle
us0 f67 expr out #txt
us0 f67 3808 138 3808 164 #arcP
us0 f68 expr out #txt
us0 f68 3808 188 3808 211 #arcP
us0 f32 expr out #txt
us0 f32 5016 268 5016 308 #arcP
us0 f69 expr out #txt
us0 f69 5200 1060 5200 1092 #arcP
us0 f70 expr out #txt
us0 f70 5200 1116 5200 1155 #arcP
us0 f79 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f79 actionTable 'out=in;
' #txt
us0 f79 actionCode 'try{
	in.responseBoolean=in.fileManagementHandler.isFileLocked(new java.io.File(in.stringVariable));
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f79 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f79 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f79 2790 1804 36 24 20 -2 #rect
us0 f79 @|RichDialogProcessStepIcon #fIcon
us0 f82 expr out #txt
us0 f82 2808 1786 2808 1804 #arcP
us0 f84 expr out #txt
us0 f84 2808 1828 2808 1859 #arcP
us0 f90 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f90 actionTable 'out=in;
' #txt
us0 f90 actionCode 'try{
	in.responseBoolean=in.fileManagementHandler.isDocumentOnServerLocked(in.selectedDocument);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f90 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f90 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f90 2894 1812 36 24 20 -2 #rect
us0 f90 @|RichDialogProcessStepIcon #fIcon
us0 f97 expr out #txt
us0 f97 2912 1794 2912 1812 #arcP
us0 f98 expr out #txt
us0 f98 2912 1836 2912 1867 #arcP
us0 f40 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f40 2483 683 26 26 14 0 #rect
us0 f40 @|RichDialogProcessEndIcon #fIcon
us0 f52 guid 11F5FC089E86DEF1 #txt
us0 f52 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f52 method startWithServerPathAndFileManagementHandler(String,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler) #txt
us0 f52 disableUIEvents false #txt
us0 f52 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler> param = methodEvent.getInputArguments();
' #txt
us0 f52 inParameterMapAction 'out.configurationController.rootPath=param.serverPath;
out.fileManagementHandler=param.fileManagementHandler;
' #txt
us0 f52 outParameterDecl '<> result;
' #txt
us0 f52 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f52 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndFileManagementHandler(String,AbstractFileManagementHandler)</name>
        <nameStyle>81,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f52 446 158 20 20 13 0 #rect
us0 f52 @|RichDialogInitStartIcon #fIcon
us0 f99 guid 11F5FC117241ED1E #txt
us0 f99 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f99 method startWithServerPathAndFileManagementHandlerAndIsRecursiveAndShowTree(String,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler,Boolean,Boolean) #txt
us0 f99 disableUIEvents false #txt
us0 f99 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler,java.lang.Boolean isRecursive,java.lang.Boolean showTree> param = methodEvent.getInputArguments();
' #txt
us0 f99 inParameterMapAction 'out.configurationController.advancedActionsEnabled=true;
out.configurationController.folderTreeVisible=param.showTree;
out.configurationController.rootPath=param.serverPath;
out.fileManagementHandler=param.fileManagementHandler;
' #txt
us0 f99 outParameterDecl '<> result;
' #txt
us0 f99 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f99 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPath
AndFileManagementHandler
AndIsRecursive
AndShowTree(String,AbstractFileManagementHandler,Boolean,ApplicationContext,Boolean)</name>
        <nameStyle>144,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f99 446 86 20 20 18 -24 #rect
us0 f99 @|RichDialogInitStartIcon #fIcon
us0 f117 guid 11F5FC4BC829D19A #txt
us0 f117 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f117 method getFileManagementHandler() #txt
us0 f117 disableUIEvents false #txt
us0 f117 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f117 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler> result;
' #txt
us0 f117 outActionCode 'import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
import ch.ivyteam.ivy.addons.filemanager.database.FileManagementIvySystemDBHandler;
import ch.ivyteam.ivy.addons.filemanager.database.FileManagementDBHandlerUniversal;
import ch.ivyteam.ivy.addons.filemanager.database.FileStoreDBHandler;

ivy.log.info(in.fileManagementHandler.getClass());
if(in.fileManagementHandler instanceof FileManagementIvySystemDBHandler)
{
	result.fileManagementHandler = in.fileManagementHandler as FileManagementIvySystemDBHandler;
}else if(in.fileManagementHandler instanceof FileManagementDBHandlerUniversal)
{
	result.fileManagementHandler = in.fileManagementHandler as FileManagementDBHandlerUniversal;
}else if(in.fileManagementHandler instanceof FileStoreDBHandler)
{
	result.fileManagementHandler = in.fileManagementHandler as FileStoreDBHandler;
}else{
	Class c = in.fileManagementHandler.getClass();
	result.fileManagementHandler = in.fileManagementHandler as AbstractFileManagementHandler;
}' #txt
us0 f117 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getFileManagementHandler()</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f117 3598 654 20 20 -58 -32 #rect
us0 f117 @|RichDialogMethodStartIcon #fIcon
us0 f118 guid 11F5FC4C96385706 #txt
us0 f118 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f118 method setFileManagementHandler(ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler) #txt
us0 f118 disableUIEvents false #txt
us0 f118 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler> param = methodEvent.getInputArguments();
' #txt
us0 f118 inParameterMapAction 'out.fileManagementHandler=param.fileManagementHandler;
' #txt
us0 f118 outParameterDecl '<> result;
' #txt
us0 f118 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setFileManagementHandler(AbstractFileManagementHandler)</name>
        <nameStyle>55,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f118 3782 654 20 20 -86 -32 #rect
us0 f118 @|RichDialogMethodStartIcon #fIcon
us0 f119 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f119 3683 699 26 26 14 0 #rect
us0 f119 @|RichDialogProcessEndIcon #fIcon
us0 f120 expr out #txt
us0 f120 3616 668 3684 705 #arcP
us0 f148 expr out #txt
us0 f148 3783 668 3707 706 #arcP
us0 f169 guid 11F7F17163AD1939 #txt
us0 f169 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f169 method addFiles(List<java.io.File>) #txt
us0 f169 disableUIEvents false #txt
us0 f169 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> listOfFiles> param = methodEvent.getInputArguments();
' #txt
us0 f169 inParameterMapAction 'out.tmpListOfFiles=param.listOfFiles;
' #txt
us0 f169 outParameterDecl '<> result;
' #txt
us0 f169 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addFiles(List&lt;File&gt;)</name>
        <nameStyle>20,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f169 3694 1310 20 20 -40 -29 #rect
us0 f169 @|RichDialogMethodStartIcon #fIcon
us0 f170 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f170 actionTable 'out=in;
' #txt
us0 f170 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
try{
	if(in.applicationUserName.trim().equalsIgnoreCase("")){
		in.applicationUserName = ivy.session.getSessionUserName();
	}
}catch(Throwable t){
	ivy.log.error(t.getMessage(),t);
}
in.today =  new Date().format("dd.MM.yyyy");
String time= new Time().format("HH:mm:ss");
in.filesToAdd.clear();
for(java.io.File f: in.tmpListOfFiles){
	DocumentOnServer doc = new DocumentOnServer();
	doc.filename=f.getName();
	doc.path=FileHandler.formatPath(f.getPath());
	doc.fileSize=FileHandler.getFileSize(f);
	doc.creationDate=in.today;
	doc.creationTime = time;
	doc.userID=in.applicationUserName;
	doc.modificationDate=in.today;
	doc.modificationTime= time;
	doc.locked="0";
	doc.modificationUserID=in.applicationUserName;
	doc.description="";
	doc.javaFile =f;
	in.filesToAdd.add(doc);
	
}
if(in.filesToAdd.size()>0){
	try{
		in.fileManagementHandler.insertDocuments(in.filesToAdd);
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
	panel.refreshActualSelectedFolder();
}
' #txt
us0 f170 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f170 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Transform Files 
into DocumentOnServer
add them to the file DB
Refresh the Table</name>
        <nameStyle>80,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f170 3686 1372 36 24 20 -25 #rect
us0 f170 @|RichDialogProcessStepIcon #fIcon
us0 f170 -613726|-613726|-16777216 #nodeStyle
us0 f171 expr out #txt
us0 f171 3704 1330 3704 1372 #arcP
us0 f173 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f173 3691 1507 26 26 14 0 #rect
us0 f173 @|RichDialogProcessEndIcon #fIcon
us0 f172 guid 11F87F43B461C9F4 #txt
us0 f172 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f172 method selectFolderOnServer(String) #txt
us0 f172 disableUIEvents false #txt
us0 f172 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path> param = methodEvent.getInputArguments();
' #txt
us0 f172 inParameterMapAction 'out.stringVariable=param.path;
' #txt
us0 f172 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.FolderOnServer selectedFolderOnServer> result;
' #txt
us0 f172 outParameterMapAction 'result.selectedFolderOnServer=in.selectedFolderOnServer;
' #txt
us0 f172 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selectFolderOnServer(String)</name>
        <nameStyle>28,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f172 1942 1190 20 20 -59 -30 #rect
us0 f172 @|RichDialogMethodStartIcon #fIcon
us0 f192 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f192 actionTable 'out=in;
' #txt
us0 f192 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
import com.ulcjava.base.application.tree.TreePath;

try{
	String path = AbstractFileManagementHandler.formatPathForDirectoryWithoutLastSeparator(in.stringVariable);
	Tree t = panel.ordnersTree.getTreeData();
	Tree r = t.getRoot();
	boolean found = false;
	if(r!=null && r.getValue() instanceof FolderOnServer)
	{//check if the root is not the directory to select
		FolderOnServer fos = r.getValue() as FolderOnServer;
		if(fos.path.equals(path)){
			found=true;
			panel.ordnersTree.setSelectedTreeNode(r);
			panel.ordnersTree.scrollToVisible();
		}
	}
	if(!found)
	{//the directory to select was not the root one, so we have to seek it into the child nodes
		List<Tree> children = t.getAllDeepChildren();
		for(Tree ct : children)
		{
			if(ct.getValue()!=null && ct.getValue() instanceof FolderOnServer){
				FolderOnServer fos = ct.getValue() as FolderOnServer;
	
				if(fos.path.equals(path))
				{
					panel.ordnersTree.setSelectedTreeNode(ct);
					panel.ordnersTree.scrollToVisible();
					break;
				}
			}
		}
	}
}catch(Throwable t){
	ivy.log.error("Error occurred in the selectFolderOnServer FileManager method",t);
}

' #txt
us0 f192 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f192 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f192 1934 1228 36 24 20 -2 #rect
us0 f192 @|RichDialogProcessStepIcon #fIcon
us0 f194 expr out #txt
us0 f194 1952 1210 1952 1228 #arcP
us0 f195 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f195 1939 1291 26 26 14 0 #rect
us0 f195 @|RichDialogProcessEndIcon #fIcon
us0 f196 expr out #txt
us0 f196 1952 1252 1952 1291 #arcP
us0 f218 guid 120618E9BF5E4644 #txt
us0 f218 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f218 method editFile(java.io.File) #txt
us0 f218 disableUIEvents false #txt
us0 f218 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File fileToEdit> param = methodEvent.getInputArguments();
' #txt
us0 f218 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
out.docToEdit=new DocumentOnServer();
if(param.fileToEdit!=null){
	out.docToEdit.filename=param.fileToEdit.getName();
	out.docToEdit.path=param.fileToEdit.getPath();
	
}' #txt
us0 f218 outParameterDecl '<> result;
' #txt
us0 f218 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editFile(File)</name>
        <nameStyle>14,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f218 3374 118 20 20 -34 -29 #rect
us0 f218 @|RichDialogMethodStartIcon #fIcon
us0 f220 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f220 actionTable 'out=in;
' #txt
us0 f220 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
try{
	in.responseBoolean=in.fileManagementHandler.lockDocument(in.docToEdit,in.applicationUserName);
	if(in.#docToEdit.#javaFile== null || !in.docToEdit.javaFile.isFile()){
		in.docToEdit = in.fileManagementHandler.getDocumentOnServerWithJavaFile(in.docToEdit);
	}
	if(in.responseBoolean){	
		panel.desktopHandlerPanel.openFileAndCheckForChanges(in.docToEdit.getJavaFile());
	}else{
		panel.desktopHandlerPanel.openFile(in.docToEdit.getJavaFile());
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
panel.refreshActualSelectedFolder();' #txt
us0 f220 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f220 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f220 3366 164 36 24 20 -2 #rect
us0 f220 @|RichDialogProcessStepIcon #fIcon
us0 f220 -613726|-613726|-16777216 #nodeStyle
us0 f294 expr out #txt
us0 f294 3384 138 3384 164 #arcP
us0 f294 0 0.2947530688525722 0 0 #arcLabel
us0 f295 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f295 3371 211 26 26 14 0 #rect
us0 f295 @|RichDialogProcessEndIcon #fIcon
us0 f296 expr out #txt
us0 f296 3384 188 3384 211 #arcP
us0 f296 0 0.5540388867410073 0 0 #arcLabel
us0 f219 guid 1206627B6174D5EB #txt
us0 f219 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f219 method setToolBarVisible(Boolean) #txt
us0 f219 disableUIEvents false #txt
us0 f219 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean toolbarVisible> param = methodEvent.getInputArguments();
' #txt
us0 f219 inParameterMapAction 'out.configurationController.toolBarVisible=param.toolbarVisible;
' #txt
us0 f219 outParameterDecl '<> result;
' #txt
us0 f219 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setToolBarVisible(Boolean)</name>
        <nameStyle>26,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f219 1134 862 20 20 -74 -33 #rect
us0 f219 @|RichDialogMethodStartIcon #fIcon
us0 f297 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f297 1131 899 26 26 14 0 #rect
us0 f297 @|RichDialogProcessEndIcon #fIcon
us0 f298 expr out #txt
us0 f298 1144 882 1144 899 #arcP
us0 f299 guid 120667533EA41579 #txt
us0 f299 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f299 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f299 actionTable 'out=in;
' #txt
us0 f299 actionCode in.eventSource.eventSource=event.getSource(); #txt
us0 f299 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshActualSelectedFolder</name>
        <nameStyle>27,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f299 1142 94 20 20 -45 -29 #rect
us0 f299 @|RichDialogProcessStartIcon #fIcon
us0 f305 guid 120C26354DCCBE26 #txt
us0 f305 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f305 method printFile(java.io.File) #txt
us0 f305 disableUIEvents false #txt
us0 f305 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File file> param = methodEvent.getInputArguments();
' #txt
us0 f305 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
out.docToEdit=new DocumentOnServer();
if(param.#file!=null){
	out.docToEdit.filename=param.file.getName();
	out.docToEdit.path=param.file.getPath();
	
}' #txt
us0 f305 outParameterDecl '<> result;
' #txt
us0 f305 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>printFile(File)</name>
        <nameStyle>15,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f305 2526 1758 20 20 13 0 #rect
us0 f305 @|RichDialogMethodStartIcon #fIcon
us0 f307 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f307 2523 1851 26 26 14 0 #rect
us0 f307 @|RichDialogProcessEndIcon #fIcon
us0 f309 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f309 actionTable 'out=in;
' #txt
us0 f309 actionCode '
if(in.#docToEdit!=null && !in.docToEdit.filename.equalsIgnoreCase("") && !in.docToEdit.path.equalsIgnoreCase("")){
	panel.desktopHandlerPanel.printFile(new java.io.File(in.docToEdit.path));
}
' #txt
us0 f309 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f309 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f309 2518 1804 36 24 20 -2 #rect
us0 f309 @|RichDialogProcessStepIcon #fIcon
us0 f310 expr out #txt
us0 f310 2536 1778 2536 1804 #arcP
us0 f308 expr out #txt
us0 f308 2536 1828 2536 1851 #arcP
us0 f311 guid 12157BC298799BEE #txt
us0 f311 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f311 method _onChangeFile(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f311 disableUIEvents false #txt
us0 f311 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f311 inParameterMapAction 'out.fileUpload=param.returnedMessage.file;
' #txt
us0 f311 outParameterDecl '<> result;
' #txt
us0 f311 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onChangeFile(ReturnedMessage)</name>
        <nameStyle>30,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f311 5270 710 20 20 -45 -28 #rect
us0 f311 @|RichDialogMethodStartIcon #fIcon
us0 f314 guid 121D2CB5BD9B235F #txt
us0 f314 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f314 method zipFiles(List<java.io.File>) #txt
us0 f314 disableUIEvents false #txt
us0 f314 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> files> param = methodEvent.getInputArguments();
' #txt
us0 f314 inParameterMapAction 'out.tmpListOfFiles=param.files;
' #txt
us0 f314 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
out.selectedDocuments.clear();
String today =  new Date().format("d.M.yyyy");
String time = new Time().format();
String user= ivy.session.getSessionUserName();
for(java.io.File f : param.files)
{
	if(f.isFile()){
		DocumentOnServer doc = new DocumentOnServer();
		doc.creationDate=today;
		doc.creationTime=time;
		doc.fileID="";
		doc.fileSize=FileHandler.getFileSize(f);
		doc.filename=f.getName();
		doc.javaFile=f;
		doc.locked="0";
		doc.lockingUserID="";
		doc.modificationDate=today;
		doc.modificationTime=time;
		doc.modificationUserID=user;
		doc.path=f.getPath();
		doc.userID=user;
		out.selectedDocuments.add(doc);
	}
	
}' #txt
us0 f314 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f314 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>zipFiles(List&lt;File&gt;)</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f314 3294 1198 20 20 -43 -32 #rect
us0 f314 @|RichDialogMethodStartIcon #fIcon
us0 f315 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f315 actionTable 'out=in;
' #txt
us0 f315 actionCode 'import ch.ivyteam.ivy.addons.filemanager.ZipHandler;

out.returnedMessage=in.fileManagementHandler.zipDocumentOnServers(in.selectedDocuments,in.selectedFolderOnServer.path,in.dialogParam.outputString,true);' #txt
us0 f315 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f315 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make Zip</name>
        <nameStyle>8,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f315 3286 1452 36 24 20 -2 #rect
us0 f315 @|RichDialogProcessStepIcon #fIcon
us0 f317 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f317 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if Files selected</name>
        <nameStyle>23,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f317 3290 1242 28 28 14 0 #rect
us0 f317 @|AlternativeIcon #fIcon
us0 f318 expr out #txt
us0 f318 3304 1218 3304 1242 #arcP
us0 f326 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f326 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check user input</name>
        <nameStyle>16,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f326 3290 1386 28 28 14 0 #rect
us0 f326 @|AlternativeIcon #fIcon
us0 f316 expr in #txt
us0 f316 outCond '!in.dialogParam.outputString.trim().equalsIgnoreCase("") && in.dialogParam.clickedButton.equalsIgnoreCase("OK")' #txt
us0 f316 3304 1414 3304 1452 #arcP
us0 f347 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f347 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ZIP file generated?</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f347 3290 1514 28 28 14 0 #rect
us0 f347 @|AlternativeIcon #fIcon
us0 f365 expr out #txt
us0 f365 3304 1476 3304 1514 #arcP
us0 f432 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f432 3291 1635 26 26 14 0 #rect
us0 f432 @|RichDialogProcessEndIcon #fIcon
us0 f479 expr in #txt
us0 f479 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Cancel</name>
        <nameStyle>6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f479 3318 1400 3316 1644 #arcP
us0 f479 1 3435 1400 #addKink
us0 f479 2 3436 1616 #addKink
us0 f479 1 0.37890525117926527 0 0 #arcLabel
us0 f344 guid 121D2EC1E4BC52C3 #txt
us0 f344 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f344 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f344 actionTable 'out=in;
' #txt
us0 f344 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>zip</name>
        <nameStyle>3,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f344 3182 1198 20 20 -6 -34 #rect
us0 f344 @|RichDialogProcessStartIcon #fIcon
us0 f345 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f345 actionTable 'out=in;
' #txt
us0 f345 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocuments = new List<DocumentOnServer>();
for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
	in.selectedDocuments.add(doc);
}


' #txt
us0 f345 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f345 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make list of selected 
documents</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f345 3174 1244 36 24 -43 13 #rect
us0 f345 @|RichDialogProcessStepIcon #fIcon
us0 f480 expr out #txt
us0 f480 3192 1218 3192 1244 #arcP
us0 f485 expr out #txt
us0 f485 3210 1256 3290 1256 #arcP
us0 f482 expr in #txt
us0 f482 3318 1256 3317 1648 #arcP
us0 f482 1 3468 1256 #addKink
us0 f482 2 3468 1648 #addKink
us0 f482 1 0.32846030412283533 0 0 #arcLabel
us0 f319 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f319 actionTable 'out=in;
' #txt
us0 f319 actionCode '/*import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

in.today =  new Date().format("d.M.yyyy");
in.filesToAdd.clear();
java.io.File f = in.returnedMessage.file;

DocumentOnServer doc = new DocumentOnServer();
	doc.filename=f.getName();
	doc.path=FileHandler.formatPath(f.getPath());
	doc.fileSize=FileHandler.getFileSize(f);
	doc.creationDate=in.today;
	doc.creationTime = new Time().format();
	doc.userID=in.applicationUserName;
	doc.modificationDate=in.today;
	doc.modificationTime= doc.creationTime;
	doc.locked="0";
	doc.modificationUserID=in.applicationUserName;
	in.filesToAdd.add(doc);
	try{
		in.fileManagementHandler.insertDocuments(in.filesToAdd);
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
	*/
	panel.refreshActualSelectedFolder();' #txt
us0 f319 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f319 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inserts new Zip
in the DB and
refreshes table</name>
        <nameStyle>16,7,9
29,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f319 3286 1572 36 24 21 -21 #rect
us0 f319 @|RichDialogProcessStepIcon #fIcon
us0 f320 expr in #txt
us0 f320 outCond 'in.returnedMessage.type == ch.ivyteam.ivy.addons.filemanager.FileHandler.SUCCESS_MESSAGE' #txt
us0 f320 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f320 3304 1542 3304 1572 #arcP
us0 f431 expr out #txt
us0 f431 3304 1596 3304 1635 #arcP
us0 f486 guid 121ECC3E323F08FF #txt
us0 f486 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f486 method startAsPathChooser(String) #txt
us0 f486 disableUIEvents false #txt
us0 f486 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f486 inParameterMapAction 'out.configurationController.rootPath=param.serverPath;
out.configurationController.toolBarVisible=false;
out.isPathChooserFlowLayoutVisible=true;
out.serverPath=param.serverPath;
' #txt
us0 f486 outParameterDecl '<java.lang.String choosedPath> result;
' #txt
us0 f486 outParameterMapAction 'result.choosedPath=in.pathChooserReturn;
' #txt
us0 f486 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "startVisible(Boolean)"/parameterMapping "param.visible=false;\n"/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f486 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startAsPathChooser(String)</name>
        <nameStyle>26,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f486 550 326 20 20 13 0 #rect
us0 f486 @|RichDialogInitStartIcon #fIcon
us0 f487 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f487 actionTable 'out=in;
' #txt
us0 f487 actionCode 'panel.pathChooserFlowLayoutPane.visible=true;
panel.fileToolbarPane.visible=false;
panel.fileToolbarPane2.visible=false;
panel.fileToolbarPane3.visible=false;
panel.ServerFilePopupMenu.visible=false;
panel.ServerFilePopupMenu.enabled=false;
panel.buttonsGridBagLayoutPane.visible=false;

out.pathChooserReturn ="";
' #txt
us0 f487 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f487 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>change visibility
of components</name>
        <nameStyle>31,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f487 446 324 36 24 -43 13 #rect
us0 f487 @|RichDialogProcessStepIcon #fIcon
us0 f488 expr out #txt
us0 f488 550 336 482 336 #arcP
us0 f495 guid 121ECCB3C821D160 #txt
us0 f495 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f495 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f495 actionTable 'out=in;
' #txt
us0 f495 actionCode 'out.pathChooserReturn = in.selectedFolderOnServer.path;' #txt
us0 f495 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>OKPathChooser</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f495 622 798 20 20 -32 -27 #rect
us0 f495 @|RichDialogProcessStartIcon #fIcon
us0 f496 guid 121ECCB8283CD1EF #txt
us0 f496 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f496 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f496 actionTable 'out=in;
' #txt
us0 f496 actionCode out.pathChooserReturn=""; #txt
us0 f496 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancelPathChooser</name>
        <nameStyle>17,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f496 710 798 20 20 -24 -26 #rect
us0 f496 @|RichDialogProcessStartIcon #fIcon
us0 f497 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f497 guid 121ECCBBB15C0161 #txt
us0 f497 707 875 26 26 14 0 #rect
us0 f497 @|RichDialogEndIcon #fIcon
us0 f498 expr out #txt
us0 f498 632 818 707 888 #arcP
us0 f498 1 632 888 #addKink
us0 f498 1 0.026663925164719368 0 0 #arcLabel
us0 f499 expr out #txt
us0 f499 720 818 720 875 #arcP
us0 f457 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f457 actionTable 'out=in;
' #txt
us0 f457 actionCode 'if(in.#uploadHandler != null){
	
	if(in.configurationController.storeFilesInDB){
		in.uploadHandler.setFilesDestinationPathForDB(in.selectedFolderOnServer.path);
	}
	in.uploadHandler.prepareFilesForUpload(panel,"_uploadChoosedFiles",in.configurationController.maxFileUploadSize);

}' #txt
us0 f457 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f457 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f457 2350 788 36 24 20 -2 #rect
us0 f457 @|RichDialogProcessStepIcon #fIcon
us0 f501 expr out #txt
us0 f501 2368 754 2368 788 #arcP
us0 f7 expr out #txt
us0 f7 2368 812 2368 843 #arcP
us0 f502 guid 1236EF4A33ECB5DC #txt
us0 f502 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f502 method _onProgressWithText(String) #txt
us0 f502 disableUIEvents false #txt
us0 f502 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String progressText> param = methodEvent.getInputArguments();
' #txt
us0 f502 inParameterMapAction 'out.progressText=param.progressText;
' #txt
us0 f502 inActionCode 'if(out.progressUnit<0){
	out.progressUnit=0;
	}' #txt
us0 f502 outParameterDecl '<> result;
' #txt
us0 f502 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onProgressWithText(String)</name>
        <nameStyle>27,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f502 4774 118 20 20 -64 -32 #rect
us0 f502 @|RichDialogMethodStartIcon #fIcon
us0 f504 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f504 4774 174 20 20 13 0 #rect
us0 f504 @|RichDialogProcessEndIcon #fIcon
us0 f505 expr out #txt
us0 f505 4784 138 4784 174 #arcP
us0 f506 guid 1236FB8C20C2E141 #txt
us0 f506 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f506 method _onUploadSuccess(List<java.io.File>) #txt
us0 f506 disableUIEvents false #txt
us0 f506 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> uploadedFiles> param = methodEvent.getInputArguments();
' #txt
us0 f506 inParameterMapAction 'out.tmpListOfFiles=param.uploadedFiles;
' #txt
us0 f506 inActionCode 'if(out.progressUnit>=0){
	out.progressUnit=-1;
}
' #txt
us0 f506 outParameterDecl '<> result;
' #txt
us0 f506 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onUploadSuccess(List&lt;File&gt;)</name>
        <nameStyle>28,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f506 4598 294 20 20 -85 -31 #rect
us0 f506 @|RichDialogMethodStartIcon #fIcon
us0 f507 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f507 actionTable 'out=in;
' #txt
us0 f507 actionCode 'if(in.#tmpListOfFiles!=null){
	panel.addFiles(in.tmpListOfFiles);
}
in.fileUploadInProgress=false;
' #txt
us0 f507 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f507 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>call panel addFiles</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f507 4590 340 36 24 20 -2 #rect
us0 f507 @|RichDialogProcessStepIcon #fIcon
us0 f509 expr out #txt
us0 f509 4608 314 4608 340 #arcP
us0 f510 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f510 4598 390 20 20 13 0 #rect
us0 f510 @|RichDialogProcessEndIcon #fIcon
us0 f511 expr out #txt
us0 f511 4608 364 4608 390 #arcP
us0 f512 guid 1237014B0D3E5743 #txt
us0 f512 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f512 method _askIfOverwriteExistingFiles(List<java.io.File>,List<java.io.File>) #txt
us0 f512 disableUIEvents false #txt
us0 f512 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> allFilesChoosed,List<java.io.File> filesToOverwrite> param = methodEvent.getInputArguments();
' #txt
us0 f512 inParameterMapAction 'out.filesToOverwrite=param.filesToOverwrite;
out.tmpListOfFiles=param.allFilesChoosed;
' #txt
us0 f512 outParameterDecl '<> result;
' #txt
us0 f512 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_askIfOverwriteExistingFiles(List&lt;File&gt;,List&lt;File&gt;)</name>
        <nameStyle>51,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f512 4558 598 20 20 -130 -29 #rect
us0 f512 @|RichDialogMethodStartIcon #fIcon
us0 f517 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f517 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check incoming
lists of files</name>
        <nameStyle>29
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f517 4554 650 28 28 -86 -21 #rect
us0 f517 @|AlternativeIcon #fIcon
us0 f518 expr out #txt
us0 f518 4568 618 4568 650 #arcP
us0 f525 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f525 actionTable 'out=in;
' #txt
us0 f525 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
//!panel.isFileLocked(new java.io.File(in.selectedFolderOnServer.path+in.fileUpload.getName()))

List<java.io.File> files = new List<java.io.File>();
List<String> filesToExclude = new List<String>();
files.addAll(in.filesToOverwrite);
in.filesToOverwrite.clear();
String path = FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path);
for(java.io.File f: files){
	if(!panel.isFileLocked(new java.io.File(path+f.getName()))){
		in.filesToOverwrite.add(f);
	}else{
		filesToExclude.add(f.getName());
	}
}

// we exclude from the initial list the locked files
files.clear();

for(java.io.File f: in.tmpListOfFiles){
	String s = f.getName();
	boolean found = false;
	for(String n : filesToExclude){
		if(n.equalsIgnoreCase(s)){
			found=true;
			break;
		}
	}// we just keep the unlocked files
	if(!found){
		files.add(f);
	}
}

in.tmpListOfFiles.clear();
in.tmpListOfFiles.addAll(files);' #txt
us0 f525 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f525 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exclude from the files to overwrite
the ones that are locked.</name>
        <nameStyle>61,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f525 4550 700 36 24 -172 -28 #rect
us0 f525 @|RichDialogProcessStepIcon #fIcon
us0 f529 expr in #txt
us0 f529 outCond 'in.tmpListOfFiles.size()>0 && in.filesToOverwrite.size()>0' #txt
us0 f529 4568 678 4568 700 #arcP
us0 f532 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f532 actionTable 'out=in;
' #txt
us0 f532 actionCode 'try{
	in.fileManagementHandler.deleteFiles(in.filesToOverwrite);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f532 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f532 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete the files 
from the 
fileManagement System</name>
        <nameStyle>49,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f532 4550 972 36 24 19 -27 #rect
us0 f532 @|RichDialogProcessStepIcon #fIcon
us0 f532 -613726|-613726|-16777216 #nodeStyle
us0 f554 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f554 actionTable 'out=in;
' #txt
us0 f554 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;


if(panel.ordnersTree.selectedTreeNode.value instanceof FolderOnServer){
	FolderOnServer FOS = panel.ordnersTree.selectedTreeNode.value as FolderOnServer;
	in.selectedFolderOnServer.name=FOS.name;
	in.selectedFolderOnServer.path=FOS.path;
}else {
	in.selectedFolderOnServer.path=in.configurationController.rootPath;
}
in.uploadHandler.setServerPath(in.selectedFolderOnServer.path);

in.documentsInDb = new List<DocumentOnServer>();
try{
	in.documentsInDb=in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,in.configurationController.diplayFilesRecursively);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f554 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f554 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the selected folder</name>
        <nameStyle>27,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f554 4550 1020 36 24 20 -2 #rect
us0 f554 @|RichDialogProcessStepIcon #fIcon
us0 f561 expr out #txt
us0 f561 4568 996 4568 1020 #arcP
us0 f581 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f581 actionTable 'out=in;
' #txt
us0 f581 actionCode 'out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles").replaceFirst("</html>","");
in.dialogParam.message="<br>";
for(java.io.File f : in.filesToOverwrite){
	in.dialogParam.message+=f.getName()+"<br>";
}

in.dialogParam.message+="</html>";' #txt
us0 f581 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f581 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>winTitle + message</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f581 4550 812 36 24 20 -2 #rect
us0 f581 @|RichDialogProcessStepIcon #fIcon
us0 f590 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f590 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check response</name>
        <nameStyle>14,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f590 4554 914 28 28 14 0 #rect
us0 f590 @|AlternativeIcon #fIcon
us0 f540 expr in #txt
us0 f540 outCond in.dialogParam.clickedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f540 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f540 4568 942 4568 972 #arcP
us0 f594 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f594 actionTable 'out=in;
' #txt
us0 f594 actionCode 'if(in.#uploadHandler != null){
	if(in.configurationController.maxFileUploadSize<=0)
	{
		in.uploadHandler.uploadPreparedFiles(in.tmpListOfFiles);
	}else{
		in.uploadHandler.uploadPreparedFiles(in.tmpListOfFiles,in.configurationController.maxFileUploadSize);
	}

}' #txt
us0 f594 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f594 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload Prepared Files</name>
        <nameStyle>21,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f594 4550 1076 36 24 20 -2 #rect
us0 f594 @|RichDialogProcessStepIcon #fIcon
us0 f595 expr out #txt
us0 f595 4568 1044 4568 1076 #arcP
us0 f596 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f596 4558 1142 20 20 13 0 #rect
us0 f596 @|RichDialogProcessEndIcon #fIcon
us0 f597 expr out #txt
us0 f597 4568 1100 4568 1142 #arcP
us0 f600 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f600 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>in.filesToOverwrite.size()&gt;0 ?</name>
        <nameStyle>30,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f600 4554 754 28 28 -168 -13 #rect
us0 f600 @|AlternativeIcon #fIcon
us0 f601 expr out #txt
us0 f601 4568 724 4568 754 #arcP
us0 f582 expr in #txt
us0 f582 outCond ' in.filesToOverwrite.size()>0' #txt
us0 f582 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f582 4568 782 4568 812 #arcP
us0 f603 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f603 actionTable 'out=in;
' #txt
us0 f603 actionCode 'List<java.io.File> files = new List<java.io.File>();
//for each files to upload, we look if we can take it
for(java.io.File ff: in.tmpListOfFiles){
	boolean found = false;
	String s = ff.getName();
	for(java.io.File f: in.filesToOverwrite){
		if(f.getName().equalsIgnoreCase(s)){
			found=true;
			break;
		}
	}
	if(!found){
		files.add(ff);
	}
}

in.tmpListOfFiles.clear();
in.tmpListOfFiles.addAll(files);
' #txt
us0 f603 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f603 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>We just upload the Files
that won''t overwrite others</name>
        <nameStyle>52,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f603 4758 916 36 24 -50 -46 #rect
us0 f603 @|RichDialogProcessStepIcon #fIcon
us0 f604 expr in #txt
us0 f604 4582 928 4758 928 #arcP
us0 f604 0 0.7162196300362453 0 0 #arcLabel
us0 f605 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f605 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>still any Files to upload?</name>
        <nameStyle>26,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f605 4762 1074 28 28 14 0 #rect
us0 f605 @|AlternativeIcon #fIcon
us0 f606 expr out #txt
us0 f606 4776 940 4776 1074 #arcP
us0 f606 0 0.4955537994490308 0 0 #arcLabel
us0 f598 expr in #txt
us0 f598 outCond in.tmpListOfFiles.size()>0 #txt
us0 f598 4762 1088 4586 1088 #arcP
us0 f608 expr in #txt
us0 f608 4582 768 4787 1085 #arcP
us0 f608 1 4868 768 #addKink
us0 f608 2 4868 1064 #addKink
us0 f608 0 0.4853145446307004 0 0 #arcLabel
us0 f602 expr in #txt
us0 f602 4582 664 4790 1088 #arcP
us0 f602 1 4892 664 #addKink
us0 f602 2 4892 1088 #addKink
us0 f602 1 0.1336384498602094 0 0 #arcLabel
us0 f599 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f599 actionTable 'out=in;
' #txt
us0 f599 actionCode 'import ch.ivyteam.ivy.addons.filemanager.ulcextensionhandler.DocumentMoveChecker;

out.dialogParam = DocumentMoveChecker.makeDialogForDocumentOverwrite(in.returnedMessage.documentOnServer);
' #txt
us0 f599 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f599 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>WinTitle and
message</name>
        <nameStyle>20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f599 5950 420 36 24 -31 -46 #rect
us0 f599 @|RichDialogProcessStepIcon #fIcon
us0 f610 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f610 actionTable 'out=in;
' #txt
us0 f610 actionCode 'try{
	in.fileManagementHandler.lockDocument(in.selectedDocument,in.applicationUserName);
	if(in.configurationController.fileActionHistoryConfiguration.readFileTracked)
	{
		in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(Long.parseLong(in.selectedDocument.fileID),8,in.applicationUserName,"");
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f610 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f610 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Lock with
FileManagement
Handler</name>
        <nameStyle>32,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f610 2846 452 36 24 -118 -24 #rect
us0 f610 @|RichDialogProcessStepIcon #fIcon
us0 f610 -14336|-1|-16777216 #nodeStyle
us0 f611 expr in #txt
us0 f611 outCond !in.responseBoolean #txt
us0 f611 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f611 2864 414 2864 452 #arcP
us0 f612 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f612 actionTable 'out=in;
out.dialogParam.clickedButton="";
' #txt
us0 f612 actionCode out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/confirmdeleteDir"); #txt
us0 f612 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f612 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f612 1822 780 36 24 20 -2 #rect
us0 f612 @|RichDialogProcessStepIcon #fIcon
us0 f616 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f616 actionTable 'out=in;
' #txt
us0 f616 actionCode out.returnedMessage.text=""; #txt
us0 f616 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f616 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f616 1566 1356 36 24 20 -2 #rect
us0 f616 @|RichDialogProcessStepIcon #fIcon
us0 f143 expr out #txt
us0 f143 1566 1368 1549 1368 #arcP
us0 f628 guid 1239D542A6AE2CD3 #txt
us0 f628 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f628 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f628 actionTable 'out=in;
' #txt
us0 f628 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unload</name>
        <nameStyle>6,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f628 534 990 20 20 13 0 #rect
us0 f628 @|RichDialogProcessStartIcon #fIcon
us0 f629 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f629 actionTable 'out=in;
' #txt
us0 f629 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileCouple;


try{
	List<FileCouple> fcList = panel.desktopHandlerPanel.getEditedFileList();
	in.tmpListOfFiles.clear();
	for(FileCouple fc:fcList){
		java.io.File f = new java.io.File (fc.serverSidePath);
		in.tmpListOfFiles.add(f);
	}
	in.fileManagementHandler.unlockFilesEdited(in.configurationController.rootPath,in.applicationUserName,true);

}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f629 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f629 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f629 526 1036 36 24 20 -2 #rect
us0 f629 @|RichDialogProcessStepIcon #fIcon
us0 f630 expr out #txt
us0 f630 544 1010 544 1036 #arcP
us0 f631 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f631 534 1118 20 20 13 0 #rect
us0 f631 @|RichDialogProcessEndIcon #fIcon
us0 f634 guid 1239D613DB15DE1C #txt
us0 f634 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f634 method startWithServerPathAndIvyDbConnectionNameAndDbTableName(String,String,String) #txt
us0 f634 disableUIEvents true #txt
us0 f634 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.String ivyDbConnectionName,java.lang.String DbTableName> param = methodEvent.getInputArguments();
' #txt
us0 f634 inParameterMapAction 'out.configurationController.filesTableName=param.DbTableName;
out.configurationController.ivyDBConnectionName=param.ivyDbConnectionName;
out.configurationController.rootPath=param.serverPath;
' #txt
us0 f634 outParameterDecl '<> result;
' #txt
us0 f634 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f634 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPath
AndIvyDbConnectionName
AndDbTableName(String,String,String)</name>
        <nameStyle>79,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f634 446 398 20 20 13 -9 #rect
us0 f634 @|RichDialogInitStartIcon #fIcon
us0 f637 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f637 actionTable 'out=in;
' #txt
us0 f637 actionCode 'for(int i=0; i<in.documentsInDb.size();i++){
	if(in.documentsInDb.get(i).path.equals(in.selectedDocument.path)){
		in.documentsInDb.get(i).setLocked("1");
		in.documentsInDb.get(i).lockingUserID=in.applicationUserName;
		break;
	}
}

panel.filesTable.refresh();' #txt
us0 f637 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f637 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the list</name>
        <nameStyle>16,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f637 2846 652 36 24 20 -2 #rect
us0 f637 @|RichDialogProcessStepIcon #fIcon
us0 f193 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f193 2854 758 20 20 13 0 #rect
us0 f193 @|RichDialogProcessEndIcon #fIcon
us0 f214 actionDecl 'List panelIdAndDocumentOnServer;
' #txt
us0 f214 actionTable 'panelIdAndDocumentOnServer=[in.panelId, in.selectedDocument];
' #txt
us0 f214 actionCode panel.fireSE_fileLocked(panelIdAndDocumentOnServer); #txt
us0 f214 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f214 fireEvent SE_fileLocked(List) #txt
us0 f214 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileLocked</name>
        <nameStyle>13,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f214 2846 612 36 24 20 -2 #rect
us0 f214 @|RichDialogFireEventIcon #fIcon
us0 f641 expr out #txt
us0 f641 2912 564 2882 624 #arcP
us0 f641 1 2912 624 #addKink
us0 f641 1 0.04291620769471808 0 0 #arcLabel
us0 f638 expr out #txt
us0 f638 2864 636 2864 652 #arcP
us0 f642 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f642 actionTable 'out=in;
' #txt
us0 f642 actionCode '
for(int i=0; i<in.documentsInDb.size(); i++){
	if(in.selectedDocument.filename.equals(in.documentsInDb.get(i).filename)){
		panel.filesTable.selectedListEntry = in.documentsInDb.get(i);
	}
}' #txt
us0 f642 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f642 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>select the selectedDoc
in the table</name>
        <nameStyle>35,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f642 2846 692 36 24 26 -13 #rect
us0 f642 @|RichDialogProcessStepIcon #fIcon
us0 f643 expr out #txt
us0 f643 2864 676 2864 692 #arcP
us0 f645 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f645 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Doc found?</name>
        <nameStyle>10,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f645 6258 146 28 28 -82 -1 #rect
us0 f645 @|AlternativeIcon #fIcon
us0 f647 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f647 actionTable 'out=in;
' #txt
us0 f647 actionCode 'if(in.#selectedDocument != null){
	for(int i=0; i<in.documentsInDb.size(); i++){
		if(in.selectedDocument.filename.equals(in.documentsInDb.get(i).filename)){
			panel.filesTable.selectedListEntry = in.documentsInDb.get(i);
		}
	}
}' #txt
us0 f647 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f647 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f647 6254 212 36 24 20 -2 #rect
us0 f647 @|RichDialogProcessStepIcon #fIcon
us0 f648 expr in #txt
us0 f648 outCond in.updateList #txt
us0 f648 6272 174 6272 212 #arcP
us0 f649 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f649 6262 294 20 20 13 0 #rect
us0 f649 @|RichDialogProcessEndIcon #fIcon
us0 f650 expr out #txt
us0 f650 6272 236 6272 294 #arcP
us0 f651 expr in #txt
us0 f651 6286 160 6282 304 #arcP
us0 f651 1 6350 160 #addKink
us0 f651 2 6350 304 #addKink
us0 f651 1 0.3004318342397848 0 0 #arcLabel
us0 f652 guid 1245703A69A22C7D #txt
us0 f652 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f652 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f652 actionTable 'out=in;
' #txt
us0 f652 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>email</name>
        <nameStyle>5,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f652 2782 1374 20 20 13 0 #rect
us0 f652 @|RichDialogProcessStartIcon #fIcon
us0 f653 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f653 actionTable 'out=in;
' #txt
us0 f653 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List select = panel.filesTable.getSelectedListEntries();
List<java.io.File> files=new List<java.io.File>();
for(Object o:select){
	if(o instanceof DocumentOnServer){
		DocumentOnServer doc = o as DocumentOnServer;
		try{
			doc=in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
			if(doc.getJavaFile() !=null){
				files.add(doc.getJavaFile());
			}
		}catch(Throwable t){
			
		}
	}
}
List<String> l = new List<String>();
in.emailContainer.attachments=files;
in.emailContainer.bcc=l;
in.emailContainer.to=l;
in.emailContainer.cc=l;
in.emailContainer.subject="";
in.emailContainer.body="";

panel.desktopHandlerPanel.mail(in.emailContainer);

' #txt
us0 f653 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f653 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected Files</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f653 2774 1436 36 24 21 -10 #rect
us0 f653 @|RichDialogProcessStepIcon #fIcon
us0 f653 -613726|-613726|-16777216 #nodeStyle
us0 f654 expr out #txt
us0 f654 2792 1394 2792 1436 #arcP
us0 f655 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f655 2782 1502 20 20 13 0 #rect
us0 f655 @|RichDialogProcessEndIcon #fIcon
us0 f656 expr out #txt
us0 f656 2792 1460 2792 1502 #arcP
us0 f657 guid 12457B077A3A3717 #txt
us0 f657 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f657 method mail(List<String>,List<String>,List<String>,String,String,Boolean,List<java.io.File>) #txt
us0 f657 disableUIEvents false #txt
us0 f657 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.lang.String> to,List<java.lang.String> cc,List<java.lang.String> bcc,java.lang.String subject,java.lang.String body,java.lang.Boolean attachmentsFromOutside,List<java.io.File> attachments> param = methodEvent.getInputArguments();
' #txt
us0 f657 inParameterMapAction 'out.emailContainer.attachments=param.attachments;
out.emailContainer.attachmentsFromOutside=param.attachmentsFromOutside;
out.emailContainer.bcc=param.bcc;
out.emailContainer.body=param.body;
out.emailContainer.cc=param.cc;
out.emailContainer.subject=param.subject;
out.emailContainer.to=param.to;
' #txt
us0 f657 outParameterDecl '<> result;
' #txt
us0 f657 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>mail(List&lt;String&gt;,List&lt;String&gt;,List&lt;String&gt;,String,String,
Boolean,List&lt;File&gt;)</name>
        <nameStyle>78,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f657 2950 1374 20 20 -88 -42 #rect
us0 f657 @|RichDialogMethodStartIcon #fIcon
us0 f41 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f41 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>insert the selected Files or 
attachments come from the outside</name>
        <nameStyle>63,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f41 2946 1418 28 28 2 -36 #rect
us0 f41 @|AlternativeIcon #fIcon
us0 f658 expr out #txt
us0 f658 2960 1394 2960 1418 #arcP
us0 f659 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f659 actionTable 'out=in;
' #txt
us0 f659 actionCode panel.desktopHandlerPanel.mail(in.emailContainer); #txt
us0 f659 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f659 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f659 2942 1460 36 24 20 -2 #rect
us0 f659 @|RichDialogProcessStepIcon #fIcon
us0 f660 expr in #txt
us0 f660 outCond in.emailContainer.attachmentsFromOutside #txt
us0 f660 2960 1446 2960 1460 #arcP
us0 f661 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f661 actionTable 'out=in;
' #txt
us0 f661 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List select = panel.filesTable.getSelectedListEntries();
List<java.io.File> files=new List<java.io.File>();
for(Object o:select){
	if(o instanceof DocumentOnServer){
		DocumentOnServer doc = o as DocumentOnServer;
		try{
			doc=in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
			if(doc.getJavaFile() !=null){
				files.add(doc.getJavaFile());
			}
		}catch(Throwable t){
			
		}
	}
}

out.emailContainer.attachments=files;' #txt
us0 f661 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f661 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected Files</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f661 3014 1461 36 22 20 -2 #rect
us0 f661 @|RichDialogProcessStepIcon #fIcon
us0 f661 -613726|-613726|-16777216 #nodeStyle
us0 f662 expr in #txt
us0 f662 2974 1432 3032 1461 #arcP
us0 f662 1 3032 1432 #addKink
us0 f662 0 0.781685164361945 0 0 #arcLabel
us0 f663 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f663 2950 1502 20 20 13 0 #rect
us0 f663 @|RichDialogProcessEndIcon #fIcon
us0 f664 expr out #txt
us0 f664 2960 1484 2960 1502 #arcP
us0 f666 expr out #txt
us0 f666 3014 1472 2978 1472 #arcP
us0 f665 guid 12470C7BEA8F153A #txt
us0 f665 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f665 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f665 actionTable 'out=in;
' #txt
us0 f665 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;
RdEvent e = event as RdEvent;
in.isFileEditable=false;
if(e.getParameter() != null && e.getParameter() instanceof boolean){
	in.isFileEditable = e.getParameter() as boolean;
}' #txt
us0 f665 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileEditableReported</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f665 2854 118 20 20 -56 -29 #rect
us0 f665 @|RichDialogProcessStartIcon #fIcon
us0 f668 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f668 actionTable 'out=in;
' #txt
us0 f668 actionCode 'try{
	in.responseBoolean=in.fileManagementHandler.isDocumentOnServerLocked(in.selectedDocument, in.applicationUserName);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f668 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f668 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>try to lock the file</name>
        <nameStyle>20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f668 2846 308 36 24 20 -9 #rect
us0 f668 @|RichDialogProcessStepIcon #fIcon
us0 f668 -613726|-613726|-16777216 #nodeStyle
us0 f667 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f667 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileToEdit null?
is editable?</name>
        <nameStyle>17,0,7,9
12,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f667 2850 170 28 28 4 -41 #rect
us0 f667 @|AlternativeIcon #fIcon
us0 f56 expr out #txt
us0 f56 2864 332 2864 386 #arcP
us0 f675 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f675 actionTable 'out=in;
' #txt
us0 f675 actionCode panel.desktopHandlerPanel.openFile(in.fileToEdit); #txt
us0 f675 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f675 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f675 2710 276 36 24 20 -2 #rect
us0 f675 @|RichDialogProcessStepIcon #fIcon
us0 f677 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f677 2718 334 20 20 13 0 #rect
us0 f677 @|RichDialogProcessEndIcon #fIcon
us0 f678 expr out #txt
us0 f678 2728 300 2728 334 #arcP
us0 f129 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f129 actionTable 'out=in;
' #txt
us0 f129 actionCode out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f129 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f129 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f129 2710 172 36 24 20 -2 #rect
us0 f129 @|RichDialogProcessStepIcon #fIcon
us0 f674 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f674 actionTable 'out=in;
' #txt
us0 f674 actionCode out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error"); #txt
us0 f674 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f674 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f674 1686 1356 36 24 20 -2 #rect
us0 f674 @|RichDialogProcessStepIcon #fIcon
us0 f682 expr in #txt
us0 f682 1746 1368 1722 1368 #arcP
us0 f686 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f686 actionTable 'out=in;
' #txt
us0 f686 actionCode out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
us0 f686 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f686 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f686 5182 876 36 24 20 -2 #rect
us0 f686 @|RichDialogProcessStepIcon #fIcon
us0 f687 expr in #txt
us0 f687 outCond '!panel.isFileLocked(new java.io.File(in.selectedFolderOnServer.path+in.fileUpload.getName()))' #txt
us0 f687 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f687 5200 846 5200 876 #arcP
us0 f670 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f670 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is File editable?</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f670 2850 498 28 28 5 -18 #rect
us0 f670 @|AlternativeIcon #fIcon
us0 f695 expr out #txt
us0 f695 2864 476 2864 498 #arcP
us0 f57 expr in #txt
us0 f57 outCond in.isFileEditable #txt
us0 f57 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f57 2878 512 2912 540 #arcP
us0 f57 1 2912 512 #addKink
us0 f57 1 0.32142857142857145 0 0 #arcLabel
us0 f696 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f696 actionTable 'out=in;
' #txt
us0 f696 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
	DocumentOnServer doc = new DocumentOnServer();
  if(in.#selectedDocument.#javaFile != null && in.selectedDocument.javaFile.isFile()){
		doc=in.selectedDocument;
	}else{
 		doc = panel.filesTable.selectedListEntry as DocumentOnServer;
		doc= in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
	}
	panel.desktopHandlerPanel.openDocumentOnServerAndCheckForChanges(doc);
	//OLD SYSTEM panel.desktopHandlerPanel.openFileAndCheckForChanges(new java.io.File(doc.path));
	out.selectedDocument.locked="1";
	out.selectedDocument.lockingUserID=in.applicationUserName;

}' #txt
us0 f696 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f696 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>openFile And
CheckForChanges
Changes are going to be saved
(see inline Description)</name>
        <nameStyle>83,0,7,9
</nameStyle>
        <desc>The Java 6 Desktop Object Implementation has still
some problems with getting
if an edit program is installed at client side to edit a file.
That is why we open the File and check for changes.
If the user changes the File, those changes are going to be transmitted to the server side.</desc>
    </language>
</elementInfo>
' #txt
us0 f696 2798 540 36 24 -109 -3 #rect
us0 f696 @|RichDialogProcessStepIcon #fIcon
us0 f696 -613726|-613726|-16777216 #nodeStyle
us0 f697 expr in #txt
us0 f697 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f697 2850 512 2816 540 #arcP
us0 f697 1 2816 512 #addKink
us0 f697 1 0.04106100623285445 0 0 #arcLabel
us0 f698 expr out #txt
us0 f698 2816 564 2846 624 #arcP
us0 f698 1 2816 624 #addKink
us0 f698 0 0.8449574367770217 0 0 #arcLabel
us0 f699 guid 126E0B8E11912075 #txt
us0 f699 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f699 method startWithServerPathAndIvyDbConnectionNameAndDbTableNameAndDBSchemaName(String,String,String,String) #txt
us0 f699 disableUIEvents true #txt
us0 f699 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.String IvyDbConnectioName,java.lang.String tableName,java.lang.String schemaName> param = methodEvent.getInputArguments();
' #txt
us0 f699 inParameterMapAction 'out.configurationController.databaseSchemaName=param.schemaName;
out.configurationController.filesTableName=param.tableName;
out.configurationController.ivyDBConnectionName=param.IvyDbConnectioName;
out.configurationController.rootPath=param.serverPath;
' #txt
us0 f699 outParameterDecl '<> result;
' #txt
us0 f699 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f699 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPath
AndIvyDbConnectionName
AndDbTableName
AndDBSchemaName(String,String,String,String)</name>
        <nameStyle>102,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f699 446 494 20 20 14 -51 #rect
us0 f699 @|RichDialogInitStartIcon #fIcon
us0 f701 guid 1274D78EDEF27C2A #txt
us0 f701 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f701 method startAsPathChooserWithDBInformations(String,String,String,String) #txt
us0 f701 disableUIEvents true #txt
us0 f701 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.String ivyDBConnectionname,java.lang.String DBTableName,java.lang.String DBSchemaName> param = methodEvent.getInputArguments();
' #txt
us0 f701 inParameterMapAction 'out.configurationController.databaseSchemaName=param.DBSchemaName;
out.configurationController.filesTableName=param.DBTableName;
out.configurationController.ivyDBConnectionName=param.ivyDBConnectionname;
out.configurationController.rootPath=param.serverPath;
out.configurationController.toolBarVisible=false;
out.isPathChooserFlowLayoutVisible=true;
' #txt
us0 f701 outParameterDecl '<java.lang.String choosedPath> result;
' #txt
us0 f701 outParameterMapAction 'result.choosedPath=in.pathChooserReturn;
' #txt
us0 f701 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f701 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startAsPathChooserWithDBInformations
(String,String,String,String)</name>
        <nameStyle>66,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f701 550 294 20 20 13 -7 #rect
us0 f701 @|RichDialogInitStartIcon #fIcon
us0 f702 expr out #txt
us0 f702 550 307 482 336 #arcP
us0 f703 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f703 actionTable 'out=in;
' #txt
us0 f703 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(in.copyOn)
{
	out.filesCopiedInThisPanel =true;
	List<DocumentOnServer> files= new List<DocumentOnServer>();
	files.addAll(in.copiedDocuments);
	
	ivy.session.setAttribute("copiedFiles",in.copiedDocuments);
}
else{
	ivy.session.removeAttribute("copiedFiles");
	out.filesCopiedInThisPanel =false;
}' #txt
us0 f703 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f703 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make filesCopiedInThisPanel
and the copiedFiles
 session attribute</name>
        <nameStyle>28,7,9
38,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f703 2566 860 36 24 13 -22 #rect
us0 f703 @|RichDialogProcessStepIcon #fIcon
us0 f705 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f705 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>copy in 
same Panel?</name>
        <nameStyle>20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f705 2914 866 28 28 15 -15 #rect
us0 f705 @|AlternativeIcon #fIcon
us0 f706 expr out #txt
us0 f706 2928 842 2928 866 #arcP
us0 f707 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f707 actionTable 'out=in;
' #txt
us0 f707 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

Object o = ivy.session.getAttribute("copiedFiles");
if(o!= null && o instanceof List<DocumentOnServer>){
	out.copiedDocuments = o as List<DocumentOnServer>;
}' #txt
us0 f707 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f707 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSessionAttribute
copiedFiles</name>
        <nameStyle>20,7,9
11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f707 3062 948 36 24 20 -2 #rect
us0 f707 @|RichDialogProcessStepIcon #fIcon
us0 f708 actionDecl 'Number panelId;
' #txt
us0 f708 actionTable 'panelId=in.panelId;
' #txt
us0 f708 actionCode panel.fireFilesCopied(panelId); #txt
us0 f708 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f708 fireEvent filesCopied(Number) #txt
us0 f708 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesCopied@
Application</name>
        <nameStyle>13,7,9
11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f708 2566 908 36 24 19 2 #rect
us0 f708 @|RichDialogFireEventIcon #fIcon
us0 f709 expr out #txt
us0 f709 2584 884 2584 908 #arcP
us0 f515 expr out #txt
us0 f515 2584 932 2584 947 #arcP
us0 f710 guid 128F27E79C73AE3A #txt
us0 f710 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f710 broadcast filesCopied #txt
us0 f710 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f710 actionTable 'out=in;
' #txt
us0 f710 actionCode 'if(param.panelId != in.panelId){
	out.filesCopiedInThisPanel=false;
	in.copyOn=true;
}' #txt
us0 f710 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesCopied</name>
        <nameStyle>11,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f710 2478 942 20 20 -32 -36 #rect
us0 f710 @|RichDialogBroadcastStartIcon #fIcon
us0 f711 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f711 2478 990 20 20 13 0 #rect
us0 f711 @|RichDialogProcessEndIcon #fIcon
us0 f712 expr out #txt
us0 f712 2488 962 2488 990 #arcP
us0 f713 expr in #txt
us0 f713 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f713 2942 880 3080 948 #arcP
us0 f713 1 3080 880 #addKink
us0 f713 0 0.7559490476914582 0 0 #arcLabel
us0 f717 guid 1299CEB234E382B8 #txt
us0 f717 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f717 method startWithServerPathAndUseIvySystemDB(String) #txt
us0 f717 disableUIEvents true #txt
us0 f717 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f717 inParameterMapAction 'out.clientTempDirPath="";
out.configurationController.activateFileVersioning=false;
out.configurationController.activateSecurity=false;
out.configurationController.advancedActionsEnabled=true;
out.configurationController.folderTreeVisible=true;
out.configurationController.rootPath=param.serverPath;
out.configurationController.storeFilesInDB=false;
out.configurationController.toolBarVisible=true;
out.configurationController.useIvySystemDB=true;
out.cursor=0;
' #txt
us0 f717 outParameterDecl '<> result;
' #txt
us0 f717 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "startVisible(Boolean)"/parameterMapping "param.visible=false;\n"/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f717 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndUseIvySystemDB(String)</name>
        <nameStyle>44,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f717 262 70 20 20 -18 -26 #rect
us0 f717 @|RichDialogInitStartIcon #fIcon
us0 f721 guid 1299CEE9D1048323 #txt
us0 f721 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f721 method startAsPathChooserWithIvySystemDb(String) #txt
us0 f721 disableUIEvents true #txt
us0 f721 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f721 inParameterMapAction 'out.configurationController.rootPath=param.serverPath;
out.configurationController.toolBarVisible=false;
out.configurationController.useIvySystemDB=true;
out.isPathChooserFlowLayoutVisible=true;
' #txt
us0 f721 outParameterDecl '<java.lang.String choosedPath> result;
' #txt
us0 f721 outParameterMapAction 'result.choosedPath=in.pathChooserReturn;
' #txt
us0 f721 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
us0 f721 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startAsPathChooserWithIvySystemDb(String)</name>
        <nameStyle>41,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f721 550 358 20 20 13 0 #rect
us0 f721 @|RichDialogInitStartIcon #fIcon
us0 f725 expr out #txt
us0 f725 2864 138 2864 170 #arcP
us0 f694 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Calls the desktopHandler Panel 
unLockSelectedDocumentsOnServer(in.selectedDocuments)

When DesktopHandler finished, it fires its unlockFiles@SUBSC.
The fileManager is waiting for this event to call fire
unlockFiles event.
</name>
        <nameStyle>32,7,9
191,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f694 3396 283 360 122 -175 -56 #rect
us0 f694 @|IBIcon #fIcon
us0 f694 -657956|-1|-16777216 #nodeStyle
us0 f100 3576 405 3576 513 #arcP
us0 f101 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f101 2958 174 20 20 13 0 #rect
us0 f101 @|RichDialogProcessEndIcon #fIcon
us0 f102 expr in #txt
us0 f102 outCond 'in.#fileToEdit ==null || !in.fileToEdit.isFile()' #txt
us0 f102 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NULL</name>
        <nameStyle>4,0,7,12
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f102 2878 184 2958 184 #arcP
us0 f102 0 0.4625 0 9 #arcLabel
us0 f669 expr in #txt
us0 f669 outCond in.isFileEditable #txt
us0 f669 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Editable</name>
        <nameStyle>8,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f669 2864 198 2864 308 #arcP
us0 f669 0 0.16666666666666666 3 0 #arcLabel
us0 f130 expr in #txt
us0 f130 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Not Editable</name>
        <nameStyle>12,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f130 2850 184 2746 184 #arcP
us0 f130 0 0.4361073611332017 0 -9 #arcLabel
us0 f726 expr in #txt
us0 f726 outCond in.filesCopiedInThisPanel #txt
us0 f726 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f726 2928 894 2928 946 #arcP
us0 f726 0 0.5 1 0 #arcLabel
us0 f574 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f574 actionTable 'out=in;
' #txt
us0 f574 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.DnDDestinationPath=FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path);
in.responseBoolean=true;
in.errorUtil.errorOccurred=false;

if(in.configurationController.activateSecurity && !in.selectedFolderOnServer.canUserCreateFiles)
{// the user cannot insert new files
	out.returnedMessage.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/userHasNoRightToUploadFiles");
	out.responseBoolean=false;
}
else{
	try{
		out.returnedMessage = in.fileManagementHandler.pasteCopiedDocumentOnServers(in.copiedDocuments,in.DnDDestinationPath);
		
	}catch(Throwable t){
			in.errorUtil.panelId = in.panelId;
			in.errorUtil.errorOccurred=true;
			in.errorUtil.throwable = t;
			in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
			panel.fireErrorOccurred(in.errorUtil);
	}
}

' #txt
us0 f574 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f574 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>paste the copied files
in the selectedFolder</name>
        <nameStyle>23,7,9
21,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f574 2910 1020 36 24 21 -33 #rect
us0 f574 @|RichDialogProcessStepIcon #fIcon
us0 f574 -14336|-1|-16777216 #nodeStyle
us0 f727 expr in #txt
us0 f727 outCond in.copyOn #txt
us0 f727 2928 974 2928 1020 #arcP
us0 f522 expr out #txt
us0 f522 3080 972 2946 1032 #arcP
us0 f522 1 3080 1032 #addKink
us0 f522 1 0.18737769656397582 0 0 #arcLabel
us0 f520 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f520 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>all files could be copied?</name>
        <nameStyle>26,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f520 2914 1162 28 28 14 0 #rect
us0 f520 @|AlternativeIcon #fIcon
us0 f520 -613726|-613726|-16777216 #nodeStyle
us0 f575 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f575 actionTable 'out=in;
' #txt
us0 f575 actionCode out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f575 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f575 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f575 2846 1212 36 24 20 -2 #rect
us0 f575 @|RichDialogProcessStepIcon #fIcon
us0 f576 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f576 actionTable 'out=in;
' #txt
us0 f576 actionCode '//in.copyOn=false;
//panel.addFiles(in.returnedMessage.files);
panel.refreshActualSelectedFolder();
' #txt
us0 f576 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f576 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f576 2966 1260 36 24 5 -32 #rect
us0 f576 @|RichDialogProcessStepIcon #fIcon
us0 f576 -613726|-613726|-16777216 #nodeStyle
us0 f625 expr in #txt
us0 f625 outCond in.returnedMessage.documentOnServers.size()==in.copiedDocuments.size() #txt
us0 f625 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,22
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f625 2942 1176 2984 1260 #arcP
us0 f625 1 2984 1176 #addKink
us0 f625 1 0.36904761904761907 13 0 #arcLabel
us0 f714 expr in #txt
us0 f714 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,12
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f714 2914 1176 2864 1212 #arcP
us0 f714 1 2864 1176 #addKink
us0 f714 0 0.54 0 -6 #arcLabel
us0 f728 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f728 2974 1302 20 20 13 0 #rect
us0 f728 @|RichDialogProcessEndIcon #fIcon
us0 f729 expr out #txt
us0 f729 2984 1284 2984 1302 #arcP
us0 f730 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f730 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>file to edit
is a File?</name>
        <nameStyle>13,7,9
10,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f730 3042 170 28 28 18 -20 #rect
us0 f730 @|AlternativeIcon #fIcon
us0 f55 expr in #txt
us0 f55 outCond 'in.#fileToEdit ==null || !in.fileToEdit.isFile()' #txt
us0 f55 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f55 3042 184 2978 184 #arcP
us0 f55 0 0.390625 0 7 #arcLabel
us0 f738 actionDecl 'Number uniquePanelId;
' #txt
us0 f738 actionTable 'uniquePanelId=in.panelId;
' #txt
us0 f738 actionCode panel.fireDeleteSelectedFolder(uniquePanelId); #txt
us0 f738 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f738 fireEvent deleteSelectedFolder(Number) #txt
us0 f738 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteSelectedFolder@
APP</name>
        <nameStyle>22,7,9
3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f738 1494 572 36 24 -77 9 #rect
us0 f738 @|RichDialogFireEventIcon #fIcon
us0 f740 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f740 1502 638 20 20 13 0 #rect
us0 f740 @|RichDialogProcessEndIcon #fIcon
us0 f741 expr out #txt
us0 f741 1512 596 1512 638 #arcP
us0 f733 guid 12B9520DCB1E4F8E #txt
us0 f733 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f733 method _deleteSelectedDirectory() #txt
us0 f733 disableUIEvents false #txt
us0 f733 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_deleteSelectedDirectory()</name>
    </language>
</elementInfo>
' #txt
us0 f733 1502 526 20 20 -50 -30 #rect
us0 f733 @|RichDialogMethodStartIcon #fIcon
us0 f734 expr out #txt
us0 f734 1512 546 1512 572 #arcP
us0 f735 guid 12B9520FCCF3AD89 #txt
us0 f735 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f735 method _deleteSelectedFiles() #txt
us0 f735 disableUIEvents false #txt
us0 f735 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_deleteSelectedFiles()</name>
    </language>
</elementInfo>
' #txt
us0 f735 2214 302 20 20 -42 -33 #rect
us0 f735 @|RichDialogMethodStartIcon #fIcon
us0 f739 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f739 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>files selected?</name>
        <nameStyle>15,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f739 2210 346 28 28 -76 -25 #rect
us0 f739 @|AlternativeIcon #fIcon
us0 f743 expr out #txt
us0 f743 2224 322 2224 346 #arcP
us0 f744 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f744 2278 350 20 20 13 0 #rect
us0 f744 @|RichDialogProcessEndIcon #fIcon
us0 f745 expr in #txt
us0 f745 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f745 2238 360 2278 360 #arcP
us0 f745 0 0.5000000000000001 0 0 #arcLabel
us0 f742 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f742 2214 502 20 20 13 0 #rect
us0 f742 @|RichDialogProcessEndIcon #fIcon
us0 f748 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f748 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>occurred
in same FileManager?</name>
        <nameStyle>9,7,9
20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f748 2306 130 28 28 -49 3 #rect
us0 f748 @|AlternativeIcon #fIcon
us0 f751 expr in #txt
us0 f751 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f751 2320 158 2320 219 #arcP
us0 f51 guid 12B953A13635696B #txt
us0 f51 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f51 broadcast deleteSelectedFolder #txt
us0 f51 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f51 actionTable 'out=in;
out.responseBoolean=in.panelId==param.uniquePanelId;
' #txt
us0 f51 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteSelectedFolder</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f51 1678 526 20 20 -53 -27 #rect
us0 f51 @|RichDialogBroadcastStartIcon #fIcon
us0 f671 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f671 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>occurred
in same FileManager?</name>
        <nameStyle>29,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f671 1674 570 28 28 -71 -6 #rect
us0 f671 @|AlternativeIcon #fIcon
us0 f672 expr out #txt
us0 f672 1688 546 1688 570 #arcP
us0 f752 expr in #txt
us0 f752 outCond in.responseBoolean #txt
us0 f752 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f752 1702 584 1822 584 #arcP
us0 f752 0 0.4582734927181131 0 0 #arcLabel
us0 f753 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f753 1678 638 20 20 13 0 #rect
us0 f753 @|RichDialogProcessEndIcon #fIcon
us0 f754 expr in #txt
us0 f754 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f754 1688 598 1688 638 #arcP
us0 f755 expr in #txt
us0 f755 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f755 1466 224 1467 344 #arcP
us0 f755 1 1400 224 #addKink
us0 f755 2 1400 344 #addKink
us0 f755 1 0.3150434959606357 0 0 #arcLabel
us0 f103 guid 12B9AB2504BC39C2 #txt
us0 f103 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f103 method _close() #txt
us0 f103 disableUIEvents false #txt
us0 f103 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f103 inActionCode out.pathChooserReturn=""; #txt
us0 f103 outParameterDecl '<> result;
' #txt
us0 f103 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_close()</name>
        <nameStyle>8,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f103 814 798 20 20 13 0 #rect
us0 f103 @|RichDialogMethodStartIcon #fIcon
us0 f104 expr out #txt
us0 f104 824 818 733 888 #arcP
us0 f104 1 824 888 #addKink
us0 f104 1 0.10551555477041953 0 0 #arcLabel
us0 f369 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f369 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>samePanel?</name>
        <nameStyle>10,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f369 6474 162 28 28 14 0 #rect
us0 f369 @|AlternativeIcon #fIcon
us0 f483 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f483 6478 326 20 20 13 0 #rect
us0 f483 @|RichDialogProcessEndIcon #fIcon
us0 f489 expr in #txt
us0 f489 6474 176 6478 336 #arcP
us0 f489 1 6406 176 #addKink
us0 f489 2 6406 336 #addKink
us0 f489 1 0.3771217330143918 0 0 #arcLabel
us0 f521 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f521 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error?</name>
        <nameStyle>6,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f521 322 674 28 28 4 -24 #rect
us0 f521 @|AlternativeIcon #fIcon
us0 f526 expr out #txt
us0 f526 336 627 336 674 #arcP
us0 f539 guid 12BAC26573518ED3 #txt
us0 f539 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f539 broadcast SE_fileLocked #txt
us0 f539 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f539 actionTable 'out=in;
' #txt
us0 f539 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List l = param.panelIdAndDocumentOnServer;
in.updateList=false;
//ivy.log.info("System Event file locked "+l+" in panel id "+in.panelId);
if(l.size()==2 && l.get(0) instanceof Number && l.get(1) instanceof DocumentOnServer){
	
	Number n = l.get(0) as Number;
	if(n!= in.panelId){
		DocumentOnServer doc = l.get(1) as DocumentOnServer;
		String sep = (doc.path.contains("/"))?"/":"\\";
		String docPath = doc.path.substring(0,doc.path.lastIndexOf(sep));
		docPath = FileHandler.formatPathWithEndSeparator(docPath,false);
		if(in.selectedFolderOnServer.path !=null){
			String folderPath=FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path,false);
			if(folderPath.equalsIgnoreCase(docPath)){
				List<DocumentOnServer> docs = new List<DocumentOnServer>();
				docs.addAll(in.documentsInDb);
				in.documentsInDb.clear();
				for(int i=0; i<docs.size();i++){
					if(docs.get(i).filename.equalsIgnoreCase(doc.filename)){
						docs.get(i).setLocked("1");
						docs.get(i).lockingUserID=doc.lockingUserID;
						in.updateList=true;
						break;
					}
				}
				out.documentsInDb.addAll(docs);
			}
	
		}
	}
}

' #txt
us0 f539 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileLocked</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f539 6262 94 20 20 13 0 #rect
us0 f539 @|RichDialogBroadcastStartIcon #fIcon
us0 f541 expr out #txt
us0 f541 6272 114 6272 146 #arcP
us0 f269 guid 12BAE17CC203CFB6 #txt
us0 f269 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f269 broadcast errorOccurred #txt
us0 f269 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f269 actionTable 'out=in;
out.incomingErrorUtil=param.errorUtil;
' #txt
us0 f269 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>errorOccurred</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f269 6478 102 20 20 13 0 #rect
us0 f269 @|RichDialogBroadcastStartIcon #fIcon
us0 f408 expr out #txt
us0 f408 6488 122 6488 162 #arcP
us0 f537 guid 12BAE1E286DCC819 #txt
us0 f537 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f537 broadcast deleteSelectedFiles #txt
us0 f537 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f537 actionTable 'out=in;
out.responseBoolean=in.panelId==param.uniquePanelId;
' #txt
us0 f537 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteSelectedFiles</name>
        <nameStyle>19,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f537 2310 62 20 20 -34 11 #rect
us0 f537 @|RichDialogBroadcastStartIcon #fIcon
us0 f538 expr out #txt
us0 f538 2320 82 2320 130 #arcP
us0 f542 actionDecl 'Number uniquePanelId;
' #txt
us0 f542 actionTable 'uniquePanelId=in.panelId;
' #txt
us0 f542 actionCode panel.fireDeleteSelectedFiles(uniquePanelId); #txt
us0 f542 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f542 fireEvent deleteSelectedFiles(Number) #txt
us0 f542 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteSelectedFiles@
APP</name>
        <nameStyle>21,7,9
3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f542 2206 412 36 24 -67 15 #rect
us0 f542 @|RichDialogFireEventIcon #fIcon
us0 f543 expr in #txt
us0 f543 outCond panel.filesTable.getSelectedListEntries().size()>0 #txt
us0 f543 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f543 2224 374 2224 412 #arcP
us0 f544 expr out #txt
us0 f544 2224 436 2224 502 #arcP
us0 f535 guid 12BCF80819ADE64A #txt
us0 f535 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f535 broadcast SE_DocumentsUnlocked #txt
us0 f535 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f535 actionTable 'out=in;
' #txt
us0 f535 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(!in.documentsInDb.isEmpty()){
	boolean found = false;
	for(DocumentOnServer doc:param.documentsUnlocked){
		for(DocumentOnServer doc1:in.documentsInDb){
			if(doc1.path.compareToIgnoreCase(doc.path)==0 && doc1.locked=="1"){
				doc1.locked="0";
				found=true;
				break;
			}
		}
	}
	if(found){
		List<DocumentOnServer> l = new List<DocumentOnServer>();
		l.addAll(in.documentsInDb);
		in.documentsInDb.clear();
		out.documentsInDb.addAll(l);
	}
}' #txt
us0 f535 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_DocumentsUnlocked</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f535 6478 398 20 20 -66 -25 #rect
us0 f535 @|RichDialogBroadcastStartIcon #fIcon
us0 f536 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f536 6478 462 20 20 13 0 #rect
us0 f536 @|RichDialogProcessEndIcon #fIcon
us0 f548 guid 12BCF883DA0EA60A #txt
us0 f548 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f548 broadcast SE_FilesUnlocked #txt
us0 f548 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f548 actionTable 'out=in;
' #txt
us0 f548 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(!in.documentsInDb.isEmpty()){
	boolean found = false;
	for(java.io.File file:param.files){
		ivy.log.info("File unlocked "+file.getPath());
		for(DocumentOnServer doc1:in.documentsInDb){
			if(doc1.path.compareToIgnoreCase(in.fileManagementHandler.escapeBackSlash(file.getPath()))==0 && doc1.locked=="1"){
				doc1.locked="0";
				found=true;
				break;
			}
		}
	}
	if(found){
		List<DocumentOnServer> l = new List<DocumentOnServer>();
		l.addAll(in.documentsInDb);
		in.documentsInDb.clear();
		out.documentsInDb.addAll(l);
	}
}
' #txt
us0 f548 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_FilesUnlocked</name>
        <nameStyle>16,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f548 6630 398 20 20 13 0 #rect
us0 f548 @|RichDialogBroadcastStartIcon #fIcon
us0 f549 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f549 6630 454 20 20 13 0 #rect
us0 f549 @|RichDialogProcessEndIcon #fIcon
us0 f553 expr out #txt
us0 f553 6488 418 6488 462 #arcP
us0 f550 expr out #txt
us0 f550 6640 418 6640 454 #arcP
us0 f547 guid 12BD0130C642E9E5 #txt
us0 f547 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f547 broadcast SE_DocumentsDeleted #txt
us0 f547 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f547 actionTable 'out=in;
' #txt
us0 f547 actionCode 'in.responseBoolean=false;
if(param.DocumentsPathAndPanelID.size()==2 && param.DocumentsPathAndPanelID.get(0) instanceof String && param.DocumentsPathAndPanelID.get(1) instanceof Number){
 Number n = param.DocumentsPathAndPanelID.get(1) as Number;
	if(in.panelId != n){
		out.responseBoolean=in.selectedFolderOnServer.path.compareTo(param.DocumentsPathAndPanelID.get(0) as String)==0;
	}
	
}' #txt
us0 f547 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_DocumentsDeleted</name>
        <nameStyle>19,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f547 6478 558 20 20 13 0 #rect
us0 f547 @|RichDialogBroadcastStartIcon #fIcon
us0 f551 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f551 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Not the same Panel and same selectedFolder</name>
        <nameStyle>42,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f551 6474 610 28 28 14 0 #rect
us0 f551 @|AlternativeIcon #fIcon
us0 f552 expr out #txt
us0 f552 6488 578 6488 610 #arcP
us0 f555 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f555 actionTable 'out=in;
' #txt
us0 f555 actionCode panel.refreshActualSelectedFolder(); #txt
us0 f555 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f555 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshActualSelectedFolder</name>
        <nameStyle>27,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f555 6470 668 36 24 20 -2 #rect
us0 f555 @|RichDialogProcessStepIcon #fIcon
us0 f556 expr in #txt
us0 f556 outCond in.responseBoolean #txt
us0 f556 6488 638 6488 668 #arcP
us0 f557 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f557 6478 718 20 20 13 0 #rect
us0 f557 @|RichDialogProcessEndIcon #fIcon
us0 f558 expr out #txt
us0 f558 6488 692 6488 718 #arcP
us0 f559 expr in #txt
us0 f559 6474 624 6478 728 #arcP
us0 f559 1 6430 624 #addKink
us0 f559 2 6430 728 #addKink
us0 f559 1 0.3748371952672486 0 0 #arcLabel
us0 f560 guid 12BD91649B69AABB #txt
us0 f560 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f560 method _copyFiles() #txt
us0 f560 disableUIEvents false #txt
us0 f560 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f560 outParameterDecl '<> result;
' #txt
us0 f560 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_copyFiles()</name>
        <nameStyle>12,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f560 2510 814 20 20 -52 -28 #rect
us0 f560 @|RichDialogMethodStartIcon #fIcon
us0 f563 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f563 actionTable 'out=in;
' #txt
us0 f563 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterAnswer;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.copiedDocuments = new List<DocumentOnServer>();
List<DocumentOnServer> selected = new List<DocumentOnServer>();
List<DocumentOnServer> rejected = new List<DocumentOnServer>();

selected.addAll(panel.filesTable.selectedListEntries);
if(in.#configurationController.#documentFilter!=null) {
	for(DocumentOnServer doc: selected){
		DocumentFilterAnswer answer = in.configurationController.documentFilter.allowAction(doc,ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterActionEnum.COPY);
		if(answer.allow) {
			in.copiedDocuments.add(doc);
		}else {
			rejected.add(doc);
		}
	}
}else {
	in.copiedDocuments.addAll(selected);
}
if(!rejected.isEmpty()) {
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=false;
	in.errorUtil.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/documentFilter/copyActionNotAllowForTheseFiles")+"<br>";
	for(DocumentOnServer doc: rejected){ 
		in.errorUtil.message+="<br>"+doc.getFilename();
	}
	in.errorUtil.message+="</html>";
	in.dialogParam.windowTitle = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/actionVorbidden");
	panel.fireErrorOccurred(in.errorUtil);
}
if(!in.copiedDocuments.isEmpty()){
	in.copyOn=true;
}else{
	in.copyOn=false;
}' #txt
us0 f563 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f563 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f563 2502 860 36 24 20 -2 #rect
us0 f563 @|RichDialogProcessStepIcon #fIcon
us0 f564 expr out #txt
us0 f564 2520 834 2520 860 #arcP
us0 f562 expr out #txt
us0 f562 2538 872 2566 872 #arcP
us0 f565 guid 12BD9229CD1237A6 #txt
us0 f565 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f565 method _pasteFiles() #txt
us0 f565 disableUIEvents false #txt
us0 f565 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_pasteFiles()</name>
    </language>
</elementInfo>
' #txt
us0 f565 2654 998 20 20 13 0 #rect
us0 f565 @|RichDialogMethodStartIcon #fIcon
us0 f566 actionDecl 'Number uniquePanelId;
' #txt
us0 f566 actionTable 'uniquePanelId=in.panelId;
' #txt
us0 f566 actionCode panel.firePasteFiles(uniquePanelId); #txt
us0 f566 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f566 fireEvent pasteFiles(Number) #txt
us0 f566 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>pasteFiles@APP</name>
        <nameStyle>14,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f566 2646 1044 36 24 -31 8 #rect
us0 f566 @|RichDialogFireEventIcon #fIcon
us0 f567 expr out #txt
us0 f567 2664 1018 2664 1044 #arcP
us0 f568 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f568 2654 1094 20 20 13 0 #rect
us0 f568 @|RichDialogProcessEndIcon #fIcon
us0 f569 expr out #txt
us0 f569 2664 1068 2664 1094 #arcP
us0 f571 guid 12BD923171D4E876 #txt
us0 f571 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f571 broadcast pasteFiles #txt
us0 f571 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f571 actionTable 'out=in;
out.samePanelFlag=in.panelId==param.uniquePanelId;
' #txt
us0 f571 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>pasteFiles</name>
        <nameStyle>10,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f571 2782 822 20 20 -26 -23 #rect
us0 f571 @|RichDialogBroadcastStartIcon #fIcon
us0 f572 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f572 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>same panel?</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f572 2778 866 28 28 -33 14 #rect
us0 f572 @|AlternativeIcon #fIcon
us0 f573 expr out #txt
us0 f573 2792 842 2792 866 #arcP
us0 f626 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f626 actionTable 'out=in;
' #txt
us0 f626 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.responseBoolean=true;
if(in.#selectedFolderOnServer == null || in.selectedFolderOnServer.path.trim().equals("")){
	in.copyOn=false;
}
if(in.copiedDocuments.size()<=0){
	in.copyOn=false;
}' #txt
us0 f626 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f626 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f626 2854 868 36 24 20 -2 #rect
us0 f626 @|RichDialogProcessStepIcon #fIcon
us0 f627 expr in #txt
us0 f627 outCond in.samePanelFlag #txt
us0 f627 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f627 2806 880 2854 880 #arcP
us0 f633 expr out #txt
us0 f633 2890 880 2914 880 #arcP
us0 f633 0 0.6865282350950633 0 0 #arcLabel
us0 f646 guid 12BDA703390C87EE #txt
us0 f646 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f646 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f646 actionTable 'out=in;
' #txt
us0 f646 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>renameFile</name>
        <nameStyle>10,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f646 3550 822 20 20 -29 -26 #rect
us0 f646 @|RichDialogProcessStartIcon #fIcon
us0 f679 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f679 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check selected Doc</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f679 3546 874 28 28 -4 -23 #rect
us0 f679 @|AlternativeIcon #fIcon
us0 f680 expr out #txt
us0 f680 3560 842 3560 874 #arcP
us0 f681 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f681 3670 878 20 20 13 0 #rect
us0 f681 @|RichDialogProcessEndIcon #fIcon
us0 f683 expr in #txt
us0 f683 outCond 'in.#selectedDocument==null' #txt
us0 f683 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NULL</name>
        <nameStyle>4,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f683 3574 888 3670 888 #arcP
us0 f715 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f715 actionTable 'out=in;
' #txt
us0 f715 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

try{
		in.returnedMessage= in.fileManagementHandler.renameDocumentOnServer(in.selectedDocument,in.stringVariable);
		if(in.#returnedMessage.#documentOnServer!=null){
			panel.fireSE_fileRenamed([in.returnedMessage.documentOnServer,in.selectedFolderOnServer, in.panelId]);
		}
		
		if(in.returnedMessage.type==FileHandler.ERROR_MESSAGE){
			in.errorUtil.panelId = in.panelId;
			in.errorUtil.errorOccurred=true;
			in.errorUtil.throwable = null;
			in.errorUtil.message =in.returnedMessage.text;
			panel.fireErrorOccurred(in.errorUtil);
		}
		panel.refreshActualSelectedFolder();
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f715 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f715 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>try
to rename</name>
        <nameStyle>4,7,9
9,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f715 3542 1220 36 24 23 -18 #rect
us0 f715 @|RichDialogProcessStepIcon #fIcon
us0 f715 -613726|-613726|-16777216 #nodeStyle
us0 f749 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f749 3686 1030 20 20 13 0 #rect
us0 f749 @|RichDialogProcessEndIcon #fIcon
us0 f756 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f756 3550 1342 20 20 13 0 #rect
us0 f756 @|RichDialogProcessEndIcon #fIcon
us0 f757 expr out #txt
us0 f757 3560 1244 3560 1342 #arcP
us0 f758 guid 12BDAAC2C5313D1E #txt
us0 f758 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f758 broadcast SE_fileRenamed #txt
us0 f758 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f758 actionTable 'out=in;
' #txt
us0 f758 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

try{
if(param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.size()==3 &&
param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(0) instanceof DocumentOnServer &&
param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(1) instanceof FolderOnServer &&
param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(2) instanceof Number){
	Number n = param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(2) as Number;
	FolderOnServer dir = param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(1) as FolderOnServer;
	
	if(n!= in.panelId && dir.path.compareTo(in.selectedFolderOnServer.path)==0){
		//ivy.log.error("test1");
		DocumentOnServer doc = param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(0) as DocumentOnServer;
		boolean found = false;
		for(DocumentOnServer d: in.documentsInDb)
		{
			if(d.fileID.compareTo(doc.fileID)==0){
				//ivy.log.error("test2");
				d.filename = doc.filename;
				d.path = doc.path;
				found=true;
				break;
			}
		}
		if(found){
			List<DocumentOnServer> l = new List<DocumentOnServer>();
			l.addAll(in.documentsInDb);
			in.documentsInDb.clear();
			out.documentsInDb.addAll(l);
			//ivy.log.error("test3");
		}
	}
	
	
}
}catch(Throwable t){
	ivy.log.error("Error in SE_fileRename",t);
	}' #txt
us0 f758 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileRenamed</name>
        <nameStyle>14,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f758 6262 390 20 20 13 0 #rect
us0 f758 @|RichDialogBroadcastStartIcon #fIcon
us0 f759 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f759 6262 454 20 20 13 0 #rect
us0 f759 @|RichDialogProcessEndIcon #fIcon
us0 f760 expr out #txt
us0 f760 6272 410 6272 454 #arcP
us0 f761 targetWindow NEW:card: #txt
us0 f761 targetDisplay TOP #txt
us0 f761 richDialogId ch.ivyteam.ivy.addons.filemanager.FileNameDialog #txt
us0 f761 startMethod start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,ch.ivyteam.ivy.addons.filemanager.DocumentOnServer) #txt
us0 f761 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f761 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController configurationController, ch.ivyteam.ivy.addons.filemanager.DocumentOnServer documentOnServer> param;' #txt
us0 f761 requestMappingAction 'param.configurationController=in.configurationController;
param.documentOnServer=in.selectedDocument;
' #txt
us0 f761 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f761 responseMappingAction 'out=in;
out.stringVariable=result.fileName;
' #txt
us0 f761 windowConfiguration '{/title "<%=in.windowTitle%>"/width 450 /height 300 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f761 isAsynch false #txt
us0 f761 isInnerRd true #txt
us0 f761 userContext '* ' #txt
us0 f761 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask for new Name</name>
        <nameStyle>16,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f761 3542 1124 36 24 -112 5 #rect
us0 f761 @|RichDialogIcon #fIcon
us0 f761 -985168|-1|-16777216 #nodeStyle
us0 f763 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f763 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f763 3546 1170 28 28 14 0 #rect
us0 f763 @|AlternativeIcon #fIcon
us0 f764 expr out #txt
us0 f764 3560 1148 3560 1170 #arcP
us0 f716 expr in #txt
us0 f716 outCond in.stringVariable.trim().length()>0 #txt
us0 f716 3560 1198 3560 1220 #arcP
us0 f767 guid 12BDDCBC2845D8CB #txt
us0 f767 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f767 method _renameFile() #txt
us0 f767 disableUIEvents false #txt
us0 f767 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_renameFile()</name>
    </language>
</elementInfo>
' #txt
us0 f767 3270 822 20 20 -31 -26 #rect
us0 f767 @|RichDialogMethodStartIcon #fIcon
us0 f768 actionDecl 'Number uniquePanelId;
' #txt
us0 f768 actionTable 'uniquePanelId=in.panelId;
' #txt
us0 f768 actionCode panel.fireSE_renameFile(uniquePanelId); #txt
us0 f768 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f768 fireEvent SE_renameFile(Number) #txt
us0 f768 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_renameFile</name>
        <nameStyle>13,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f768 3262 876 36 24 20 -2 #rect
us0 f768 @|RichDialogFireEventIcon #fIcon
us0 f769 expr out #txt
us0 f769 3280 842 3280 876 #arcP
us0 f771 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f771 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>same Panel?</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f771 3418 874 28 28 -9 7 #rect
us0 f771 @|AlternativeIcon #fIcon
us0 f773 expr in #txt
us0 f773 outCond in.samePanelFlag #txt
us0 f773 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f773 3446 888 3546 888 #arcP
us0 f774 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f774 3422 926 20 20 13 0 #rect
us0 f774 @|RichDialogProcessEndIcon #fIcon
us0 f775 expr in #txt
us0 f775 3432 902 3432 926 #arcP
us0 f776 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f776 3270 926 20 20 13 0 #rect
us0 f776 @|RichDialogProcessEndIcon #fIcon
us0 f777 expr out #txt
us0 f777 3280 900 3280 926 #arcP
us0 f770 guid 12BDDD0C5A62A45F #txt
us0 f770 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f770 broadcast SE_renameFile #txt
us0 f770 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f770 actionTable 'out=in;
out.samePanelFlag=in.panelId==param.uniquePanelId;
' #txt
us0 f770 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_renameFile</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f770 3422 822 20 20 -40 -25 #rect
us0 f770 @|RichDialogBroadcastStartIcon #fIcon
us0 f772 expr out #txt
us0 f772 3432 842 3432 874 #arcP
us0 f778 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f778 actionTable 'out=in;
' #txt
us0 f778 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/renameFile"); #txt
us0 f778 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f778 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>wintitle</name>
        <nameStyle>8,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f778 3542 1084 36 24 -67 -10 #rect
us0 f778 @|RichDialogProcessStepIcon #fIcon
us0 f762 expr out #txt
us0 f762 3560 1108 3560 1124 #arcP
us0 f781 guid 12BDEFBD2E2716AF #txt
us0 f781 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f781 broadcast SE_FilesDeleted #txt
us0 f781 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f781 actionTable 'out=in;
' #txt
us0 f781 actionCode '
if(param.applicationName_panelID_dirPath.size()==3){
	try{
		if(param.applicationName_panelID_dirPath.get(0).compareTo(ivy.case.getApplication().getName())==0 
			&& param.applicationName_panelID_dirPath.get(1).compareTo(in.panelId.toString())!=0
			&& param.applicationName_panelID_dirPath.get(2).compareTo(in.selectedFolderOnServer.path)==0){
			panel.refreshActualSelectedFolder();
		}
	}catch(Throwable t){
			//do nothing
	}
}' #txt
us0 f781 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_FilesDeleted</name>
        <nameStyle>15,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f781 6670 110 20 20 -35 -25 #rect
us0 f781 @|RichDialogBroadcastStartIcon #fIcon
us0 f782 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f782 6670 174 20 20 13 0 #rect
us0 f782 @|RichDialogProcessEndIcon #fIcon
us0 f783 expr out #txt
us0 f783 6680 130 6680 174 #arcP
us0 f784 guid 12C3A3659EEFBE88 #txt
us0 f784 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f784 method enableRoundCornerIconsMode(Boolean) #txt
us0 f784 disableUIEvents false #txt
us0 f784 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean enable> param = methodEvent.getInputArguments();
' #txt
us0 f784 inActionCode 'out.roundedCornerIconsMode = param.enable;' #txt
us0 f784 outParameterDecl '<> result;
' #txt
us0 f784 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>enableRoundCornerIconsMode(Boolean)</name>
        <nameStyle>35,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f784 3694 1150 20 20 -65 -31 #rect
us0 f784 @|RichDialogMethodStartIcon #fIcon
us0 f785 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f785 3694 1214 20 20 13 0 #rect
us0 f785 @|RichDialogProcessEndIcon #fIcon
us0 f786 expr out #txt
us0 f786 3704 1170 3704 1214 #arcP
us0 f787 guid 12C3A3AC47962019 #txt
us0 f787 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f787 method enableReadOnlyMode(Boolean) #txt
us0 f787 disableUIEvents false #txt
us0 f787 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean enable> param = methodEvent.getInputArguments();
' #txt
us0 f787 inActionCode 'out.readOnlyMode = param.enable;' #txt
us0 f787 outParameterDecl '<> result;
' #txt
us0 f787 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>enableReadOnlyMode(Boolean)</name>
        <nameStyle>27,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f787 3878 1150 20 20 -95 10 #rect
us0 f787 @|RichDialogMethodStartIcon #fIcon
us0 f788 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f788 3878 1214 20 20 13 0 #rect
us0 f788 @|RichDialogProcessEndIcon #fIcon
us0 f789 expr out #txt
us0 f789 3888 1170 3888 1214 #arcP
us0 f790 actionDecl 'Number numberOfFilesInSelectedDirectory;
' #txt
us0 f790 actionTable 'numberOfFilesInSelectedDirectory=in.documentsInDb.size();
' #txt
us0 f790 actionCode panel.fireFilesAdded(numberOfFilesInSelectedDirectory); #txt
us0 f790 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f790 fireEvent filesAdded(Number) #txt
us0 f790 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesAdded@SUBSC</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f790 3686 1436 36 24 20 -2 #rect
us0 f790 @|RichDialogFireEventIcon #fIcon
us0 f791 expr out #txt
us0 f791 3704 1396 3704 1436 #arcP
us0 f174 expr out #txt
us0 f174 3704 1460 3704 1507 #arcP
us0 f792 actionDecl 'Number numberOfFilesInSelectedDirectory;
' #txt
us0 f792 actionTable 'numberOfFilesInSelectedDirectory=in.documentsInDb.size();
' #txt
us0 f792 actionCode panel.fireFilesDeleted(numberOfFilesInSelectedDirectory); #txt
us0 f792 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f792 fireEvent filesDeleted(Number) #txt
us0 f792 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesDeleted
@SUBSC</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f792 5398 588 36 24 -28 17 #rect
us0 f792 @|RichDialogFireEventIcon #fIcon
us0 f793 expr out #txt
us0 f793 5362 600 5398 600 #arcP
us0 f580 expr out #txt
us0 f580 5434 600 5475 600 #arcP
us0 f794 actionDecl 'Number numberOfFilesInSelectedDirectory;
' #txt
us0 f794 actionTable 'numberOfFilesInSelectedDirectory=in.documentsInDb.size();
' #txt
us0 f794 actionCode panel.fireFilesAdded(numberOfFilesInSelectedDirectory); #txt
us0 f794 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f794 fireEvent filesAdded(Number) #txt
us0 f794 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesAdded@SUBSC</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f794 2350 1428 36 24 20 -2 #rect
us0 f794 @|RichDialogFireEventIcon #fIcon
us0 f795 expr out #txt
us0 f795 2368 1404 2368 1428 #arcP
us0 f64 expr out #txt
us0 f64 2368 1452 2368 1475 #arcP
us0 f796 actionDecl 'Number numberOfFilesInSelectedDirectory;
' #txt
us0 f796 actionTable 'numberOfFilesInSelectedDirectory=in.documentsInDb.size();
' #txt
us0 f796 actionCode panel.fireFilesDeleted(numberOfFilesInSelectedDirectory); #txt
us0 f796 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f796 fireEvent filesDeleted(Number) #txt
us0 f796 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesDeleted@SUBSC</name>
        <nameStyle>18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f796 2478 636 36 24 20 -2 #rect
us0 f796 @|RichDialogFireEventIcon #fIcon
us0 f797 expr out #txt
us0 f797 2496 620 2496 636 #arcP
us0 f50 expr out #txt
us0 f50 2496 660 2496 683 #arcP
us0 f798 guid 12EAE9746537EE44 #txt
us0 f798 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f798 method uploadFiles(List<String>,String) #txt
us0 f798 disableUIEvents false #txt
us0 f798 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.lang.String> filesPath,java.lang.String targetPath> param = methodEvent.getInputArguments();
' #txt
us0 f798 inParameterMapAction 'out.filesToUpload=param.filesPath;
' #txt
us0 f798 inActionCode 'if(param.targetPath!=null){
	out.DnDDestinationPath = param.targetPath.replace("\\","/");
}' #txt
us0 f798 outParameterDecl '<List<java.lang.String> filesUpload> result;
' #txt
us0 f798 outParameterMapAction 'result.filesUpload=in.filesToUpload;
' #txt
us0 f798 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>uploadFiles(List&lt;String&gt;,String)</name>
        <nameStyle>32,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f798 5718 710 20 20 -82 -32 #rect
us0 f798 @|RichDialogMethodStartIcon #fIcon
us0 f824 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f824 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>overwrite?</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f824 5714 1522 28 28 13 -19 #rect
us0 f824 @|AlternativeIcon #fIcon
us0 f821 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f821 actionTable 'out=in;
' #txt
us0 f821 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.docsToOverwrite.clear();
List<DocumentOnServer> l = in.fileManagementHandler.getDocumentsInPath(in.DnDDestinationPath,false);

for(String s: in.filesToUpload){
	for(DocumentOnServer doc:l){
		if(doc.getFilename().equalsIgnoreCase(new java.io.File(s.toLowerCase()).getName())){
			in.docsToOverwrite.add(doc);
			break;
		}
	}
	
}' #txt
us0 f821 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f821 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get the 
Files to overwrite in the rest
of the files to upload</name>
        <nameStyle>9,7
53,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f821 5710 1340 36 24 20 -17 #rect
us0 f821 @|RichDialogProcessStepIcon #fIcon
us0 f821 -5972572|-5972572|-16777216 #nodeStyle
us0 f801 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f801 5718 1814 20 20 13 0 #rect
us0 f801 @|RichDialogProcessEndIcon #fIcon
us0 f830 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f830 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>still some files?</name>
        <nameStyle>17,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f830 5714 1714 28 28 -48 -24 #rect
us0 f830 @|AlternativeIcon #fIcon
us0 f826 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f826 actionTable 'out=in;
' #txt
us0 f826 actionCode 'if(!in.configurationController.activateFileVersioningExtended){
	try{
		in.fileManagementHandler.deleteDocumentOnServers(in.docsToOverwrite);
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
}' #txt
us0 f826 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f826 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>remove files from 
FileManagement
persistency system
ONLY IF versioning
extended not active</name>
        <nameStyle>34,7
57,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f826 5630 1580 36 24 -42 11 #rect
us0 f826 @|RichDialogProcessStepIcon #fIcon
us0 f826 -613726|-613726|-16777216 #nodeStyle
us0 f836 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f836 6054 1286 20 20 13 0 #rect
us0 f836 @|RichDialogProcessEndIcon #fIcon
us0 f805 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f805 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is there some files
to overwrite?</name>
        <nameStyle>20,7
13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f805 5714 1114 28 28 -109 -15 #rect
us0 f805 @|AlternativeIcon #fIcon
us0 f803 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f803 actionTable 'out=in;
' #txt
us0 f803 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;


List<DocumentOnServer> l = in.fileManagementHandler.getDocumentsInPath(in.DnDDestinationPath,false);
List<String> files = new List<String>();
for(DocumentOnServer doc : l){
	files.add(doc.filename.toLowerCase());
}


for(String s: in.filesToUpload){
	if(files.contains(new java.io.File(s.toLowerCase()).getName())){
		in.filesToOverwrite.add(new java.io.File(s));
	}
}' #txt
us0 f803 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f803 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if Files to be uploaded will overwrite 
existing files</name>
        <nameStyle>46,7
14,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f803 5710 1060 36 24 23 -19 #rect
us0 f803 @|RichDialogProcessStepIcon #fIcon
us0 f803 -613726|-613726|-16777216 #nodeStyle
us0 f807 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f807 actionTable 'out=in;
' #txt
us0 f807 actionCode '
List<java.io.File> files = new List<java.io.File>();
for(String s : in.filesToUpload){
	files.add(new java.io.File(s));
}
if(in.#uploadHandler != null){
	if(in.configurationController.maxFileUploadSize<=0)
	{
		in.uploadHandler.uploadPreparedFiles(files);
	}else{
		in.uploadHandler.uploadPreparedFiles(files,in.configurationController.maxFileUploadSize);
	}

}

' #txt
us0 f807 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f807 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload the files</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f807 5454 1772 36 24 -112 -11 #rect
us0 f807 @|RichDialogProcessStepIcon #fIcon
us0 f809 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f809 actionTable 'out=in;
' #txt
us0 f809 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles");
if(in.configurationController.activateFileVersioningExtended){
	if(in.docsToOverwrite.size()==1){
		in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteFileCreatingNewVersion").replaceFirst("\\[NAME\\]",in.docsToOverwrite.get(0).getFilename());
	}else{
			String s="<br>";
			for(DocumentOnServer doc:in.docsToOverwrite){
				s+="- "+doc.getFilename()+"<br>";
			}
			in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteFilesCreatingNewVersions").replaceFirst("\\[NAME\\]",s);
		}
}else{
	in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFiles").replaceFirst("</html>","")+"<br>";
	for(DocumentOnServer doc : in.docsToOverwrite){
		in.dialogParam.message+="<i>"+doc.filename+"</i><br>";
	}
}

in.dialogParam.message+="</html>";
' #txt
us0 f809 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f809 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>message to ask
the user if he wants to 
overwrite the existing files.</name>
        <nameStyle>15,7
54,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f809 5710 1436 36 24 27 -5 #rect
us0 f809 @|RichDialogProcessStepIcon #fIcon
us0 f813 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f813 actionTable 'out=in;
' #txt
us0 f813 actionCode 'out.returnedMessage.text="";
panel.ProgressBar.setIndeterminate(true);
out.progressText="";' #txt
us0 f813 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f813 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set Progressbar
displayed message</name>
        <nameStyle>16,7
17,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f813 5454 1716 36 24 20 -2 #rect
us0 f813 @|RichDialogProcessStepIcon #fIcon
us0 f817 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f817 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>are there some
files still to upload?</name>
        <nameStyle>15,7
22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f817 5714 1282 28 28 24 -17 #rect
us0 f817 @|AlternativeIcon #fIcon
us0 f799 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f799 actionTable 'out=in;
' #txt
us0 f799 actionCode 'if(in.DnDDestinationPath.trim().equals("") || !in.DnDDestinationPath.trim().startsWith(in.configurationController.rootPath)){
	in.DnDDestinationPath = in.selectedFolderOnServer.path;
	if(!in.configurationController.storeFilesInDB)
		{//we set the serverPath just in case of storage on Server fileSystem
			in.uploadHandler.setServerPath(in.DnDDestinationPath);

		}else{
			in.uploadHandler.setFilesDestinationPathForDB(in.DnDDestinationPath);
		}
}
if(in.DnDDestinationPath.trim().equals("")){
	in.DnDDestinationPath = in.configurationController.rootPath;
	if(!in.configurationController.storeFilesInDB)
		{//we set the serverPath just in case of storage on Server fileSystem
			in.uploadHandler.setServerPath(in.DnDDestinationPath);

		}else{
			in.uploadHandler.setFilesDestinationPathForDB(in.DnDDestinationPath);
		}
}

if(!in.configurationController.storeFilesInDB){
	if(!new java.io.File(in.DnDDestinationPath.trim()).isDirectory()){
		ivy.log.info("destination path not an existing directory");
		out.DnDDestinationPath = in.selectedFolderOnServer.path;
	}else if(!in.DnDDestinationPath.startsWith(in.serverPath)){
		ivy.log.info("destination path not in the server path");
		out.DnDDestinationPath = in.selectedFolderOnServer.path;
	}
}
in.filesToOverwrite.clear();' #txt
us0 f799 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f799 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set DnD destinationPath
if not setted
or not correct</name>
        <nameStyle>24,7
28,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f799 5710 812 36 24 22 -16 #rect
us0 f799 @|RichDialogProcessStepIcon #fIcon
us0 f815 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f815 actionTable 'out=in;
' #txt
us0 f815 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileSecurityHandler;

in.canUserOverwriteFilesByUpload = true;
if(in.configurationController.activateSecurity)
{
	try{
		AbstractFileSecurityHandler sech = in.fileManagementHandler as AbstractFileSecurityHandler;
		in.canUserOverwriteFilesByUpload = sech.getDirectoryWithPath(in.DnDDestinationPath).canUserUpdateFiles;
	}catch(Throwable t){
		ivy.log.error(t.getMessage(),t);
	}
}

List<DocumentOnServer> l = in.fileManagementHandler.getDocumentsInPath(in.DnDDestinationPath,false);

in.filesToOverwrite.clear();

List<String> filesLocked = new List<String>();
for(DocumentOnServer doc : l){
	for(String p : in.filesToUpload){
			if(new java.io.File(p).getName().equalsIgnoreCase(doc.filename) && (!in.canUserOverwriteFilesByUpload || doc.getLocked().equals("1"))){
				filesLocked.add(p);
			}
	}
	
}

out.filesToUpload=in.filesToUpload.removeAll(filesLocked);
in.dialogParam.outputBoolean=false;
if(!filesLocked.isEmpty()){
	in.dialogParam.outputBoolean=true;
	in.dialogParam.message = in.canUserOverwriteFilesByUpload ? 
			ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filesNotUploadedBecauseLockedExt") 
			: ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filesNotUploadedBecauseOverwriteFilesAndNoRight");
	if(!in.dialogParam.message.startsWith("<html>")){
		in.dialogParam.message="<html>"+in.dialogParam.message;
	}
	String s="";
	for(int i=0; i<filesLocked.size();i++){
		s+="<br> - "+new java.io.File(filesLocked.get(i)).getName();
	}
	in.dialogParam.message=in.dialogParam.message.replaceFirst("\\[NAME\\]",s);
}
' #txt
us0 f815 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f815 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exclude the locked files
&amp; if security the file the user
cannot override</name>
        <nameStyle>72,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f815 5710 1164 36 24 30 -25 #rect
us0 f815 @|RichDialogProcessStepIcon #fIcon
us0 f828 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f828 actionTable 'out=in;
' #txt
us0 f828 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

List<String> files = new List<String>();

for(String s : in.filesToUpload){
	boolean found = false;
	for(DocumentOnServer doc: in.docsToOverwrite){
		if(new java.io.File(s).getName().equalsIgnoreCase(doc.getFilename())){
			found=true;
			break;
		}
	}
	if(!found){
		files.add(s);
	}
}

in.filesToUpload.clear();
in.filesToUpload.addAll(files);' #txt
us0 f828 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f828 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exclude the files
from upload process</name>
        <nameStyle>18,7
19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f828 5806 1580 36 24 23 -18 #rect
us0 f828 @|RichDialogProcessStepIcon #fIcon
us0 f828 -5972572|-5972572|-16777216 #nodeStyle
us0 f806 expr out #txt
us0 f806 5728 1084 5728 1114 #arcP
us0 f802 expr out #txt
us0 f802 5472 1796 5718 1824 #arcP
us0 f802 1 5472 1824 #addKink
us0 f802 1 0.16296263565070052 0 0 #arcLabel
us0 f808 expr out #txt
us0 f808 5472 1740 5472 1772 #arcP
us0 f816 expr in #txt
us0 f816 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f816 5728 1142 5728 1164 #arcP
us0 f822 expr in #txt
us0 f822 outCond !in.filesToUpload.isEmpty() #txt
us0 f822 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f822 5728 1310 5728 1340 #arcP
us0 f822 0 0.5021931863115551 0 0 #arcLabel
us0 f827 expr in #txt
us0 f827 outCond in.dialogParam.clickedButton.equals(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f827 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f827 5714 1536 5648 1580 #arcP
us0 f827 1 5648 1536 #addKink
us0 f827 1 0.21197576845348934 0 0 #arcLabel
us0 f829 expr in #txt
us0 f829 5742 1536 5824 1580 #arcP
us0 f829 1 5824 1536 #addKink
us0 f829 1 0.9348530879222564 0 0 #arcLabel
us0 f831 expr out #txt
us0 f831 5824 1604 5742 1728 #arcP
us0 f831 1 5824 1728 #addKink
us0 f831 0 0.7469119625319505 0 0 #arcLabel
us0 f838 guid 12EAEBDC835C6D82 #txt
us0 f838 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f838 method selectTreePath(com.ulcjava.base.application.tree.TreePath) #txt
us0 f838 disableUIEvents false #txt
us0 f838 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<com.ulcjava.base.application.tree.TreePath treePathToBeSelected> param = methodEvent.getInputArguments();
' #txt
us0 f838 inParameterMapAction 'out.selectedTreePath=param.treePathToBeSelected;
' #txt
us0 f838 outParameterDecl '<> result;
' #txt
us0 f838 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selectTreePath(TreePath)</name>
        <nameStyle>24,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f838 1942 1006 20 20 13 0 #rect
us0 f838 @|RichDialogMethodStartIcon #fIcon
us0 f839 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f839 actionTable 'out=in;
' #txt
us0 f839 actionCode 'panel.ordnersTree.setSelectionPath(in.selectedTreePath);
List paths = in.selectedTreePath.getPath();
in.selectedFolderOnServer.path = in.configurationController.rootPath.replace("\\","/");
if(!in.selectedFolderOnServer.path.endsWith("/")){
	in.selectedFolderOnServer.path+="/";
}
if(paths.size()>1){
	for(int i =1; i<paths.size();i++){
		in.selectedFolderOnServer.path+=paths.get(i).toString()+"/";
	}
	ivy.log.info("New selected folder: "+in.selectedFolderOnServer.path);
	panel.refreshActualSelectedFolder();
}' #txt
us0 f839 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f839 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set selectedFolderOnServer
and refresh panel</name>
        <nameStyle>44,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f839 1934 1060 36 24 20 -2 #rect
us0 f839 @|RichDialogProcessStepIcon #fIcon
us0 f840 expr out #txt
us0 f840 1952 1026 1952 1060 #arcP
us0 f841 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f841 1942 1134 20 20 13 0 #rect
us0 f841 @|RichDialogProcessEndIcon #fIcon
us0 f842 expr out #txt
us0 f842 1952 1084 1952 1134 #arcP
us0 f843 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f843 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>are there some 
files to overwrite?</name>
        <nameStyle>35,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f843 5714 1386 28 28 16 -4 #rect
us0 f843 @|AlternativeIcon #fIcon
us0 f844 expr out #txt
us0 f844 5728 1364 5728 1386 #arcP
us0 f810 expr in #txt
us0 f810 5728 1414 5728 1436 #arcP
us0 f850 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f850 actionTable 'out=in;
' #txt
us0 f850 actionCode panel.refreshActualSelectedFolder(); #txt
us0 f850 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f850 2414 540 36 24 20 -2 #rect
us0 f850 @|RichDialogProcessStepIcon #fIcon
us0 f851 expr in #txt
us0 f851 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f851 2482 552 2450 552 #arcP
us0 f851 0 0.10566879621747367 0 0 #arcLabel
us0 f149 expr out #txt
us0 f149 2432 564 2483 696 #arcP
us0 f149 1 2432 696 #addKink
us0 f149 0 0.7241891164372967 0 0 #arcLabel
us0 f780 guid 12F441743D74EEEA #txt
us0 f780 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f780 method _changeUploadButtonState(Boolean) #txt
us0 f780 disableUIEvents false #txt
us0 f780 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean enabled> param = methodEvent.getInputArguments();
' #txt
us0 f780 inActionCode 'panel.uploadMenuItem.setEnabled(param.enabled);
panel.uploadButton.setEnabled(param.enabled);
panel.upload2Button.setEnabled(param.enabled);
out.fileUploadInProgress=!param.enabled;
' #txt
us0 f780 outParameterDecl '<> result;
' #txt
us0 f780 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_changeUploadButtonState(Boolean)</name>
        <nameStyle>33,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f780 5014 438 20 20 -93 -28 #rect
us0 f780 @|RichDialogMethodStartIcon #fIcon
us0 f852 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f852 5014 478 20 20 13 0 #rect
us0 f852 @|RichDialogProcessEndIcon #fIcon
us0 f853 expr out #txt
us0 f853 5024 458 5024 478 #arcP
us0 f854 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f854 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check if an upload 
is already running</name>
        <nameStyle>38,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f854 5714 762 28 28 -119 -17 #rect
us0 f854 @|AlternativeIcon #fIcon
us0 f855 expr out #txt
us0 f855 5728 730 5728 762 #arcP
us0 f800 expr in #txt
us0 f800 outCond !in.fileUploadInProgress #txt
us0 f800 5728 790 5728 812 #arcP
us0 f862 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f862 actionTable 'out=in;
' #txt
us0 f862 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;


in.progressUnit=-1;

// Build the tree from the in.serverPath entry point
try{
	in.folderTree = new Tree();
	in.folderTree = in.fileManagementHandler.getDirectoryTree(in.configurationController.rootPath);
	in.selectedFolderOnServer = in.folderTree.value as FolderOnServer;
	//no security but some restrictions apply to the root directory
	panel.deleteDirectoryMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:true;
	panel.renameDirMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:true;
	panel.deleteDirButton.enabled=in.selectedFolderOnServer.isRoot?false:true;
	panel.translateDirMenuItem.visible = in.configurationController.isActivateDirectoryTranslation();
	
//Not necessary becausethe tree is autoselect first entry
	//panel.ordnersTree.setSelectedTreeNode(in.folderTree.getRoot());
	//out.selectedFolderOnServer=in.folderTree.getRoot().value as FolderOnServer;
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
	ivy.log.error(in.errorUtil.message,t);
}
' #txt
us0 f862 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f862 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make the Tree</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f862 318 724 37 24 23 -2 #rect
us0 f862 @|RichDialogProcessStepIcon #fIcon
us0 f862 -5972572|-5972572|-16777216 #nodeStyle
us0 f863 expr in #txt
us0 f863 336 702 335 724 #arcP
us0 f268 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f268 actionTable 'out=in;
' #txt
us0 f268 actionCode 'import ch.ivyteam.ivy.addons.filemanager.LockedFolder;
in.documentsInDb.clear();
in.selectedDocumentsForParent.clear();
out.panelId=System.currentTimeMillis();
//get the documents
try{
	if(!(in.selectedFolderOnServer instanceof LockedFolder)){
		in.documentsInDb.addAll(in.fileManagementHandler.getDocumentOnServersInDirectory(in.configurationController.rootPath,in.configurationController.diplayFilesRecursively));
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}

if(in.configurationController.activateSecurity )
{
	if(in.isUserFileManagerAdmin){
		panel.directorySecurityManagerPanel.setSelectedFolderOnServer(in.selectedFolderOnServer);
	}
		//calculate the directories actions rights
			panel.deleteDirectoryMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:in.selectedFolderOnServer.canUserDeleteDir;
			panel.deleteDirButton.enabled=in.selectedFolderOnServer.isRoot?false:in.selectedFolderOnServer.canUserDeleteDir;
			panel.makeNewDirButton.enabled=in.selectedFolderOnServer.canUserCreateDirectory;
			panel.makeNewDirAtRoot2Button.enabled=in.selectedFolderOnServer.canUserCreateDirectory;
			panel.newDirAtRootMenuItem.enabled=in.selectedFolderOnServer.canUserCreateDirectory;
			panel.renameDirMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:in.selectedFolderOnServer.canUserRenameDirectory;
			panel.toogleRecursiveMenuItem.enabled=in.selectedFolderOnServer.canUserOpenDir;
			panel.toogleFileListingButton.enabled=in.selectedFolderOnServer.canUserOpenDir;
			panel.downloadDirContentMenuItem.enabled=in.selectedFolderOnServer.canUserOpenDir;
			panel.downloadAllFilesButton.enabled=in.selectedFolderOnServer.canUserOpenDir;
			panel.downloadAllFiles2Button.enabled=in.selectedFolderOnServer.canUserOpenDir;
				
		//compute the files actions rights
			panel.uploadMenuItem.enabled=in.selectedFolderOnServer.canUserCreateFiles;
			panel.uploadButton.enabled=in.selectedFolderOnServer.canUserCreateFiles;
			panel.pasteButton.enabled=in.selectedFolderOnServer.canUserCreateFiles;
			panel.pasteMenuItemTable.enabled=in.selectedFolderOnServer.canUserCreateFiles;
			panel.pasteMenuItem.enabled=in.selectedFolderOnServer.canUserCreateFiles;
			panel.fileTypeManagerMenuItem.enabled=in.isUserFileManagerAdmin?in.configurationController.showFileTypeManagement:false;
			panel.editButton.setIconUri(in.selectedFolderOnServer.canUserUpdateFiles?
																		ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/write/48"):
																		ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/file/48"));
			panel.editButton.setToolTipText(in.selectedFolderOnServer.canUserUpdateFiles?
																		ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/edit"):
																		ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/read"));
		
}
//Disabling the files actions buttons & menuitems
		panel.unlockButton.enabled=false;
		panel.unlockMenuItem.enabled=false;
		panel.deleteMenuItem.enabled=false;
		panel.deleteButton.enabled=false;
		panel.delete2Button.enabled=false;
		panel.zipMenuItem.enabled=false;
		panel.zip2Button.enabled=false;
		panel.editMenuItem.enabled=false;
		panel.setDescriptionMenuItem.enabled=false;
		panel.newVersionMenuItem.enabled=false;
		panel.makeVersionMenuItem.enabled=false;
		panel.fileTypeChooserMenuItem.enabled=false;
		panel.downloadMenuItem.enabled=false;
		panel.downloadButton.enabled=false;
		panel.download2Button.enabled=false;
		panel.tagsMenuItem.enabled=false;
		panel.newCopyButton.enabled=false;
		panel.newCopy2Button.enabled=false;

if(in.configurationController.activateFileVersioningExtended)
		{
			panel.editButton.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/read"));
			panel.editButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/file/48"));
			panel.refreshSelectedFolderButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/write/16"));
			panel.refreshSelectedFolderButton.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/edit"));
			panel.refreshSelectedFolderButton.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/edit"));
			panel.refreshSelectedFolderButton.setRolloverIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/write/24"));
			panel.refreshSelectedFolderButton.enabled=false;
			panel.makeVersionMenuItem.visible=false;
		}' #txt
us0 f268 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f268 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get the 
documentOnServer List</name>
        <nameStyle>30,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f268 318 812 36 24 32 -12 #rect
us0 f268 @|RichDialogProcessStepIcon #fIcon
us0 f268 -5972572|-5972572|-16777216 #nodeStyle
us0 f865 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f865 326 1014 20 20 13 0 #rect
us0 f865 @|RichDialogProcessEndIcon #fIcon
us0 f871 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f871 1142 198 20 20 13 0 #rect
us0 f871 @|RichDialogProcessEndIcon #fIcon
us0 f873 expr out #txt
us0 f873 3528 138 3528 227 #arcP
us0 f59 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f59 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileUpload Object Null?</name>
        <nameStyle>23
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f59 5186 762 28 28 14 0 #rect
us0 f59 @|AlternativeIcon #fIcon
us0 f60 expr out #txt
us0 f60 5128 725 5192 770 #arcP
us0 f61 expr out #txt
us0 f61 5271 725 5208 770 #arcP
us0 f61 0 0.6333758792725029 0 0 #arcLabel
us0 f313 expr in #txt
us0 f313 outCond 'in.#fileUpload!=null' #txt
us0 f313 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f313 5200 790 5200 818 #arcP
us0 f313 0 0.32142857142857145 0 0 #arcLabel
us0 f330 expr in #txt
us0 f330 5214 776 5213 1168 #arcP
us0 f330 1 5302 776 #addKink
us0 f330 2 5302 1168 #addKink
us0 f330 1 0.45722449995131004 0 0 #arcLabel
us0 f874 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f874 actionTable 'out=in;
' #txt
us0 f874 actionCode 'import ch.ivyteam.ivy.addons.filemanager.document.DocumentMoveChecker;
in.selectedDocument=in.filesToMove.get(0);
try{
	out.returnedMessage = DocumentMoveChecker.checkIfFileToMoveWillOverwriteExistingFile(in.filesToMove.get(0),in.DnDDestinationPath, in.fileManagementHandler);
}catch(Throwable t){
	
}' #txt
us0 f874 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f874 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check If file exists</name>
        <nameStyle>20,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f874 5806 348 36 24 -8 -40 #rect
us0 f874 @|RichDialogProcessStepIcon #fIcon
us0 f874 -613726|-613726|-16777216 #nodeStyle
us0 f875 expr in #txt
us0 f875 outCond in.filesToMove.size()>0 #txt
us0 f875 5582 360 5806 360 #arcP
us0 f428 expr out #txt
us0 f428 6072 564 5842 360 #arcP
us0 f428 1 6072 360 #addKink
us0 f428 0 0.8276895747204317 0 0 #arcLabel
us0 f444 expr out #txt
us0 f444 5824 372 5824 418 #arcP
us0 f434 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f434 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>success?</name>
        <nameStyle>8
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f434 5674 418 28 28 -48 -36 #rect
us0 f434 @|AlternativeIcon #fIcon
us0 f441 expr in #txt
us0 f441 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
us0 f441 5810 432 5778 432 #arcP
us0 f441 0 0.6244343891402715 0 29 #arcLabel
us0 f451 expr out #txt
us0 f451 5742 432 5702 432 #arcP
us0 f877 expr in #txt
us0 f877 5688 446 5688 492 #arcP
us0 f877 0 0.4342620341683025 0 0 #arcLabel
us0 f878 expr in #txt
us0 f878 outCond in.returnedMessage.type==ch.ivyteam.ivy.addons.filemanager.FileHandler.SUCCESS_MESSAGE #txt
us0 f878 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f878 5674 432 5624 588 #arcP
us0 f878 1 5624 432 #addKink
us0 f878 1 0.3919602432332064 0 0 #arcLabel
us0 f1 guid 130986F589D94FD1 #txt
us0 f1 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1 method _onDownloadSuccess(ch.ivyteam.ivy.addons.docfactory.FileOperationMessage) #txt
us0 f1 disableUIEvents false #txt
us0 f1 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.docfactory.FileOperationMessage fileOperationMessage> param = methodEvent.getInputArguments();
' #txt
us0 f1 inActionCode 'import ch.ivyteam.ivy.addons.docfactory.FileOperationMessage;
if(param.fileOperationMessage!=null && param.fileOperationMessage instanceof FileOperationMessage){

	out.returnedMessage.type=param.fileOperationMessage.type;
	out.returnedMessage.files.clear();
	out.returnedMessage.files.addAll(param.fileOperationMessage.files);
	out.returnedMessage.text=param.fileOperationMessage.message;
}

out.progressUnit=-1;' #txt
us0 f1 outParameterDecl '<> result;
' #txt
us0 f1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onDownloadSuccess(FileOperationMessage)</name>
        <nameStyle>40,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1 4750 438 20 20 -99 -27 #rect
us0 f1 @|RichDialogMethodStartIcon #fIcon
us0 f2 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f2 4750 486 20 20 13 0 #rect
us0 f2 @|RichDialogProcessEndIcon #fIcon
us0 f36 expr out #txt
us0 f36 4760 458 4760 486 #arcP
us0 f37 guid 1309D5203A68CFFC #txt
us0 f37 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f37 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f37 actionTable 'out=in;
' #txt
us0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setDescriptionSelectedDocument</name>
        <nameStyle>30,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f37 2590 1318 20 20 -78 -30 #rect
us0 f37 @|RichDialogProcessStartIcon #fIcon
us0 f42 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f42 actionTable 'out=in;
' #txt
us0 f42 actionCode 'out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/setDescription")+" "+in.selectedDocument.filename;' #txt
us0 f42 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f42 2582 1396 36 24 20 -2 #rect
us0 f42 @|RichDialogProcessStepIcon #fIcon
us0 f45 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f45 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check selectedDoc</name>
        <nameStyle>17
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f45 2586 1354 28 28 14 -20 #rect
us0 f45 @|AlternativeIcon #fIcon
us0 f46 expr out #txt
us0 f46 2600 1338 2600 1354 #arcP
us0 f43 expr in #txt
us0 f43 outCond !in.selectedDocument.filename.trim().equals("") #txt
us0 f43 2600 1382 2600 1396 #arcP
us0 f71 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f71 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check response</name>
        <nameStyle>14
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f71 2586 1514 28 28 14 0 #rect
us0 f71 @|AlternativeIcon #fIcon
us0 f197 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f197 actionTable 'out=in;
' #txt
us0 f197 actionCode 'import ch.ivyteam.ivy.addons.filemanager.ReturnedMessage;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

ReturnedMessage r=null;
try{
	r=in.fileManagementHandler.setFileDescription(in.selectedDocument,in.selectedDocument.description);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}

for(int i=0; i<in.documentsInDb.size();i++){
	if(in.documentsInDb.get(i).path.equals(in.selectedDocument.path)){
		
		in.documentsInDb.get(i).description=in.selectedDocument.description;
		break;
	}
}
if(r!=null && r.type==FileHandler.ERROR_MESSAGE){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = null;
	in.errorUtil.message =r.text;
	panel.fireErrorOccurred(in.errorUtil);
}
panel.filesTable.refresh();' #txt
us0 f197 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f197 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>register description</name>
        <nameStyle>20
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f197 2582 1572 36 24 20 -2 #rect
us0 f197 @|RichDialogProcessStepIcon #fIcon
us0 f202 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f202 2590 1654 20 20 13 0 #rect
us0 f202 @|RichDialogProcessEndIcon #fIcon
us0 f213 expr out #txt
us0 f213 2600 1596 2600 1654 #arcP
us0 f216 expr in #txt
us0 f216 2614 1368 2610 1664 #arcP
us0 f216 1 2668 1368 #addKink
us0 f216 2 2668 1664 #addKink
us0 f216 1 0.430882987873014 0 0 #arcLabel
us0 f217 expr in #txt
us0 f217 2614 1528 2610 1664 #arcP
us0 f217 1 2668 1528 #addKink
us0 f217 2 2668 1664 #addKink
us0 f217 1 0.24680250378889085 0 0 #arcLabel
us0 f377 actionDecl 'List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> selectedDocuments;
' #txt
us0 f377 actionTable 'selectedDocuments=in.selectedDocumentsForParent;
' #txt
us0 f377 actionCode panel.fireDocumentSelectionChanged(selectedDocuments); #txt
us0 f377 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f377 fireEvent documentSelectionChanged(List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer>) #txt
us0 f377 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>documentSelectionChanged@SUBSC</name>
        <nameStyle>30
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f377 2182 108 36 24 -111 5 #rect
us0 f377 @|RichDialogFireEventIcon #fIcon
us0 f433 expr out #txt
us0 f433 2200 84 2200 108 #arcP
us0 f22 expr out #txt
us0 f22 2200 132 2200 147 #arcP
us0 f500 guid 130AC89AAEFC4475 #txt
us0 f500 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f500 method setFileUploadMaxSize(Number) #txt
us0 f500 disableUIEvents false #txt
us0 f500 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Number fileUploadMaxSize> param = methodEvent.getInputArguments();
' #txt
us0 f500 inActionCode 'out.uploadHandler.setMaxSize(param.fileUploadMaxSize);
out.configurationController.setMaxFileUploadSize(param.fileUploadMaxSize);' #txt
us0 f500 outParameterDecl '<> result;
' #txt
us0 f500 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setFileUploadMaxSize(Number)</name>
        <nameStyle>28,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f500 2638 1958 20 20 13 0 #rect
us0 f500 @|RichDialogMethodStartIcon #fIcon
us0 f530 guid 130AC89BFE7CC2A1 #txt
us0 f530 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f530 method getFileUploadMaxSize() #txt
us0 f530 disableUIEvents false #txt
us0 f530 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f530 outParameterDecl '<java.lang.Number fileUploadMaxSize> result;
' #txt
us0 f530 outParameterMapAction 'result.fileUploadMaxSize=in.configurationController.maxFileUploadSize;
' #txt
us0 f530 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getFileUploadMaxSize()</name>
        <nameStyle>22,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f530 2718 1998 20 20 13 0 #rect
us0 f530 @|RichDialogMethodStartIcon #fIcon
us0 f531 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f531 2638 1998 20 20 13 0 #rect
us0 f531 @|RichDialogProcessEndIcon #fIcon
us0 f533 expr out #txt
us0 f533 2648 1978 2648 1998 #arcP
us0 f534 expr out #txt
us0 f534 2718 2008 2658 2008 #arcP
us0 f869 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f869 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error or Info?</name>
        <nameStyle>14
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f869 4170 186 28 28 11 -18 #rect
us0 f869 @|AlternativeIcon #fIcon
us0 f870 expr out #txt
us0 f870 4184 172 4184 186 #arcP
us0 f880 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f880 actionTable 'out=in;
' #txt
us0 f880 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f880 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show info</name>
        <nameStyle>9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f880 4230 244 36 24 20 -2 #rect
us0 f880 @|RichDialogProcessStepIcon #fIcon
us0 f881 expr in #txt
us0 f881 4198 200 4248 244 #arcP
us0 f881 1 4248 200 #addKink
us0 f881 0 0.876236069223493 0 0 #arcLabel
us0 f882 expr out #txt
us0 f882 4248 268 4197 312 #arcP
us0 f882 1 4248 312 #addKink
us0 f882 1 0.08574965496934503 0 0 #arcLabel
us0 f883 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f883 actionTable 'out=in;
' #txt
us0 f883 actionCode 'in.returnedMessage.text = in.returnedMessage.text.replaceAll("FSIZE",""+in.configurationController.maxFileUploadSize+" Kb");
/*
in.returnedMessage.text = in.returnedMessage.text.replaceAll("<BR/>","\n");
in.returnedMessage.text = in.returnedMessage.text.replaceAll("<BR>","\n");
in.returnedMessage.text = in.returnedMessage.text.replaceAll("<br/>","\n");
in.returnedMessage.text = in.returnedMessage.text.replaceAll("<br>","\n");
in.returnedMessage.text = in.returnedMessage.text.replaceAll("\\<[^>]*>","");


*/


if(!in.returnedMessage.text.startsWith("<html>")){
	in.returnedMessage.text="<html>"+in.returnedMessage.text;
}

in.returnedMessage.text=in.returnedMessage.text.replaceAll("</html>","");

if(in.#returnedMessage.#file!=null){
	in.returnedMessage.text+=" "+in.returnedMessage.file.getName();
}

' #txt
us0 f883 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f883 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>escape
HTML</name>
        <nameStyle>11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f883 4102 244 36 24 -58 -9 #rect
us0 f883 @|RichDialogProcessStepIcon #fIcon
us0 f884 expr in #txt
us0 f884 outCond 'in.returnedMessage.type == ch.ivyteam.ivy.addons.filemanager.FileHandler.ERROR_MESSAGE' #txt
us0 f884 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Error</name>
        <nameStyle>5
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f884 4170 200 4120 244 #arcP
us0 f884 1 4120 200 #addKink
us0 f884 0 0.8264372875178208 0 0 #arcLabel
us0 f886 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f886 actionTable 'out=in;
' #txt
us0 f886 actionCode 'if(in.tmpListOfFiles.size()>0){
	List<String> p = new List<String>();
	for(java.io.File f : in.tmpListOfFiles)
	{
		p.add(f.getPath());
	}
	String s = in.selectedFolderOnServer.path;
	panel.uploadFiles(p,s);
}' #txt
us0 f886 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f886 4870 1372 36 24 20 -2 #rect
us0 f886 @|RichDialogProcessStepIcon #fIcon
us0 f888 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f888 4878 1446 20 20 13 0 #rect
us0 f888 @|RichDialogProcessEndIcon #fIcon
us0 f889 expr out #txt
us0 f889 4888 1396 4888 1446 #arcP
us0 f890 guid 1324EADBBDAFFBF3 #txt
us0 f890 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f890 method getDocumentsWithSQLConditions(List<String>) #txt
us0 f890 disableUIEvents false #txt
us0 f890 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.lang.String> conditions> param = methodEvent.getInputArguments();
' #txt
us0 f890 inParameterMapAction 'out.sqlSearchConditions=param.conditions;
' #txt
us0 f890 inActionCode 'out.docsForSearch.clear();
' #txt
us0 f890 outParameterDecl '<List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> foundDocuments> result;
' #txt
us0 f890 outParameterMapAction 'result.foundDocuments=in.docsForSearch;
' #txt
us0 f890 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getDocumentsWithSQLConditions(List&lt;String&gt;)</name>
        <nameStyle>43,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f890 2927 1990 18 20 13 0 #rect
us0 f890 @|RichDialogMethodStartIcon #fIcon
us0 f891 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f891 actionTable 'out=in;
' #txt
us0 f891 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
try{
	java.util.ArrayList l = new java.util.ArrayList();
	l.addAll(in.fileManagementHandler.getDocuments(in.sqlSearchConditions));
	for(DocumentOnServer doc : l){
		in.docsForSearch.add(doc);
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
	}' #txt
us0 f891 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f891 2918 2028 36 24 20 -2 #rect
us0 f891 @|RichDialogProcessStepIcon #fIcon
us0 f892 expr out #txt
us0 f892 2936 2010 2936 2028 #arcP
us0 f893 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f893 2926 2078 20 20 13 0 #rect
us0 f893 @|RichDialogProcessEndIcon #fIcon
us0 f894 expr out #txt
us0 f894 2936 2052 2936 2078 #arcP
us0 f895 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Listen to the fileCoupleModifiedReported
RDEvent of DesktopHandler</name>
        <nameStyle>66
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f895 3468 51 233 42 -111 -16 #rect
us0 f895 @|IBIcon #fIcon
us0 f895 -1|-1|-16777216 #nodeStyle
us0 f896 guid 13263A84D61EFBA6 #txt
us0 f896 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f896 method start(String,Boolean,String,String,String,String,String,Boolean,Boolean) #txt
us0 f896 disableUIEvents true #txt
us0 f896 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.Boolean useIvySystemDB,java.lang.String ivyDBConnectionName,java.lang.String schemaName,java.lang.String fileTableName,java.lang.String fileContentTableName,java.lang.String dirTableName,java.lang.Boolean storeFilesInDB,java.lang.Boolean activateSecurity> param = methodEvent.getInputArguments();
' #txt
us0 f896 inParameterMapAction 'out.clientTempDirPath="";
out.configurationController.activateSecurity=param.activateSecurity;
out.configurationController.advancedActionsEnabled=true;
out.configurationController.databaseSchemaName=param.schemaName;
out.configurationController.directoriesTableName=param.dirTableName;
out.configurationController.filesContentTableName=param.fileContentTableName;
out.configurationController.filesTableName=param.fileTableName;
out.configurationController.folderTreeVisible=true;
out.configurationController.ivyDBConnectionName=param.ivyDBConnectionName;
out.configurationController.rootPath=param.serverPath;
out.configurationController.storeFilesInDB=param.storeFilesInDB;
out.configurationController.toolBarVisible=true;
out.configurationController.useIvySystemDB=param.useIvySystemDB;
out.cursor=0;
' #txt
us0 f896 outParameterDecl '<> result;
' #txt
us0 f896 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start(String,String,String)"/parameterMapping "param.ivyDBConnexionName=callParam.ivyDBConnectionName;\nparam.dirTableName=callParam.dirTableName;\nparam.schemaName=callParam.schemaName;\n"/initScript ""/userContext * }}' #txt
us0 f896 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(String,Boolean,String,
String,String,String,
Boolean,Boolean)</name>
        <nameStyle>67,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f896 110 70 20 20 -59 -59 #rect
us0 f896 @|RichDialogInitStartIcon #fIcon
us0 f900 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f900 actionTable 'out=in;
' #txt
us0 f900 actionCode 'if(in.configurationController.activateSecurity && !in.selectedFolderOnServer.canUserDeleteDir){
	out.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/userHasNoRightToDeleteDir");
	in.responseBoolean=false;

}else if(in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,true).size()>0){
	out.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/cannotDeleteMoreThanOneDirectory");
	in.responseBoolean=false;
}' #txt
us0 f900 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f900 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Can delete dir?
is directory empty?</name>
        <nameStyle>35,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f900 1822 676 36 24 21 -8 #rect
us0 f900 @|RichDialogProcessStepIcon #fIcon
us0 f901 expr in #txt
us0 f901 outCond in.responseBoolean #txt
us0 f901 1840 646 1840 676 #arcP
us0 f902 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f902 1826 722 28 28 14 0 #rect
us0 f902 @|AlternativeIcon #fIcon
us0 f903 expr out #txt
us0 f903 1840 700 1840 722 #arcP
us0 f613 expr in #txt
us0 f613 outCond in.responseBoolean #txt
us0 f613 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is Empty</name>
        <nameStyle>8
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f613 1840 750 1840 780 #arcP
us0 f613 0 0.4 0 0 #arcLabel
us0 f906 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f906 1987 723 26 26 14 0 #rect
us0 f906 @|RichDialogProcessEndIcon #fIcon
us0 f911 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f911 actionTable 'out=in;
' #txt
us0 f911 actionCode 'if(in.fileManagementHandler.getDocumentsInPath(in.stringVariable,true).size()>0){
	in.responseBoolean=false;
}' #txt
us0 f911 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f911 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is empty?</name>
        <nameStyle>9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f911 1822 204 36 24 -71 -6 #rect
us0 f911 @|RichDialogProcessStepIcon #fIcon
us0 f913 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f913 2011 243 26 26 14 0 #rect
us0 f913 @|RichDialogProcessEndIcon #fIcon
us0 f914 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f914 1826 242 28 28 14 0 #rect
us0 f914 @|AlternativeIcon #fIcon
us0 f915 expr out #txt
us0 f915 1840 228 1840 242 #arcP
us0 f919 expr in #txt
us0 f919 outCond in.responseBoolean #txt
us0 f919 1840 190 1840 204 #arcP
us0 f283 expr in #txt
us0 f283 outCond in.responseBoolean #txt
us0 f283 1840 270 1840 292 #arcP
us0 f920 guid 132731EA06CD45FB #txt
us0 f920 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f920 method _onUploadSuccessForFilesInDB(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f920 disableUIEvents false #txt
us0 f920 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f920 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
us0 f920 outParameterDecl '<> result;
' #txt
us0 f920 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onUploadSuccessForFilesInDB(ReturnedMessage)</name>
        <nameStyle>45,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f920 4390 110 20 20 13 0 #rect
us0 f920 @|RichDialogMethodStartIcon #fIcon
us0 f921 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f921 actionTable 'out=in;
' #txt
us0 f921 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.progressUnit=-1;
List<DocumentOnServer> docs = new List<DocumentOnServer>();
docs.addAll(in.returnedMessage.documentOnServers);
in.returnedMessage.documentOnServers.clear();
try{
	in.docsToOverwrite.clear();

	if(in.configurationController.activateFileVersioningExtended){
		for(DocumentOnServer doc : docs){
			DocumentOnServer control = in.fileManagementHandler.getDocumentOnServer(doc.getPath());
			if(control.getFileID()!=null && control.getFileID().trim().length()>0){//file already exists
				doc.setFileID(control.getFileID());
				doc.setFileType(control.getFileType());
				doc.setLocked(control.getLocked());
				in.docsToOverwrite.add(doc);
			}else{
				in.fileManagementHandler.insertOneDocument(doc);
				in.returnedMessage.documentOnServers.add(in.fileManagementHandler.getDocumentOnServer(doc.getPath()));
			}
		}
	}else{
		in.fileManagementHandler.insertDocuments(docs);
		for(DocumentOnServer doc : docs) {
			in.returnedMessage.documentOnServers.add(in.fileManagementHandler.getDocumentOnServer(doc.getPath()));
		}
	}
	
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
if(in.docsToOverwrite.isEmpty()){
	in.fileUploadInProgress=false;
}' #txt
us0 f921 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f921 4382 156 36 24 20 -2 #rect
us0 f921 @|RichDialogProcessStepIcon #fIcon
us0 f922 expr out #txt
us0 f922 4400 130 4400 156 #arcP
us0 f923 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f923 4350 446 20 20 13 0 #rect
us0 f923 @|RichDialogProcessEndIcon #fIcon
us0 f925 guid 132876E0A253B0E3 #txt
us0 f925 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f925 method _askIfOverwriteExistingDocumentsOnServer(List<java.io.File>,List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer>,List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer>,String) #txt
us0 f925 disableUIEvents false #txt
us0 f925 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> choosedFiles,List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> choosedDocs,List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> documentsToOverwrite,java.lang.String destinationPathInDB> param = methodEvent.getInputArguments();
' #txt
us0 f925 inParameterMapAction 'out.DnDDestinationPath=param.destinationPathInDB;
out.filesToAdd=param.choosedDocs;
out.filestoDelete=param.documentsToOverwrite;
out.tmpListOfFiles=param.choosedFiles;
' #txt
us0 f925 outParameterDecl '<> result;
' #txt
us0 f925 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_askIfOverwriteExistingDocumentsOnServer(
List&lt;File&gt;,List&lt;DocumentOnServer&gt;,
List&lt;DocumentOnServer&gt;,String)</name>
        <nameStyle>107,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f925 4126 550 20 20 17 -23 #rect
us0 f925 @|RichDialogMethodStartIcon #fIcon
us0 f926 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f926 4122 602 28 28 14 0 #rect
us0 f926 @|AlternativeIcon #fIcon
us0 f927 expr out #txt
us0 f927 4136 570 4136 602 #arcP
us0 f928 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f928 actionTable 'out=in;
' #txt
us0 f928 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List<DocumentOnServer> docsToExclude = new List<DocumentOnServer>();
//build the list of docs that are locked
for(DocumentOnServer doc:in.filestoDelete){
	if(in.fileManagementHandler.isDocumentOnServerLocked(doc)) {
		docsToExclude.add(doc);
	}
}
List<java.io.File> files = new List<java.io.File>();
//exclude the locked documents
for(DocumentOnServer doc:docsToExclude){
	in.filestoDelete.remove(doc);
}

for(java.io.File f: in.tmpListOfFiles){
	boolean found =false;
	String s = f.getName();
	for(DocumentOnServer doc:docsToExclude){
		if(s.equals(doc.getFilename())){
			found=true;
			break;
		}
	}
	if(!found){
		files.add(f);
	}	
}

in.tmpListOfFiles.clear();
in.tmpListOfFiles.addAll(files);
in.dialogParam.outputBoolean=false;
if(!docsToExclude.isEmpty()){
	in.dialogParam.outputBoolean=true;
	in.dialogParam.message = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filesNotUploadedBecauseLockedExt");
	if(!in.dialogParam.message.startsWith("<html>")){
		in.dialogParam.message="<html>"+in.dialogParam.message;
	}
	String s="";
	for(int i=0; i<docsToExclude.size();i++){
		s+="<br> - "+docsToExclude.get(i).getFilename();
	}
	in.dialogParam.message=in.dialogParam.message.replaceFirst("\\[NAME\\]",s);
}


' #txt
us0 f928 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f928 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exclude from list to override
the documents that are locked</name>
        <nameStyle>59,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f928 4118 644 36 24 20 -14 #rect
us0 f928 @|RichDialogProcessStepIcon #fIcon
us0 f930 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f930 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>still docs to
override?</name>
        <nameStyle>23
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f930 4122 762 28 28 14 0 #rect
us0 f930 @|AlternativeIcon #fIcon
us0 f932 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f932 actionTable 'out=in;
' #txt
us0 f932 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles").replaceFirst("</html>","");
if(in.configurationController.activateFileVersioningExtended){
	if(in.filestoDelete.size()==1){
		in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteFileCreatingNewVersion").replaceFirst("\\[NAME\\]",in.filestoDelete.get(0).getFilename());
	}else{
			String s="<br>";
			for(DocumentOnServer doc:in.filestoDelete){
				s+="- "+doc.getFilename()+"<br>";
			}
			in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteFilesCreatingNewVersions").replaceFirst("\\[NAME\\]",s);
		}
}else{
	in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFiles").replaceAll("</html>","");
	if(!in.dialogParam.message.startsWith("<html>")){
		in.dialogParam.message="<html>"+in.dialogParam.message.replaceAll("</html>","");
	}
	in.dialogParam.message+="<br>";
	for(DocumentOnServer f : in.filestoDelete){
		in.dialogParam.message+=f.getFilename()+"<br>";
	}
}
if(!in.dialogParam.message.startsWith("<html>")){
	ivy.log.info(in.dialogParam.message);
	out.dialogParam.message="<html>"+in.dialogParam.message;
}

' #txt
us0 f932 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f932 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>winTitle + message</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f932 4118 836 36 24 20 -2 #rect
us0 f932 @|RichDialogProcessStepIcon #fIcon
us0 f936 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f936 4122 954 28 28 14 0 #rect
us0 f936 @|AlternativeIcon #fIcon
us0 f938 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f938 actionTable 'out=in;
' #txt
us0 f938 actionCode 'try{
	if(!in.configurationController.activateFileVersioningExtended){
		in.fileManagementHandler.deleteDocumentOnServers(in.filestoDelete);
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f938 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f938 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete doc to override
only if the file versioning 
extended is not active.</name>
        <nameStyle>75,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f938 4118 1004 36 24 28 -15 #rect
us0 f938 @|RichDialogProcessStepIcon #fIcon
us0 f939 expr in #txt
us0 f939 outCond in.dialogParam.clickedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f939 4136 982 4136 1004 #arcP
us0 f940 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f940 actionTable 'out=in;
' #txt
us0 f940 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;


in.documentsInDb = new List<DocumentOnServer>();
try{
	in.documentsInDb=in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,in.configurationController.diplayFilesRecursively);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f940 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f940 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the selected folder</name>
        <nameStyle>27,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f940 4118 1052 36 24 20 -2 #rect
us0 f940 @|RichDialogProcessStepIcon #fIcon
us0 f941 expr out #txt
us0 f941 4136 1028 4136 1052 #arcP
us0 f942 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f942 actionTable 'out=in;
' #txt
us0 f942 actionCode 'if(in.#uploadHandler != null){
	if(in.configurationController.maxFileUploadSize<=0)
	{
		in.uploadHandler.uploadPreparedFiles(in.tmpListOfFiles);
	}else{
		in.uploadHandler.uploadPreparedFiles(in.tmpListOfFiles,in.configurationController.maxFileUploadSize);
	}

}' #txt
us0 f942 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f942 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload Prepared Files</name>
        <nameStyle>21,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f942 4118 1100 36 24 20 -2 #rect
us0 f942 @|RichDialogProcessStepIcon #fIcon
us0 f943 expr out #txt
us0 f943 4136 1076 4136 1100 #arcP
us0 f944 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f944 4126 1150 20 20 13 0 #rect
us0 f944 @|RichDialogProcessEndIcon #fIcon
us0 f945 expr out #txt
us0 f945 4136 1124 4136 1150 #arcP
us0 f946 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f946 actionTable 'out=in;
' #txt
us0 f946 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

List<java.io.File> files = new List<java.io.File>();
files.addAll(in.tmpListOfFiles);
in.tmpListOfFiles.clear();
for(java.io.File f: files){
	boolean found = false;
	String s = f.getName();
	for(DocumentOnServer doc:in.filestoDelete){
		if(s.equals(doc.filename)){
			found=true;
			break;
		}
	}
	if(!found){
		in.tmpListOfFiles.add(f);
	}
}' #txt
us0 f946 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f946 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>reject all the files
that will override others</name>
        <nameStyle>46
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f946 4230 956 36 24 -64 -45 #rect
us0 f946 @|RichDialogProcessStepIcon #fIcon
us0 f947 expr in #txt
us0 f947 4150 968 4230 968 #arcP
us0 f948 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f948 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>still any Files to upload?</name>
        <nameStyle>26
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f948 4314 1098 28 28 -47 15 #rect
us0 f948 @|AlternativeIcon #fIcon
us0 f949 expr out #txt
us0 f949 4266 968 4326 1100 #arcP
us0 f949 1 4308 968 #addKink
us0 f949 1 0.25074599320633667 0 0 #arcLabel
us0 f951 expr in #txt
us0 f951 outCond in.tmpListOfFiles.size()>0 #txt
us0 f951 4314 1112 4154 1112 #arcP
us0 f953 expr in #txt
us0 f953 4150 616 4329 1099 #arcP
us0 f953 1 4364 616 #addKink
us0 f953 1 0.28509369943261587 0 0 #arcLabel
us0 f954 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f954 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check the default 
settings are OK</name>
        <nameStyle>34
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f954 322 514 28 28 -72 -53 #rect
us0 f954 @|AlternativeIcon #fIcon
us0 f956 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f956 actionTable 'out=in;
' #txt
us0 f956 actionCode 'in.errorUtil.panelId = in.panelId;
in.errorUtil.errorOccurred=true;
in.errorUtil.throwable= new Exception("Illegal parameters setting in FileManager");
in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
panel.fireErrorOccurred(in.errorUtil);

panel.enabled=false;' #txt
us0 f956 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f956 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>panel disabled
and send error</name>
        <nameStyle>29
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f956 14 580 36 24 -22 -48 #rect
us0 f956 @|RichDialogProcessStepIcon #fIcon
us0 f957 expr in #txt
us0 f957 outCond !in.configurationController.isConfigurationCorrect() #txt
us0 f957 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>the settings
are not correct</name>
        <nameStyle>28
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f957 323 527 32 580 #arcP
us0 f957 1 32 512 #addKink
us0 f957 0 0.8455939509575295 0 -2 #arcLabel
us0 f964 guid 132C7453DFBBB4F0 #txt
us0 f964 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f964 method getFileManagerSecurityController() #txt
us0 f964 disableUIEvents false #txt
us0 f964 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f964 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.database.security.AbstractDirectorySecurityController fileManagerSecurityController> result;
' #txt
us0 f964 outActionCode 'import ch.ivyteam.ivy.addons.filemanager.database.security.AbstractDirectorySecurityController;
import ch.ivyteam.ivy.addons.filemanager.database.security.DirectorySecurityController;
AbstractDirectorySecurityController sc = in.fileManagementHandler.getSecurityController();
if(sc!=null && sc instanceof DirectorySecurityController)
{
	result.fileManagerSecurityController = sc as DirectorySecurityController;
}else{
	result.fileManagerSecurityController = sc;
}' #txt
us0 f964 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getFileManagerSecurityController()</name>
        <nameStyle>34,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f964 1494 894 20 20 13 0 #rect
us0 f964 @|RichDialogMethodStartIcon #fIcon
us0 f965 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f965 1494 958 20 20 13 0 #rect
us0 f965 @|RichDialogProcessEndIcon #fIcon
us0 f966 expr out #txt
us0 f966 1504 914 1504 958 #arcP
us0 f967 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f967 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>If security is activated
can user edit the file?</name>
        <nameStyle>48,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f967 3042 258 28 28 -121 -32 #rect
us0 f967 @|AlternativeIcon #fIcon
us0 f968 3583 93 3520 121 #arcP
us0 f968 0 0.4501435274622619 0 0 #arcLabel
us0 f970 expr in #txt
us0 f970 outCond in.eventSource.actionType==1 #txt
us0 f970 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f970 3042 272 2864 308 #arcP
us0 f970 1 2892 272 #addKink
us0 f970 0 0.8972602739726028 0 1 #arcLabel
us0 f975 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f975 actionTable 'out=in;
' #txt
us0 f975 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileSecurityHandler;
if(in.configurationController.activateSecurity)
{
	in.dialogParam.outputBoolean=false;
	try{
		AbstractFileSecurityHandler sech = in.fileManagementHandler as AbstractFileSecurityHandler;
		in.dialogParam.outputBoolean=sech.getDirectoryWithPath(in.DnDDestinationPath).canUserCreateFiles;

		//in.dialogParam.outputBoolean=in.fileManagementHandler.getSecurityController().canUserEditFilesInDirectory(in.DnDDestinationPath,in.applicationUserName);
	}catch(Throwable t){
		ivy.log.error(t.getMessage(),t);
	}
}' #txt
us0 f975 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f975 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if user
has right to delete 
files in destination path</name>
        <nameStyle>60,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f975 5710 852 36 24 -147 -22 #rect
us0 f975 @|RichDialogProcessStepIcon #fIcon
us0 f976 expr out #txt
us0 f976 5728 836 5728 852 #arcP
us0 f804 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f804 5714 898 28 28 14 0 #rect
us0 f804 @|AlternativeIcon #fIcon
us0 f977 expr out #txt
us0 f977 5728 876 5728 898 #arcP
us0 f983 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f983 5918 902 20 20 13 0 #rect
us0 f983 @|RichDialogProcessEndIcon #fIcon
us0 f985 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f985 actionTable 'out=in;
' #txt
us0 f985 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerPanelGuiManager;
import ch.ivyteam.ivy.richdialog.widgets.components.RButton;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
if(in.configurationController.activateFileVersioningExtended && in.#eventSource!=null && in.eventSource.eventSource instanceof RButton && 
	(in.eventSource.eventSource as RButton).getText().compareTo(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/edit"))==0)
{
	panel._editSelectedFile();
}else{
	try {
		FileManagerPanelGuiManager.manageDirectorySelectionChange(panel, in.configurationController, in.isUserFileManagerAdmin);
		
		if(panel.ordnersTree.selectedTreeNode.value instanceof FolderOnServer){
			in.selectedFolderOnServer=panel.ordnersTree.selectedTreeNode.value as FolderOnServer;
			
			if(!in.fileUploadInProgress)
			{//we just set the uploadHandler path only if there is no current upload in progress.
				if(!in.configurationController.storeFilesInDB)
				{//we set the serverPath just in case of storage on Server fileSystem
					in.uploadHandler.setServerPath(in.selectedFolderOnServer.path);
				}else{
					in.uploadHandler.setFilesDestinationPathForDB(in.selectedFolderOnServer.path);
				}
			}
			
			if(in.configurationController.activateSecurity && in.isUserFileManagerAdmin){
						panel.directorySecurityManagerPanel.setSelectedFolderOnServer(in.selectedFolderOnServer);
			}
			in.documentsInDb.clear();
			in.selectedDocument=null;
			in.selectedDocuments.clear();
			in.selectedDocumentsForParent.clear();
			
			//get the documents 
			if(in.#selectedFolderOnServer.#path !=null){
				if(in.configurationController.activateSecurity && !in.selectedFolderOnServer.canUserOpenDir){
					//do nothing we don''t list the files
				}else{
					in.documentsInDb.addAll(in.fileManagementHandler.getDocumentOnServersInDirectory(in.selectedFolderOnServer.path, in.configurationController.diplayFilesRecursively));
				}
			}
			
			if(!in.fileUploadInProgress) {
				in.filesNumber=in.documentsInDb.size().toString();
				int n = in.documentsInDb.size();
				out.returnedMessage.text = (n==0?ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/noDocumentFound"):
							(n==1?ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/oneDocumentFound"): 
							in.filesNumber+" " +ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/xDocumentsFound")));
				out.returnedMessage.type=FileHandler.INFORMATION_MESSAGE;
			}
		}
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
}' #txt
us0 f985 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f985 1134 140 36 24 20 -2 #rect
us0 f985 @|RichDialogProcessStepIcon #fIcon
us0 f986 expr out #txt
us0 f986 1088 114 1134 152 #arcP
us0 f986 1 1088 152 #addKink
us0 f986 1 0.06793171079568015 0 0 #arcLabel
us0 f868 expr out #txt
us0 f868 1152 114 1152 140 #arcP
us0 f378 expr out #txt
us0 f378 1216 114 1170 152 #arcP
us0 f378 1 1216 152 #addKink
us0 f378 1 0.42665236397512646 0 0 #arcLabel
us0 f300 expr out #txt
us0 f300 1152 164 1152 198 #arcP
us0 f987 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f987 actionTable 'out=in;
' #txt
us0 f987 actionCode 'try{
	in.dialogParam.outputBoolean=true;

	if(!in.filesToMove.isEmpty() && in.configurationController.activateSecurity){

		String srcPath = in.filesToMove.get(0).path.substring(0,in.filesToMove.get(0).path.lastIndexOf("/"));
		
		if(!in.fileManagementHandler.getSecurityController().canUserEditFilesInDirectory(in.DnDDestinationPath,in.applicationUserName)){
			in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/noRightsToMoveFilesInDestDirectory").replace("DESTDIR",in.DnDDestinationPath);
			in.dialogParam.outputBoolean=false;
		}else if(!in.fileManagementHandler.getSecurityController().canUserDeleteFilesInDirectory(srcPath,in.applicationUserName)){
			in.dialogParam.outputBoolean=false;
			in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/noRightsToDeleteFilesFromSrcDirectory").replaceFirst("SRCDIR",srcPath);
		}
		out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information");
	}
}catch(Exception ex){
	ivy.log.error(ex.getMessage(),ex);
}
if(!in.dialogParam.message.startsWith("<html>")){
	in.dialogParam.message ="<html>"+in.dialogParam.message;
}' #txt
us0 f987 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f987 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if
can delete Files in the source directory
And can write files in the destination</name>
        <nameStyle>88,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f987 5550 188 36 24 -222 -18 #rect
us0 f987 @|RichDialogProcessStepIcon #fIcon
us0 f987 -993312|-1|-16777216 #nodeStyle
us0 f988 expr out #txt
us0 f988 5568 172 5568 188 #arcP
us0 f989 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f989 5554 226 28 28 14 0 #rect
us0 f989 @|AlternativeIcon #fIcon
us0 f990 expr out #txt
us0 f990 5568 212 5568 226 #arcP
us0 f72 expr in #txt
us0 f72 outCond in.dialogParam.outputBoolean #txt
us0 f72 5568 254 5568 282 #arcP
us0 f996 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f996 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if the user add the rights
to ad new files in the directory</name>
        <nameStyle>65
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f996 2914 1074 28 28 18 -23 #rect
us0 f996 @|AlternativeIcon #fIcon
us0 f997 expr out #txt
us0 f997 2928 1044 2928 1074 #arcP
us0 f570 expr in #txt
us0 f570 outCond in.responseBoolean #txt
us0 f570 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>User allowed or
no security 
activated</name>
        <nameStyle>38,0,22
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f570 2928 1102 2928 1162 #arcP
us0 f570 0 0.5059953852445993 0 0 #arcLabel
us0 f999 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f999 actionTable 'out=in;
' #txt
us0 f999 actionCode out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f999 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f999 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f999 2798 1076 36 24 20 -2 #rect
us0 f999 @|RichDialogProcessStepIcon #fIcon
us0 f1001 expr in #txt
us0 f1001 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,12
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1001 2914 1088 2834 1088 #arcP
us0 f1002 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1002 2806 1174 20 20 13 0 #rect
us0 f1002 @|RichDialogProcessEndIcon #fIcon
us0 f1004 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1004 actionTable 'out=in;
' #txt
us0 f1004 actionCode 'in.responseBoolean=true;
if(in.configurationController.activateSecurity)
{// the user cannot insert new files
	if(in.configurationController.diplayFilesRecursively && !in.selectedDocument.canUserWrite) {
		out.returnedMessage.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/userHasNoRightToRenameFile");
		out.responseBoolean=false;
	} else if(!in.selectedFolderOnServer.canUserUpdateFiles) {
		out.returnedMessage.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/userHasNoRightToRenameFile");
		out.responseBoolean=false;
	}
}' #txt
us0 f1004 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1004 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check rights</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1004 3542 940 36 24 20 -2 #rect
us0 f1004 @|RichDialogProcessStepIcon #fIcon
us0 f1005 expr in #txt
us0 f1005 outCond in.selectedDocument.locked.equals("0") #txt
us0 f1005 3560 902 3560 940 #arcP
us0 f1006 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1006 3546 986 28 28 14 0 #rect
us0 f1006 @|AlternativeIcon #fIcon
us0 f1007 expr out #txt
us0 f1007 3560 964 3560 986 #arcP
us0 f779 expr in #txt
us0 f779 outCond in.responseBoolean #txt
us0 f779 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>User allowed or
no security 
activated</name>
        <nameStyle>38
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f779 3560 1014 3560 1084 #arcP
us0 f779 0 0.4 9 0 #arcLabel
us0 f1010 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1010 3454 1086 20 20 13 0 #rect
us0 f1010 @|RichDialogProcessEndIcon #fIcon
us0 f1014 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1014 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check rights</name>
        <nameStyle>12
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1014 2482 130 28 28 -24 -36 #rect
us0 f1014 @|AlternativeIcon #fIcon
us0 f372 expr out #txt
us0 f372 2496 90 2496 130 #arcP
us0 f1016 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1016 actionTable 'out=in;
' #txt
us0 f1016 actionCode out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f1016 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1016 2566 130 36 28 20 -2 #rect
us0 f1016 @|RichDialogProcessStepIcon #fIcon
us0 f1017 expr in #txt
us0 f1017 outCond 'in.configurationController.activateSecurity && (in.#selectedFolderOnServer==null || !in.selectedFolderOnServer.canUserDeleteFiles)' #txt
us0 f1017 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No 
Rights
On dir</name>
        <nameStyle>17
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1017 2510 144 2566 144 #arcP
us0 f1017 0 0.5138888888888888 0 7 #arcLabel
us0 f1020 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1020 2638 174 20 20 13 0 #rect
us0 f1020 @|RichDialogProcessEndIcon #fIcon
us0 f1022 guid 132DDE8790FD4DB3 #txt
us0 f1022 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1022 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1022 actionTable 'out=in;
' #txt
us0 f1022 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showSecurityManager</name>
        <nameStyle>19,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1022 1126 1054 20 20 -72 -31 #rect
us0 f1022 @|RichDialogProcessStartIcon #fIcon
us0 f1023 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1023 actionTable 'out=in;
' #txt
us0 f1023 actionCode 'if(in.configurationController.activateSecurity && !panel.directorySecurityManagerPanel.visible)
{
	panel.directorySecurityManagerPanel.load();
	panel.directorySecurityManagerPanel.visible=true;
	panel.filesGridBagLayoutPane.visible=false;
	panel.fileToolbarPane.visible=false;
	panel.fileToolbarPane2.visible=false;
	panel.fileToolbarPane3.visible=false;
	in.configurationController.toolBarVisible = false;
}' #txt
us0 f1023 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1023 1118 1100 36 24 20 -2 #rect
us0 f1023 @|RichDialogProcessStepIcon #fIcon
us0 f1024 expr out #txt
us0 f1024 1136 1074 1136 1100 #arcP
us0 f1025 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1025 1126 1142 20 20 13 0 #rect
us0 f1025 @|RichDialogProcessEndIcon #fIcon
us0 f1026 expr out #txt
us0 f1026 1136 1124 1136 1142 #arcP
us0 f1027 guid 132DE2FF9BE8E717 #txt
us0 f1027 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1027 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1027 actionTable 'out=in;
' #txt
us0 f1027 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>hideSecurity</name>
        <nameStyle>12,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1027 1006 1054 20 20 13 0 #rect
us0 f1027 @|RichDialogProcessStartIcon #fIcon
us0 f1028 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1028 actionTable 'out=in;
' #txt
us0 f1028 actionCode 'panel.directorySecurityManagerPanel.visible=false;
	panel.filesGridBagLayoutPane.visible=true;
	panel.fileToolbarPane.visible=true;
	panel.fileToolbarPane2.visible=true;
	panel.fileToolbarPane3.visible=true;
	in.configurationController.toolBarVisible = true;' #txt
us0 f1028 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1028 998 1100 36 24 20 -2 #rect
us0 f1028 @|RichDialogProcessStepIcon #fIcon
us0 f1029 expr out #txt
us0 f1029 1016 1074 1016 1100 #arcP
us0 f1030 expr out #txt
us0 f1030 1016 1124 1126 1152 #arcP
us0 f1030 1 1016 1152 #addKink
us0 f1030 1 0.32524837226365966 0 0 #arcLabel
us0 f1031 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1031 1218 1098 28 28 14 0 #rect
us0 f1031 @|AlternativeIcon #fIcon
us0 f1033 expr in #txt
us0 f1033 outCond 'in.configurationController.activateSecurity && in.isUserFileManagerAdmin' #txt
us0 f1033 1218 1112 1154 1112 #arcP
us0 f475 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f475 actionTable 'out=in;
' #txt
us0 f475 actionCode panel.setIsRecursive(!in.configurationController.diplayFilesRecursively); #txt
us0 f475 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f475 1214 1148 36 24 20 -2 #rect
us0 f475 @|RichDialogProcessStepIcon #fIcon
us0 f1036 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1036 actionTable 'out=in;
' #txt
us0 f1036 actionCode panel.refreshActualSelectedFolder(); #txt
us0 f1036 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1036 2974 580 36 24 20 -2 #rect
us0 f1036 @|RichDialogProcessStepIcon #fIcon
us0 f1037 expr in #txt
us0 f1037 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1037 2992 518 2992 580 #arcP
us0 f1037 0 0.20766915607738076 0 0 #arcLabel
us0 f1038 expr out #txt
us0 f1038 2992 604 2874 768 #arcP
us0 f1038 1 2992 768 #addKink
us0 f1038 0 0.9355403901730368 0 0 #arcLabel
us0 f198 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f198 1318 1166 20 20 13 0 #rect
us0 f198 @|RichDialogProcessEndIcon #fIcon
us0 f199 expr out #txt
us0 f199 1328 1132 1328 1166 #arcP
us0 f233 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Called when the
DEL key is pressed
on selected Ordner</name>
        <nameStyle>53
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f233 1446 419 117 58 -53 -24 #rect
us0 f233 @|IBIcon #fIcon
us0 f233 -1|-1|-16777216 #nodeStyle
us0 f234 1503 477 1505 528 #arcP
us0 f235 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Called by the deleteSelectedFolder
@APP from within the
_deleteSelectedDirectory()
callback method.</name>
        <nameStyle>99
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f235 1572 427 201 74 -95 -32 #rect
us0 f235 @|IBIcon #fIcon
us0 f235 -1|-1|-16777216 #nodeStyle
us0 f244 1671 501 1679 530 #arcP
us0 f245 expr in #txt
us0 f245 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancel</name>
        <nameStyle>6
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f245 1826 880 1827 984 #arcP
us0 f245 1 1728 880 #addKink
us0 f245 2 1728 984 #addKink
us0 f245 1 0.2161664851357659 0 0 #arcLabel
us0 f249 expr out #txt
us0 f249 1327 1082 1328 1108 #arcP
us0 f250 expr out #txt
us0 f250 1232 1074 1232 1098 #arcP
us0 f250 0 0.5088244683915205 0 0 #arcLabel
us0 f247 expr out #txt
us0 f247 1232 1172 1232 1203 #arcP
us0 f246 expr in #txt
us0 f246 1232 1126 1232 1148 #arcP
us0 f248 expr in #txt
us0 f248 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancel</name>
        <nameStyle>6
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f248 3546 1184 3550 1352 #arcP
us0 f248 1 3492 1184 #addKink
us0 f248 2 3492 1352 #addKink
us0 f248 1 0.3632692585129014 0 0 #arcLabel
us0 f251 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Called when the
F2 key is pressed
on selected File</name>
        <nameStyle>50
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f251 3123 771 107 58 -48 -24 #rect
us0 f251 @|IBIcon #fIcon
us0 f251 -1|-1|-16777216 #nodeStyle
us0 f252 3175 829 3270 830 #arcP
us0 f253 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Called by the SE_renameFile
@System from within the
_renameFile()
callback method.</name>
        <nameStyle>82
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f253 3243 715 170 74 -80 -32 #rect
us0 f253 @|IBIcon #fIcon
us0 f253 -1|-1|-16777216 #nodeStyle
us0 f254 3328 789 3422 828 #arcP
us0 f255 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f255 2782 926 20 20 13 0 #rect
us0 f255 @|RichDialogProcessEndIcon #fIcon
us0 f256 expr in #txt
us0 f256 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f256 2792 894 2792 926 #arcP
us0 f257 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Called when the
CTRL+V key is pressed
</name>
        <nameStyle>38
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f257 2475 1043 139 58 -64 -24 #rect
us0 f257 @|IBIcon #fIcon
us0 f257 -1|-1|-16777216 #nodeStyle
us0 f258 2543 1043 2654 1011 #arcP
us0 f259 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Called when the
CTRL+C key is pressed
</name>
        <nameStyle>38
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f259 2578 723 141 58 -65 -24 #rect
us0 f259 @|IBIcon #fIcon
us0 f259 -1|-1|-16777216 #nodeStyle
us0 f260 2577 752 2526 816 #arcP
us0 f261 guid 13543AADBB5ACA78 #txt
us0 f261 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f261 method copyAllToNewDestination(String,Boolean,Boolean) #txt
us0 f261 disableUIEvents false #txt
us0 f261 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String destPath,java.lang.Boolean redirectServerPathToDestination,java.lang.Boolean eraseOldPath> param = methodEvent.getInputArguments();
' #txt
us0 f261 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.DirectoryHelper;
try{
	String old= out.serverPath;
	DirectoryHelper.copyDirectory(out.serverPath,param.destPath,out.fileManagementHandler);
	
	if(param.redirectServerPathToDestination)
	{
		panel.setServerPath(param.destPath);
	}
	
	if(param.eraseOldPath && param.redirectServerPathToDestination){
		try{
			out.fileManagementHandler.deleteDirectory(old);
		}catch(Exception ex)
		{
			
		}
	}
}catch(Throwable t)
{
	out.errorUtil.panelId = out.panelId;
	out.errorUtil.errorOccurred=true;
	out.errorUtil.throwable = t;
	out.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(out.errorUtil);

}' #txt
us0 f261 outParameterDecl '<> result;
' #txt
us0 f261 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>copyAllToNewDestination(String,Boolean)</name>
        <nameStyle>39,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f261 734 1054 20 20 13 0 #rect
us0 f261 @|RichDialogMethodStartIcon #fIcon
us0 f264 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f264 734 1126 20 20 13 0 #rect
us0 f264 @|RichDialogProcessEndIcon #fIcon
us0 f266 expr out #txt
us0 f266 744 1074 744 1126 #arcP
us0 f262 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f262 actionTable 'out=in;
' #txt
us0 f262 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
if(ivy.session.getSessionUser() != null){
	out.applicationUserName= ivy.session.getSessionUserName();
}else{
	out.applicationUserName="";
}
if(in.errorUtil.applicationId<=0){
	out.errorUtil.applicationId = ivy.case.getIdentifier();
}

panel.directorySecurityManagerPanel.visible=false;
panel.filesTableScrollPane.visible=true;

out.panelId = System.nanoTime();

' #txt
us0 f262 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f262 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set default settings
set tables names
</name>
        <nameStyle>38
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f262 318 396 36 24 -129 -18 #rect
us0 f262 @|RichDialogProcessStepIcon #fIcon
us0 f263 expr out #txt
us0 f263 446 264 336 396 #arcP
us0 f263 1 336 264 #addKink
us0 f263 0 0.8017350514875173 0 0 #arcLabel
us0 f110 expr out #txt
us0 f110 446 336 336 396 #arcP
us0 f110 1 336 336 #addKink
us0 f110 0 0.6667470654492814 0 0 #arcLabel
us0 f111 expr out #txt
us0 f111 446 232 336 396 #arcP
us0 f111 1 336 232 #addKink
us0 f111 0 0.9655981853543215 0 0 #arcLabel
us0 f54 expr out #txt
us0 f54 446 200 336 396 #arcP
us0 f54 1 336 200 #addKink
us0 f54 1 0.16145705682114764 0 0 #arcLabel
us0 f109 expr out #txt
us0 f109 446 136 336 396 #arcP
us0 f109 1 336 136 #addKink
us0 f109 1 0.38496922166981523 0 0 #arcLabel
us0 f4 expr out #txt
us0 f4 336 106 336 396 #arcP
us0 f4 0 0.04582867398832747 0 0 #arcLabel
us0 f96 expr out #txt
us0 f96 446 98 336 396 #arcP
us0 f96 1 336 128 #addKink
us0 f96 0 0.8922030298822536 0 0 #arcLabel
us0 f93 expr out #txt
us0 f93 446 168 336 396 #arcP
us0 f93 1 336 168 #addKink
us0 f93 1 0.3179945524515271 0 0 #arcLabel
us0 f265 expr out #txt
us0 f265 446 504 336 420 #arcP
us0 f265 1 424 504 #addKink
us0 f265 0 0.6509387714133352 0 0 #arcLabel
us0 f267 expr out #txt
us0 f267 446 408 354 408 #arcP
us0 f271 expr out #txt
us0 f271 272 90 322 396 #arcP
us0 f271 1 272 352 #addKink
us0 f271 0 0.6445356685773753 0 0 #arcLabel
us0 f35 expr out #txt
us0 f35 336 420 336 514 #arcP
us0 f91 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f91 actionTable 'out=in;
' #txt
us0 f91 actionCode panel.enabled=false; #txt
us0 f91 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f91 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>just disable the panel
the serverPath can be set after
in case of lazy loading for example</name>
        <nameStyle>90
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f91 558 668 36 24 23 -19 #rect
us0 f91 @|RichDialogProcessStepIcon #fIcon
us0 f123 expr in #txt
us0 f123 outCond in.configurationController.rootPath.length()==0 #txt
us0 f123 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>The rootPath
is not set</name>
        <nameStyle>23
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f123 349 529 576 668 #arcP
us0 f123 1 576 544 #addKink
us0 f123 1 0.37918102700536177 9 0 #arcLabel
us0 f161 expr in #txt
us0 f161 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>all is OK</name>
        <nameStyle>9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f161 336 542 336 604 #arcP
us0 f349 expr out #txt
us0 f349 32 604 326 1024 #arcP
us0 f349 1 32 1024 #addKink
us0 f349 0 0.8912822456699283 0 0 #arcLabel
us0 f350 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f350 actionTable 'out=in;
' #txt
us0 f350 actionCode panel.enabled=false; #txt
us0 f350 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f350 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>disable panel</name>
        <nameStyle>13
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f350 246 764 36 24 -93 -13 #rect
us0 f350 @|RichDialogProcessStepIcon #fIcon
us0 f351 expr in #txt
us0 f351 outCond in.errorUtil.errorOccurred #txt
us0 f351 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f351 322 688 264 764 #arcP
us0 f351 1 264 688 #addKink
us0 f351 1 0.4807692307692308 0 0 #arcLabel
us0 f270 expr out #txt
us0 f270 264 788 326 1024 #arcP
us0 f270 1 264 1024 #addKink
us0 f270 1 0.029864639113274978 0 0 #arcLabel
us0 f355 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f355 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileVersioning is activated?</name>
        <nameStyle>28
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f355 3394 1842 28 28 12 -24 #rect
us0 f355 @|AlternativeIcon #fIcon
us0 f402 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f402 3398 2094 20 20 13 0 #rect
us0 f402 @|RichDialogProcessEndIcon #fIcon
us0 f427 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f427 actionTable 'out=in;
' #txt
us0 f427 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.FileStoreDBHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

try{
	if(in.#selectedDocument!=null && Long.parseLong(in.selectedDocument.fileID)>0 && !in.selectedDocument.locked.equalsIgnoreCase("1")){
		(in.fileManagementHandler as FileStoreDBHandler).getFileVersioningController().createNewVersion(Long.parseLong(in.selectedDocument.fileID));
		if(in.configurationController.linkToVersion){
			(in.fileManagementHandler as FileStoreDBHandler).getFileLinkController()
				.updateFileLinksVersionId(Long.parseLong(in.selectedDocument.fileID), in.selectedDocument.versionnumber);
		}
		if(in.configurationController.fileActionHistoryConfiguration.activateFileActionHistory)
		{
			int i = in.selectedDocument.versionnumber+1;
			in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(Long.parseLong(in.selectedDocument.fileID),Short.parseShort("11"),in.applicationUserName,"Version "+i);
		}
		panel.refreshActualSelectedFolder();
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f427 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f427 3390 1996 36 24 20 -2 #rect
us0 f427 @|RichDialogProcessStepIcon #fIcon
us0 f527 expr in #txt
us0 f527 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f527 3394 1856 3398 2104 #arcP
us0 f527 1 3268 1856 #addKink
us0 f527 2 3268 2104 #addKink
us0 f527 1 0.3282512588169526 0 0 #arcLabel
us0 f585 guid 1357751E3DC4EFAF #txt
us0 f585 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f585 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f585 actionTable 'out=in;
' #txt
us0 f585 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>openFileVersionsPane</name>
        <nameStyle>20,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f585 3630 1782 20 20 13 0 #rect
us0 f585 @|RichDialogProcessStartIcon #fIcon
us0 f586 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f586 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileVersioning is activated?</name>
        <nameStyle>28
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f586 3626 1842 28 28 17 -19 #rect
us0 f586 @|AlternativeIcon #fIcon
us0 f618 expr out #txt
us0 f618 3640 1802 3640 1842 #arcP
us0 f619 targetWindow NEW:card: #txt
us0 f619 targetDisplay TOP #txt
us0 f619 richDialogId ch.ivyteam.ivy.addons.filemanager.FileVersionsPane #txt
us0 f619 startMethod start(ch.ivyteam.ivy.addons.filemanager.DocumentOnServer,ch.ivyteam.ivy.addons.filemanager.database.versioning.FileVersioningController) #txt
us0 f619 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f619 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer parentDocumentOnServer, ch.ivyteam.ivy.addons.filemanager.database.versioning.FileVersioningController fileVersioningController> param;' #txt
us0 f619 requestMappingAction 'param.parentDocumentOnServer=in.selectedDocument;
param.fileVersioningController=(in.fileManagementHandler as ch.ivyteam.ivy.addons.filemanager.database.FileStoreDBHandler).getFileVersioningController();
' #txt
us0 f619 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f619 responseMappingAction 'out=in;
' #txt
us0 f619 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileVersioning/plainStrings/title2\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f619 isAsynch false #txt
us0 f619 isInnerRd true #txt
us0 f619 userContext '* ' #txt
us0 f619 3622 1900 36 24 20 -2 #rect
us0 f619 @|RichDialogIcon #fIcon
us0 f620 expr in #txt
us0 f620 outCond in.configurationController.activateFileVersioning #txt
us0 f620 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f620 3640 1870 3640 1900 #arcP
us0 f621 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f621 3630 1966 20 20 13 0 #rect
us0 f621 @|RichDialogProcessEndIcon #fIcon
us0 f622 expr out #txt
us0 f622 3640 1924 3640 1966 #arcP
us0 f623 expr in #txt
us0 f623 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f623 3654 1856 3650 1976 #arcP
us0 f623 1 3708 1856 #addKink
us0 f623 2 3708 1976 #addKink
us0 f623 1 0.3307528174726791 0 0 #arcLabel
us0 f635 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f635 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected doc
valid and not
locked?</name>
        <nameStyle>34
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f635 3394 1906 28 28 -89 -21 #rect
us0 f635 @|AlternativeIcon #fIcon
us0 f636 expr in #txt
us0 f636 outCond in.configurationController.activateFileVersioning #txt
us0 f636 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f636 3408 1870 3408 1906 #arcP
us0 f430 expr in #txt
us0 f430 outCond 'in.#selectedDocument!=null && !in.selectedDocument.locked.equalsIgnoreCase("1")' #txt
us0 f430 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f430 3408 1934 3408 1996 #arcP
us0 f354 guid 1357982F0F8F987F #txt
us0 f354 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f354 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f354 actionTable 'out=in;
' #txt
us0 f354 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>makeNewVersion</name>
        <nameStyle>14,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f354 3398 1782 20 20 13 0 #rect
us0 f354 @|RichDialogProcessStartIcon #fIcon
us0 f401 expr out #txt
us0 f401 3408 1802 3408 1842 #arcP
us0 f273 guid 1363052217DFA004 #txt
us0 f273 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f273 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f273 actionTable 'out=in;
' #txt
us0 f273 actionCode 'import ch.ivyteam.ivy.addons.filemanager.IUserHelper;
import ch.ivyteam.ivy.richdialog.exec.RdEvent;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

RdEvent e = event as RdEvent;
List<java.io.File> unlockedFiles = new List<java.io.File>();
if(e.getParameter() instanceof List<DocumentOnServer>)
{
	List<DocumentOnServer> docs = e.getParameter() as List<DocumentOnServer>;
	for(DocumentOnServer doc:docs){
		if(doc.getLockingUserID()!=null && (doc.getLockingUserID().equalsIgnoreCase(in.applicationUserName) || !IUserHelper.isUserlogged(doc.getLockingUserID())))
		{//We force unlocking if the user is the one who had lock the file or the user is not logged anymore
			boolean b = in.fileManagementHandler.unlockDocument(doc);
			if(b)
			{
				unlockedFiles.add(new java.io.File(doc.getPath()));
			}
		}
	}
}

if(!unlockedFiles.isEmpty())
{
	panel.fireSE_FilesUnlocked(unlockedFiles);
}
panel.refreshActualSelectedFolder();' #txt
us0 f273 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>forceUnlockDocuments</name>
        <nameStyle>20,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f273 3670 502 20 20 13 0 #rect
us0 f273 @|RichDialogProcessStartIcon #fIcon
us0 f640 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f640 3670 550 20 20 13 0 #rect
us0 f640 @|RichDialogProcessEndIcon #fIcon
us0 f718 expr out #txt
us0 f718 3680 522 3680 550 #arcP
us0 f766 guid 13673969FBBCE730 #txt
us0 f766 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f766 method getFileVersioningController() #txt
us0 f766 disableUIEvents false #txt
us0 f766 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f766 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.database.versioning.FileVersioningController fileVersioningController> result;
' #txt
us0 f766 outActionCode 'import ch.ivyteam.ivy.addons.filemanager.database.FileStoreDBHandler;
if(in.configurationController.activateFileVersioning)
{
	result.fileVersioningController = (in.fileManagementHandler as FileStoreDBHandler).getFileVersioningController();

}else{
	
	result.fileVersioningController = null;
}' #txt
us0 f766 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getFileVersioningController()</name>
        <nameStyle>29,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f766 3438 638 20 20 -46 -37 #rect
us0 f766 @|RichDialogMethodStartIcon #fIcon
us0 f876 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f876 3438 694 20 20 13 0 #rect
us0 f876 @|RichDialogProcessEndIcon #fIcon
us0 f879 expr out #txt
us0 f879 3448 658 3448 694 #arcP
us0 f897 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f897 actionTable 'out=in;
' #txt
us0 f897 actionCode '
if(in.configurationController.useIvySystemDB)
{//the content storage is not supported yet with the use of the IvySystemDB
	in.configurationController.storeFilesInDB=false;
}

import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
if(ivy.session.getSessionUser() != null){
	out.applicationUserName= ivy.session.getSessionUserName();
}else{
	out.applicationUserName="";
}
if(in.errorUtil.applicationId<=0){
	out.errorUtil.applicationId = ivy.case.getIdentifier();
}

panel.directorySecurityManagerPanel.visible=false;
panel.filesTableScrollPane.visible=true;

out.panelId = System.nanoTime();

' #txt
us0 f897 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f897 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set default settings
set tables names</name>
        <nameStyle>37
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f897 102 172 36 24 -97 15 #rect
us0 f897 @|RichDialogProcessStepIcon #fIcon
us0 f898 expr out #txt
us0 f898 120 90 120 172 #arcP
us0 f898 0 0.5176900536721895 0 0 #arcLabel
us0 f272 expr out #txt
us0 f272 120 196 326 524 #arcP
us0 f272 1 120 440 #addKink
us0 f272 0 0.9614410605364387 0 0 #arcLabel
us0 f899 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f899 actionTable 'out=in;
' #txt
us0 f899 actionCode '
if(in.configurationController.useIvySystemDB)
{//the content storage is not supported yet with the use of the IvySystemDB
	in.configurationController.storeFilesInDB=false;
}else{
	in.configurationController.storeFilesInDB=ivy.var.xivy_addons_fileManager_activateFileContentInDatabase.trim().compareTo("1")==0;
}

in.configurationController.activateSecurity=ivy.var.xivy_addons_fileManager_activateSecurity.trim().compareTo("1")==0;
in.configurationController.activateFileVersioning=ivy.var.xivy_addons_fileManager_activateFileVersioning.trim().compareTo("1")==0;

panel.directorySecurityManagerPanel.visible=false;
panel.filesTableScrollPane.visible=true;

out.panelId = System.nanoTime();

import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
if(ivy.session.getSessionUser() != null){
	out.applicationUserName= ivy.session.getSessionUserName();
}else{
	out.applicationUserName="";
}
if(in.errorUtil.applicationId<=0){
	out.errorUtil.applicationId = ivy.case.getIdentifier();
}




' #txt
us0 f899 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f899 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>default settings
set tables names</name>
        <nameStyle>33
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f899 182 236 36 24 -71 14 #rect
us0 f899 @|RichDialogProcessStepIcon #fIcon
us0 f955 guid 13793B37CDB70090 #txt
us0 f955 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f955 method startWithConfigInGlobalVariables(String) #txt
us0 f955 disableUIEvents true #txt
us0 f955 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f955 inParameterMapAction 'out.configurationController.advancedActionsEnabled=true;
out.configurationController.rootPath=param.serverPath;
out.configurationController.useIvySystemDB=ivy.var.xivy_addons_fileManager_activateUseOfIvySystemDatabase.trim().equals("1")?true:false;
' #txt
us0 f955 outParameterDecl '<> result;
' #txt
us0 f955 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start(String,String,String)"/parameterMapping "param.ivyDBConnexionName=ivy.var.xivy_addons_fileManager_ivyDatabaseConnectionName;\nparam.dirTableName=ivy.var.xivy_addons_fileManager_directoriesTableName;\nparam.schemaName=ivy.var.xivy_addons_fileManager_databaseSchemaName;\n"/initScript ""/userContext * }}' #txt
us0 f955 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithConfigIn
GlobalVariables(String)</name>
        <nameStyle>41,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f955 190 126 20 20 -63 -46 #rect
us0 f955 @|RichDialogInitStartIcon #fIcon
us0 f962 expr out #txt
us0 f962 200 146 200 236 #arcP
us0 f963 expr out #txt
us0 f963 200 260 328 522 #arcP
us0 f963 1 200 416 #addKink
us0 f963 1 0.03158839185850695 0 0 #arcLabel
us0 f1034 expr out #txt
us0 f1034 550 364 482 336 #arcP
us0 f468 expr out #txt
us0 f468 3408 2020 3408 2094 #arcP
us0 f528 guid 137A5FB03909804F #txt
us0 f528 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f528 method start(ch.ivyteam.ivy.addons.filemanager.configuration.FileManagerConfigurationController) #txt
us0 f528 disableUIEvents true #txt
us0 f528 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.configuration.FileManagerConfigurationController filemanagerConfiguration> param = methodEvent.getInputArguments();
' #txt
us0 f528 inParameterMapAction 'out.configurationController=param.filemanagerConfiguration;
out.configurationController.advancedActionsEnabled=true;
' #txt
us0 f528 outParameterDecl '<> result;
' #txt
us0 f528 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/directorySecurityManagerPanel {/fieldName "directorySecurityManagerPanel"/startMethod "start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController)"/parameterMapping "param.configuration=callParam.filemanagerConfiguration;\n"/initScript ""/userContext * }}' #txt
us0 f528 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(FileManagerConfigurationController)</name>
        <nameStyle>41,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f528 14 294 20 20 13 0 #rect
us0 f528 @|RichDialogInitStartIcon #fIcon
us0 f723 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f723 actionTable 'out=in;
' #txt
us0 f723 actionCode 'panel.directorySecurityManagerPanel.visible=false;
' #txt
us0 f723 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f723 38 444 36 24 20 -2 #rect
us0 f723 @|RichDialogProcessStepIcon #fIcon
us0 f724 expr out #txt
us0 f724 24 314 38 456 #arcP
us0 f724 1 24 456 #addKink
us0 f724 1 0.2775003632761286 0 0 #arcLabel
us0 f720 expr out #txt
us0 f720 74 456 325 525 #arcP
us0 f765 guid 137F103F249CD51F #txt
us0 f765 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f765 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f765 actionTable 'out=in;
' #txt
us0 f765 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showFileTypesManager</name>
        <nameStyle>20,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f765 2246 2142 20 20 13 0 #rect
us0 f765 @|RichDialogProcessStartIcon #fIcon
us0 f958 guid 137F10439807F45D #txt
us0 f958 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f958 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f958 actionTable 'out=in;
' #txt
us0 f958 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showFileTypeChooser</name>
        <nameStyle>19,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f958 2446 2150 20 20 13 0 #rect
us0 f958 @|RichDialogProcessStartIcon #fIcon
us0 f960 targetWindow NEW:card: #txt
us0 f960 targetDisplay TOP #txt
us0 f960 richDialogId ch.ivyteam.ivy.addons.filemanager.filetype.FileTypesDialog #txt
us0 f960 startMethod startAsFileTypeManager(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController) #txt
us0 f960 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f960 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController configurationController> param;' #txt
us0 f960 requestMappingAction 'param.configurationController=in.configurationController;
' #txt
us0 f960 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f960 responseMappingAction 'out=in;
' #txt
us0 f960 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileTypes/strings/fileTypeManager\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f960 isAsynch false #txt
us0 f960 isInnerRd true #txt
us0 f960 userContext '* ' #txt
us0 f960 2238 2204 36 24 20 -2 #rect
us0 f960 @|RichDialogIcon #fIcon
us0 f1032 expr out #txt
us0 f1032 2256 2162 2256 2204 #arcP
us0 f1035 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1035 2246 2278 20 20 13 0 #rect
us0 f1035 @|RichDialogProcessEndIcon #fIcon
us0 f1039 expr out #txt
us0 f1039 2256 2228 2256 2278 #arcP
us0 f1040 targetWindow NEW:card: #txt
us0 f1040 targetDisplay TOP #txt
us0 f1040 richDialogId ch.ivyteam.ivy.addons.filemanager.filetype.FileTypesDialog #txt
us0 f1040 startMethod startAsFileTypeChooser(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController) #txt
us0 f1040 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1040 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController configurationController> param;' #txt
us0 f1040 requestMappingAction 'param.configurationController=in.configurationController;
' #txt
us0 f1040 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1040 responseMappingAction 'out=in;
out.responseBoolean=result.actionCancelled;
' #txt
us0 f1040 responseActionCode 'if(!result.actionCancelled)
{
	out.selectedDocument.fileType = result.choosedFileType;
}' #txt
us0 f1040 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileTypes/strings/fileTypeChooser\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1040 isAsynch false #txt
us0 f1040 isInnerRd true #txt
us0 f1040 userContext '* ' #txt
us0 f1040 2438 2204 36 24 20 -2 #rect
us0 f1040 @|RichDialogIcon #fIcon
us0 f1043 expr out #txt
us0 f1043 2456 2170 2456 2204 #arcP
us0 f1049 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1049 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>action cancelled?</name>
        <nameStyle>17
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1049 2442 2258 28 28 14 0 #rect
us0 f1049 @|AlternativeIcon #fIcon
us0 f1057 expr out #txt
us0 f1057 2456 2228 2456 2258 #arcP
us0 f1058 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1058 2446 2390 20 20 13 0 #rect
us0 f1058 @|RichDialogProcessEndIcon #fIcon
us0 f1059 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1059 actionTable 'out=in;
' #txt
us0 f1059 actionCode 'try{
	in.fileManagementHandler.saveDocumentOnServer(in.selectedDocument,"");
}catch(Throwable t){
		in.errorUtil.throwable=t;
		in.errorUtil.panelId=in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred")+" "+t.getMessage();
		ivy.log.error("Error in FileManager with file types",t);
		panel.fireErrorOccurred(in.errorUtil);


}' #txt
us0 f1059 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1059 2438 2300 36 24 20 -2 #rect
us0 f1059 @|RichDialogProcessStepIcon #fIcon
us0 f1062 expr in #txt
us0 f1062 outCond in.responseBoolean #txt
us0 f1062 2470 2272 2466 2400 #arcP
us0 f1062 1 2548 2272 #addKink
us0 f1062 2 2548 2400 #addKink
us0 f1062 1 0.21723872375613001 0 0 #arcLabel
us0 f1060 expr in #txt
us0 f1060 2456 2286 2456 2300 #arcP
us0 f1063 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1063 actionTable 'out=in;
' #txt
us0 f1063 actionCode panel.refreshActualSelectedFolder(); #txt
us0 f1063 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1063 2438 2348 36 24 20 -2 #rect
us0 f1063 @|RichDialogProcessStepIcon #fIcon
us0 f1064 expr out #txt
us0 f1064 2456 2324 2456 2348 #arcP
us0 f1061 expr out #txt
us0 f1061 2456 2372 2456 2390 #arcP
us0 f1065 guid 13801C27AF581754 #txt
us0 f1065 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1065 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1065 actionTable 'out=in;
' #txt
us0 f1065 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showTags</name>
        <nameStyle>8,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1065 2710 2142 20 20 -28 -27 #rect
us0 f1065 @|RichDialogProcessStartIcon #fIcon
us0 f1066 targetWindow NEW:card: #txt
us0 f1066 targetDisplay TOP #txt
us0 f1066 richDialogId ch.ivyteam.ivy.addons.filemanager.tag.FileTagDialog #txt
us0 f1066 startMethod start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,ch.ivyteam.ivy.addons.filemanager.DocumentOnServer,Boolean) #txt
us0 f1066 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1066 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController configurationController, ch.ivyteam.ivy.addons.filemanager.DocumentOnServer parentDocument, Boolean allowEdit> param;' #txt
us0 f1066 requestMappingAction 'param.configurationController=in.configurationController;
param.parentDocument=in.selectedDocument;
param.allowEdit=in.configurationController.allowUserToSetDocumentTags;
' #txt
us0 f1066 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1066 responseMappingAction 'out=in;
' #txt
us0 f1066 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileTags/fileTags\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1066 isAsynch false #txt
us0 f1066 isInnerRd true #txt
us0 f1066 userContext '* ' #txt
us0 f1066 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Show the tags
the possibility for the user to set the tags
is given by the corresponding configuration controller
property</name>
        <nameStyle>122
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1066 2614 2300 36 24 19 -32 #rect
us0 f1066 @|RichDialogIcon #fIcon
us0 f1068 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1068 2710 2358 20 20 13 0 #rect
us0 f1068 @|RichDialogProcessEndIcon #fIcon
us0 f1069 expr out #txt
us0 f1069 2632 2324 2710 2368 #arcP
us0 f1069 1 2632 2368 #addKink
us0 f1069 1 0.19413101043668135 0 0 #arcLabel
us0 f1070 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1070 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Does user have the right to edit the files?</name>
        <nameStyle>43
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1070 2706 2194 28 28 -69 -32 #rect
us0 f1070 @|AlternativeIcon #fIcon
us0 f1071 expr out #txt
us0 f1071 2720 2162 2720 2194 #arcP
us0 f1072 targetWindow NEW:card: #txt
us0 f1072 targetDisplay TOP #txt
us0 f1072 richDialogId ch.ivyteam.ivy.addons.filemanager.tag.FileTagDialog #txt
us0 f1072 startMethod start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,ch.ivyteam.ivy.addons.filemanager.DocumentOnServer,Boolean) #txt
us0 f1072 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1072 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController configurationController, ch.ivyteam.ivy.addons.filemanager.DocumentOnServer parentDocument, Boolean allowEdit> param;' #txt
us0 f1072 requestMappingAction 'param.configurationController=in.configurationController;
param.parentDocument=in.selectedDocument;
param.allowEdit=false;
' #txt
us0 f1072 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1072 responseMappingAction 'out=in;
' #txt
us0 f1072 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileTags/fileTags\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1072 isAsynch false #txt
us0 f1072 isInnerRd true #txt
us0 f1072 userContext '* ' #txt
us0 f1072 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show the tags
without possibility to set the tags</name>
        <nameStyle>49
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1072 2790 2236 36 24 19 -13 #rect
us0 f1072 @|RichDialogIcon #fIcon
us0 f1073 expr in #txt
us0 f1073 outCond 'in.configurationController.activateSecurity && !in.selectedFolderOnServer.canUserWriteFiles' #txt
us0 f1073 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1073 2734 2208 2808 2236 #arcP
us0 f1073 1 2808 2208 #addKink
us0 f1073 0 0.8854585704184196 0 0 #arcLabel
us0 f1067 expr in #txt
us0 f1067 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1067 2706 2208 2632 2300 #arcP
us0 f1067 1 2632 2208 #addKink
us0 f1067 1 0.15004230970721025 0 0 #arcLabel
us0 f1074 expr out #txt
us0 f1074 2808 2260 2730 2368 #arcP
us0 f1074 1 2808 2368 #addKink
us0 f1074 1 0.19793285210130512 0 0 #arcLabel
us0 f1075 guid 1380ABCD5804FE38 #txt
us0 f1075 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1075 broadcast SE_fileTypeDeleted #txt
us0 f1075 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1075 actionTable 'out=in;
' #txt
us0 f1075 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

//param.fileTypeId
if(in.configurationController.activateFileType && !in.documentsInDb.isEmpty()){
	boolean found = false;
	for(DocumentOnServer doc: in.documentsInDb)
	{
		if(doc.#fileType!= null && doc.fileType.id==param.fileTypeId)
		{
			doc.fileType = null;
			found = true;
		}
	}
	if(found){
		List<DocumentOnServer> l = new List<DocumentOnServer>();
		l.addAll(in.documentsInDb);
		in.documentsInDb.clear();
		out.documentsInDb.addAll(l);
	}
}' #txt
us0 f1075 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileTypeDeleted</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1075 6254 534 20 20 13 0 #rect
us0 f1075 @|RichDialogBroadcastStartIcon #fIcon
us0 f1076 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1076 6254 590 20 20 13 0 #rect
us0 f1076 @|RichDialogProcessEndIcon #fIcon
us0 f1077 expr out #txt
us0 f1077 6264 554 6264 590 #arcP
us0 f1078 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1078 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error?</name>
        <nameStyle>6
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1078 322 762 28 28 14 0 #rect
us0 f1078 @|AlternativeIcon #fIcon
us0 f1079 expr out #txt
us0 f1079 335 748 336 762 #arcP
us0 f1081 expr in #txt
us0 f1081 outCond in.errorUtil.errorOccurred #txt
us0 f1081 322 776 282 776 #arcP
us0 f1081 0 0.3061013388106058 0 0 #arcLabel
us0 f1086 targetWindow NEW:card: #txt
us0 f1086 targetDisplay TOP #txt
us0 f1086 richDialogId ch.ivyteam.ivy.addons.filemanager.util.FileDescriptionInput #txt
us0 f1086 startMethod start(String,Number,String) #txt
us0 f1086 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1086 requestActionDecl '<String input, Number maxChar, String textLabel> param;' #txt
us0 f1086 requestMappingAction 'param.input=in.selectedDocument.description;
param.maxChar=1024;
' #txt
us0 f1086 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1086 responseMappingAction 'out=in;
out.responseBoolean=result.cancelled;
' #txt
us0 f1086 responseActionCode 'if(!result.cancelled)
{
	in.selectedDocument.description=result.output;
}' #txt
us0 f1086 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1086 isAsynch false #txt
us0 f1086 isInnerRd true #txt
us0 f1086 userContext '* ' #txt
us0 f1086 2582 1444 36 24 20 -2 #rect
us0 f1086 @|RichDialogIcon #fIcon
us0 f1087 expr out #txt
us0 f1087 2600 1420 2600 1444 #arcP
us0 f49 expr out #txt
us0 f49 2600 1468 2600 1514 #arcP
us0 f1088 expr in #txt
us0 f1088 outCond !in.responseBoolean #txt
us0 f1088 2600 1542 2600 1572 #arcP
us0 f48 guid 139026FE65E46FD9 #txt
us0 f48 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f48 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f48 actionTable 'out=in;
' #txt
us0 f48 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>openHistory</name>
        <nameStyle>11,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f48 3814 774 20 20 13 0 #rect
us0 f48 @|RichDialogProcessStartIcon #fIcon
us0 f108 targetWindow NEW:card: #txt
us0 f108 targetDisplay TOP #txt
us0 f108 richDialogId ch.ivyteam.ivy.addons.filemanager.fileaction.FileActionHistoryViewer #txt
us0 f108 startMethod start(ch.ivyteam.ivy.addons.filemanager.database.fileaction.FileActionConfiguration,ch.ivyteam.ivy.addons.filemanager.DocumentOnServer,String) #txt
us0 f108 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f108 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.database.fileaction.FileActionConfiguration fileActionConfiguration, ch.ivyteam.ivy.addons.filemanager.DocumentOnServer document, String lang> param;' #txt
us0 f108 requestMappingAction 'param.fileActionConfiguration=in.configurationController.fileActionHistoryConfiguration;
param.document=in.selectedDocument;
param.lang=ivy.session.getContentLocale().getLanguage().toLowerCase();
' #txt
us0 f108 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f108 responseMappingAction 'out=in;
' #txt
us0 f108 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileActionHistory/label/windowTitle\")%>"/width 800 /height 300 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f108 isAsynch false #txt
us0 f108 isInnerRd true #txt
us0 f108 userContext '* ' #txt
us0 f108 3806 828 36 24 20 -2 #rect
us0 f108 @|RichDialogIcon #fIcon
us0 f200 expr out #txt
us0 f200 3824 794 3824 828 #arcP
us0 f1080 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1080 3814 886 20 20 13 0 #rect
us0 f1080 @|RichDialogProcessEndIcon #fIcon
us0 f1082 expr out #txt
us0 f1082 3824 852 3824 886 #arcP
us0 f86 expr in #txt
us0 f86 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f86 2482 424 2483 696 #arcP
us0 f86 1 2372 424 #addKink
us0 f86 2 2372 696 #addKink
us0 f86 1 0.34400431635137657 0 0 #arcLabel
us0 f1083 guid 13AB76947CF4EA4E #txt
us0 f1083 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1083 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1083 actionTable 'out=in;
' #txt
us0 f1083 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>toogle recursive menuItem</name>
        <nameStyle>25,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1083 1270 990 20 20 13 0 #rect
us0 f1083 @|RichDialogProcessStartIcon #fIcon
us0 f1084 expr out #txt
us0 f1084 1280 1010 1250 1160 #arcP
us0 f1084 1 1280 1160 #addKink
us0 f1084 0 0.6509868168131939 0 0 #arcLabel
us0 f83 guid 13CF318E539C7D84 #txt
us0 f83 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f83 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f83 actionTable 'out=in;
out.dialogParam.clickedButton="";
out.dialogParam.outputString="";
out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/enterNewDirectoryName");
' #txt
us0 f83 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;

if(panel.#ordnersTree.#selectedTreeNode != null && panel.ordnersTree.selectedTreeNode.getParent()!=null){
	FolderOnServer fos = panel.ordnersTree.selectedTreeNode.getParent().value as FolderOnServer;
	List<FolderOnServer> l = in.fileManagementHandler.getListDirectDirectoriesUnderPath(fos.path);
	in.dialogParam.stringList.clear();
	for(FolderOnServer fo:l){
		if(fo.name.compareTo(in.selectedFolderOnServer.name)!=0){
			in.dialogParam.stringList.add(fo.name);
		}
	}
}' #txt
us0 f83 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>renameDirectory</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f83 1078 1334 20 20 13 0 #rect
us0 f83 @|RichDialogProcessStartIcon #fIcon
us0 f1085 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1085 actionTable 'out=in;
' #txt
us0 f1085 actionCode 'import java.util.Iterator;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.util.PathUtil;
try{
	in.returnedMessage=in.fileManagementHandler.renameDirectory(in.selectedFolderOnServer.path,in.dialogParam.outputString);
	if(in.#returnedMessage.#hashMapFiles!=null && !in.returnedMessage.hashMapFiles.isEmpty()) {
		ivy.log.info("In Master call desktopHandlerPanel._replaceServerFileInClientServerEditCheck {0}",in.returnedMessage.hashMapFiles);
		panel.desktopHandlerPanel._replaceServerFileInClientServerEditCheck(in.returnedMessage.hashMapFiles);
	}
	if(in.returnedMessage.type==FileHandler.ERROR_MESSAGE){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.message=in.returnedMessage.text;
		panel.fireErrorOccurred(in.errorUtil);
	}else{
			java.io.File dir1 = in.returnedMessage.files.get(0);
			String oldPath = PathUtil.formatPathForDirectoryWithoutLastSeparator(dir1.getPath());
			//new dir
			java.io.File dir2 = in.returnedMessage.files.get(1);
			String nPath = PathUtil.formatPathForDirectoryWithoutLastSeparator(dir2.getPath());
			for(DocumentOnServer doc:in.documentsInDb) {
					doc.setPath(doc.getPath().replaceFirst("\\Q"+ oldPath+"\\E",nPath));
					ivy.log.info("In Master setting doc path \n{0}",doc.getPath());
			}
		in.returnedMessage.panelId=in.panelId;
		panel.fireSE_FolderOnServer_changed(in.returnedMessage);
	}
}catch(Throwable t)
{
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
		ivy.log.error(in.errorUtil.message,t);
}
panel.refresh();' #txt
us0 f1085 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1085 1070 1484 36 24 20 -2 #rect
us0 f1085 @|RichDialogProcessStepIcon #fIcon
us0 f1090 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1090 1078 1558 20 20 13 0 #rect
us0 f1090 @|RichDialogProcessEndIcon #fIcon
us0 f1091 expr out #txt
us0 f1091 1088 1508 1088 1558 #arcP
us0 f1094 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1094 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>New Name not empty
and not cancel</name>
        <nameStyle>19,0,7,9
14,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1094 1074 1426 28 28 20 -15 #rect
us0 f1094 @|AlternativeIcon #fIcon
us0 f1089 expr in #txt
us0 f1089 outCond 'in.dialogParam.outputString.trim().length()>0 && in.dialogParam.clickedButton.equalsIgnoreCase("OK") && in.dialogParam.outputString.compareTo(in.selectedFolderOnServer.name)!=0' #txt
us0 f1089 1088 1454 1088 1484 #arcP
us0 f1097 expr in #txt
us0 f1097 1074 1440 1078 1568 #arcP
us0 f1097 1 1032 1440 #addKink
us0 f1097 2 1032 1568 #addKink
us0 f1097 1 0.39232327261597666 0 0 #arcLabel
us0 f1098 guid 13D83466311799A7 #txt
us0 f1098 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1098 broadcast SE_fileChanged #txt
us0 f1098 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1098 actionTable 'out=in;
' #txt
us0 f1098 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(param.#fileId !=null){
	try{
		
		for(int i=0; i<in.documentsInDb.size();i++)
		{
			if(in.documentsInDb.get(i).fileID.compareTo(param.fileId)==0){
				out.documentsInDb.set(i,in.fileManagementHandler.getDocumentOnServerById(Long.parseLong(param.fileId),false));
				break;
			}
		}
	}catch(Exception ex){//ignore
	}
}' #txt
us0 f1098 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileChanged</name>
        <nameStyle>14,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1098 6254 662 20 20 13 0 #rect
us0 f1098 @|RichDialogBroadcastStartIcon #fIcon
us0 f1099 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1099 6254 782 20 20 13 0 #rect
us0 f1099 @|RichDialogProcessEndIcon #fIcon
us0 f1100 expr out #txt
us0 f1100 6264 682 6264 782 #arcP
us0 f1101 targetWindow NEW:card: #txt
us0 f1101 targetDisplay TOP #txt
us0 f1101 richDialogId ch.ivyteam.ivy.addons.filemanager.util.FileAndDirectoryNameDialog #txt
us0 f1101 startMethod start(String,String,List<String>,String,String,Number) #txt
us0 f1101 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1101 requestActionDecl '<String text, String name, List<String> excludeNames, String excludePattern, String iconUri, Number type> param;' #txt
us0 f1101 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/newDirName");
param.name=in.selectedFolderOnServer.name;
param.excludeNames=in.dialogParam.stringList;
param.excludePattern=".*[%].*";
param.type=1;
' #txt
us0 f1101 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1101 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.clickedButton;
out.dialogParam.outputString=result.name;
' #txt
us0 f1101 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1101 isAsynch false #txt
us0 f1101 isInnerRd true #txt
us0 f1101 userContext '* ' #txt
us0 f1101 1070 1380 36 24 20 -2 #rect
us0 f1101 @|RichDialogIcon #fIcon
us0 f1102 expr out #txt
us0 f1102 1088 1354 1088 1380 #arcP
us0 f1096 expr out #txt
us0 f1096 1088 1404 1088 1426 #arcP
us0 f1103 targetWindow NEW:card: #txt
us0 f1103 targetDisplay TOP #txt
us0 f1103 richDialogId ch.ivyteam.ivy.addons.filemanager.util.FileAndDirectoryNameDialog #txt
us0 f1103 startMethod start(String,String,List<String>,String,String,Number) #txt
us0 f1103 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1103 requestActionDecl '<String text, String name, List<String> excludeNames, String excludePattern, String iconUri, Number type> param;' #txt
us0 f1103 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/newDirName");
param.excludeNames=in.dialogParam.stringList;
param.excludePattern=".*[%].*";
param.type=1;
' #txt
us0 f1103 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1103 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.clickedButton;
out.dialogParam.outputString=result.name;
' #txt
us0 f1103 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1103 isAsynch false #txt
us0 f1103 isInnerRd true #txt
us0 f1103 userContext '* ' #txt
us0 f1103 1462 164 36 24 20 -2 #rect
us0 f1103 @|RichDialogIcon #fIcon
us0 f1104 expr out #txt
us0 f1104 1480 114 1480 164 #arcP
us0 f363 expr out #txt
us0 f363 1480 188 1480 210 #arcP
us0 f1107 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1107 actionTable 'out=in;
' #txt
us0 f1107 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterAnswer;
try{
	in.fileToEdit = null;
	boolean allow =true;
	if(in.#configurationController.#documentFilter!=null) {
		DocumentFilterAnswer answer = in.configurationController.documentFilter.allowAction(in.selectedDocument,ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterActionEnum.EDIT);
		allow = answer.allow;
		if(!allow) {
			in.errorUtil.panelId = in.panelId;
			in.errorUtil.errorOccurred=false;
			in.errorUtil.message =answer.message;
			in.dialogParam.windowTitle = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/actionVorbidden");
			panel.fireErrorOccurred(in.errorUtil);
		}
	}
	if(allow){
		in.fileToEdit = in.fileManagementHandler.getDocumentOnServerWithJavaFile(in.selectedDocument).getJavaFile();
		if(in.#fileToEdit!=null && in.fileToEdit.isFile()){
			out.selectedDocument.setJavaFile(in.fileToEdit);
		}
	}
}catch(Throwable t){
	ivy.log.error(t.getMessage(),t);
}' #txt
us0 f1107 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1107 3038 124 36 24 20 -2 #rect
us0 f1107 @|RichDialogProcessStepIcon #fIcon
us0 f1106 expr out #txt
us0 f1106 3056 148 3056 170 #arcP
us0 f1109 expr out #txt
us0 f1109 3056 106 3056 124 #arcP
us0 f731 guid 13D884BA64996AE5 #txt
us0 f731 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f731 method _editSelectedFile() #txt
us0 f731 disableUIEvents false #txt
us0 f731 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_editSelectedFile()</name>
    </language>
</elementInfo>
' #txt
us0 f731 3110 86 20 20 -29 -26 #rect
us0 f731 @|RichDialogMethodStartIcon #fIcon
us0 f1105 expr out #txt
us0 f1105 3111 101 3074 125 #arcP
us0 f1108 guid 13D884BC2801C9A3 #txt
us0 f1108 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1108 method _readSelectedFile() #txt
us0 f1108 disableUIEvents false #txt
us0 f1108 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_readSelectedFile()</name>
    </language>
</elementInfo>
' #txt
us0 f1108 3150 142 20 20 -17 8 #rect
us0 f1108 @|RichDialogMethodStartIcon #fIcon
us0 f1110 expr out #txt
us0 f1110 3168 157 3232 420 #arcP
us0 f1110 1 3232 200 #addKink
us0 f1110 1 0.40430275370291474 0 0 #arcLabel
us0 f1111 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1111 actionTable 'out=in;
' #txt
us0 f1111 actionCode panel._readSelectedFile(); #txt
us0 f1111 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1111 3038 316 36 24 20 -2 #rect
us0 f1111 @|RichDialogProcessStepIcon #fIcon
us0 f1112 expr in #txt
us0 f1112 3056 286 3056 316 #arcP
us0 f1113 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1113 3046 366 20 20 13 0 #rect
us0 f1113 @|RichDialogProcessEndIcon #fIcon
us0 f1114 expr out #txt
us0 f1114 3056 340 3056 366 #arcP
us0 f1115 targetWindow NEW:card: #txt
us0 f1115 targetDisplay TOP #txt
us0 f1115 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f1115 startMethod start(String,String) #txt
us0 f1115 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1115 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f1115 requestMappingAction 'param.text=in.returnedMessage.text;
param.iconUri="/ch/ivyteam/ivy/addons/icons/close/48";
' #txt
us0 f1115 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1115 responseMappingAction 'out=in;
' #txt
us0 f1115 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1115 isAsynch false #txt
us0 f1115 isInnerRd true #txt
us0 f1115 userContext '* ' #txt
us0 f1115 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1115 4102 300 36 24 -114 -3 #rect
us0 f1115 @|RichDialogIcon #fIcon
us0 f1115 -65536|-1|-16777216 #nodeStyle
us0 f1116 expr out #txt
us0 f1116 4120 268 4120 300 #arcP
us0 f593 expr out #txt
us0 f593 4138 312 4171 312 #arcP
us0 f1117 targetWindow NEW:card: #txt
us0 f1117 targetDisplay TOP #txt
us0 f1117 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f1117 startMethod start(String,String) #txt
us0 f1117 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1117 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f1117 requestMappingAction 'param.text="<html>"+in.errorUtil.message+IF(in.#errorUtil.#throwable!=null," <br>"+in.errorUtil.throwable.getMessage(),"");
param.iconUri="/ch/ivyteam/ivy/addons/icons/close/48";
' #txt
us0 f1117 requestActionCode 'if(in.#errorUtil.#throwable!=null){
	ivy.log.error(in.errorUtil.throwable.getMessage(),in.errorUtil.throwable);
}' #txt
us0 f1117 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1117 responseMappingAction 'out=in;
' #txt
us0 f1117 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1117 isAsynch false #txt
us0 f1117 isInnerRd true #txt
us0 f1117 userContext '* ' #txt
us0 f1117 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1117 6438 268 36 24 -43 14 #rect
us0 f1117 @|RichDialogIcon #fIcon
us0 f546 expr out #txt
us0 f546 6456 292 6483 327 #arcP
us0 f587 targetWindow NEW:card: #txt
us0 f587 targetDisplay TOP #txt
us0 f587 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f587 startMethod start(String,String) #txt
us0 f587 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f587 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f587 requestMappingAction 'param.text=in.returnedMessage.text;
param.iconUri="/ch/ivyteam/ivy/addons/icons/close/48";
' #txt
us0 f587 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f587 responseMappingAction 'out=in;
' #txt
us0 f587 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f587 isAsynch false #txt
us0 f587 isInnerRd true #txt
us0 f587 userContext '* ' #txt
us0 f587 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f587 1918 340 36 24 24 -9 #rect
us0 f587 @|RichDialogIcon #fIcon
us0 f587 -65536|-1|-16777216 #nodeStyle
us0 f383 expr in #txt
us0 f383 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f383 1854 352 1918 352 #arcP
us0 f382 expr out #txt
us0 f382 1936 364 1858 408 #arcP
us0 f382 1 1936 408 #addKink
us0 f382 1 0.19183964037452514 0 0 #arcLabel
us0 f685 expr in #txt
us0 f685 1854 256 1918 256 #arcP
us0 f545 expr out #txt
us0 f545 1954 256 2011 256 #arcP
us0 f113 targetWindow NEW:card: #txt
us0 f113 targetDisplay TOP #txt
us0 f113 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f113 startMethod start(String,String) #txt
us0 f113 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f113 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f113 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/cannotDeleteMoreThanOneDirectory");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f113 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f113 responseMappingAction 'out=in;
' #txt
us0 f113 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f113 isAsynch false #txt
us0 f113 isInnerRd true #txt
us0 f113 userContext '* ' #txt
us0 f113 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f113 1918 244 36 24 -21 19 #rect
us0 f113 @|RichDialogIcon #fIcon
us0 f113 -65536|-1|-16777216 #nodeStyle
us0 f386 targetWindow NEW:card: #txt
us0 f386 targetDisplay TOP #txt
us0 f386 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f386 startMethod start(String,String) #txt
us0 f386 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f386 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f386 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/rootFolderCannotDelete");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f386 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f386 responseMappingAction 'out=in;
' #txt
us0 f386 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 400 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f386 isAsynch false #txt
us0 f386 isInnerRd true #txt
us0 f386 userContext '* ' #txt
us0 f386 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f386 1902 620 36 24 -21 19 #rect
us0 f386 @|RichDialogIcon #fIcon
us0 f386 -65536|-1|-16777216 #nodeStyle
us0 f448 expr in #txt
us0 f448 1854 632 1902 632 #arcP
us0 f356 expr out #txt
us0 f356 1938 632 1979 632 #arcP
us0 f238 targetWindow NEW:card: #txt
us0 f238 targetDisplay TOP #txt
us0 f238 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f238 startMethod start(String,String) #txt
us0 f238 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f238 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f238 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f238 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f238 responseMappingAction 'out=in;
' #txt
us0 f238 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 400 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f238 isAsynch false #txt
us0 f238 isInnerRd true #txt
us0 f238 userContext '* ' #txt
us0 f238 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f238 1902 724 36 24 -35 13 #rect
us0 f238 @|RichDialogIcon #fIcon
us0 f238 -65536|-1|-16777216 #nodeStyle
us0 f364 expr in #txt
us0 f364 1854 736 1902 736 #arcP
us0 f405 expr out #txt
us0 f405 1938 736 1987 736 #arcP
us0 f409 targetWindow NEW:card: #txt
us0 f409 targetDisplay TOP #txt
us0 f409 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f409 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
us0 f409 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f409 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
us0 f409 requestMappingAction 'param.text="<html>"+ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/confirmDeleteDirectory")+"<br>"+in.selectedFolderOnServer.name;
param.iconUri="/ch/ivyteam/ivy/addons/icons/question/48";
param.buttonsList=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultPressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f409 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f409 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.pressedButton;
' #txt
us0 f409 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f409 isAsynch false #txt
us0 f409 isInnerRd true #txt
us0 f409 userContext '* ' #txt
us0 f409 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ask to confirm</name>
        <nameStyle>14,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f409 1822 828 36 24 20 -2 #rect
us0 f409 @|RichDialogIcon #fIcon
us0 f684 expr out #txt
us0 f684 1840 804 1840 828 #arcP
us0 f394 expr out #txt
us0 f394 1840 852 1840 866 #arcP
us0 f376 targetWindow NEW:card: #txt
us0 f376 targetDisplay TOP #txt
us0 f376 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f376 startMethod start(String,String) #txt
us0 f376 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f376 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f376 requestMappingAction 'param.text=in.returnedMessage.text;
param.iconUri="/ch/ivyteam/ivy/addons/icons/close/48";
' #txt
us0 f376 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f376 responseMappingAction 'out=in;
' #txt
us0 f376 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f376 isAsynch false #txt
us0 f376 isInnerRd true #txt
us0 f376 userContext '* ' #txt
us0 f376 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f376 1622 1356 36 24 -50 16 #rect
us0 f376 @|RichDialogIcon #fIcon
us0 f376 -65536|-1|-16777216 #nodeStyle
us0 f393 expr out #txt
us0 f393 1686 1368 1658 1368 #arcP
us0 f396 expr out #txt
us0 f396 1622 1368 1602 1368 #arcP
us0 f375 targetWindow NEW:card: #txt
us0 f375 targetDisplay TOP #txt
us0 f375 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f375 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
us0 f375 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f375 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
us0 f375 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri=in.dialogParam.icon;
param.buttonsList=in.dialogParam.buttons;
param.defaultPressedButton=in.dialogParam.defaultButton;
' #txt
us0 f375 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f375 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.pressedButton;
' #txt
us0 f375 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f375 isAsynch false #txt
us0 f375 isInnerRd true #txt
us0 f375 userContext '* ' #txt
us0 f375 2478 364 36 24 20 -2 #rect
us0 f375 @|RichDialogIcon #fIcon
us0 f481 expr out #txt
us0 f481 2496 388 2496 410 #arcP
us0 f38 targetWindow NEW:card: #txt
us0 f38 targetDisplay TOP #txt
us0 f38 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f38 startMethod start(String,String) #txt
us0 f38 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f38 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f38 requestMappingAction 'param.text="<html>"+ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/noRightsToDeleteFiles");
' #txt
us0 f38 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f38 responseMappingAction 'out=in;
' #txt
us0 f38 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 400 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f38 isAsynch false #txt
us0 f38 isInnerRd true #txt
us0 f38 userContext '* ' #txt
us0 f38 2630 132 36 24 20 -2 #rect
us0 f38 @|RichDialogIcon #fIcon
us0 f292 expr out #txt
us0 f292 2602 144 2630 144 #arcP
us0 f904 expr out #txt
us0 f904 2648 156 2648 174 #arcP
us0 f905 targetWindow NEW:card: #txt
us0 f905 targetDisplay TOP #txt
us0 f905 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f905 startMethod start(String,String) #txt
us0 f905 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f905 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f905 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileNotEditable");
' #txt
us0 f905 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f905 responseMappingAction 'out=in;
' #txt
us0 f905 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f905 isAsynch false #txt
us0 f905 isInnerRd true #txt
us0 f905 userContext '* ' #txt
us0 f905 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Inform the user
that open in read
 only mode</name>
        <nameStyle>44,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f905 2710 220 36 24 23 -33 #rect
us0 f905 @|RichDialogIcon #fIcon
us0 f907 expr out #txt
us0 f907 2728 196 2728 220 #arcP
us0 f131 expr out #txt
us0 f131 2728 244 2728 276 #arcP
us0 f673 targetWindow NEW:card: #txt
us0 f673 targetDisplay TOP #txt
us0 f673 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f673 startMethod start(String,String) #txt
us0 f673 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f673 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f673 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/userHasNoRightToEditFile");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f673 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f673 responseMappingAction 'out=in;
' #txt
us0 f673 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f673 isAsynch false #txt
us0 f673 isInnerRd true #txt
us0 f673 userContext '* ' #txt
us0 f673 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Inform the user
that open in read
 only mode</name>
        <nameStyle>44,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f673 3150 260 36 24 -46 14 #rect
us0 f673 @|RichDialogIcon #fIcon
us0 f908 expr out #txt
us0 f908 3186 272 3232 420 #arcP
us0 f908 1 3204 272 #addKink
us0 f908 1 0.3589147769066142 0 0 #arcLabel
us0 f732 targetWindow NEW:card: #txt
us0 f732 targetDisplay TOP #txt
us0 f732 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f732 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
us0 f732 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f732 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
us0 f732 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filetoEditLocked");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
param.buttonsList=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultPressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f732 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f732 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.pressedButton;
' #txt
us0 f732 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f732 isAsynch false #txt
us0 f732 isInnerRd true #txt
us0 f732 userContext '* ' #txt
us0 f732 2974 388 36 24 20 -2 #rect
us0 f732 @|RichDialogIcon #fIcon
us0 f58 expr out #txt
us0 f58 2992 412 2992 490 #arcP
us0 f909 expr in #txt
us0 f909 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f909 2878 400 2974 400 #arcP
us0 f909 0 0.425 0 -7 #arcLabel
us0 f201 targetWindow NEW:card: #txt
us0 f201 targetDisplay TOP #txt
us0 f201 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f201 startMethod start(String,String) #txt
us0 f201 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f201 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f201 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/userHasNoRightToPasteFile");
' #txt
us0 f201 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f201 responseMappingAction 'out=in;
' #txt
us0 f201 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f201 isAsynch false #txt
us0 f201 isInnerRd true #txt
us0 f201 userContext '* ' #txt
us0 f201 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inform the user</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f201 2798 1124 36 24 -88 6 #rect
us0 f201 @|RichDialogIcon #fIcon
us0 f204 expr out #txt
us0 f204 2816 1100 2816 1124 #arcP
us0 f236 expr out #txt
us0 f236 2816 1148 2816 1174 #arcP
us0 f237 targetWindow NEW:card: #txt
us0 f237 targetDisplay TOP #txt
us0 f237 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f237 startMethod start(String,String) #txt
us0 f237 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f237 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f237 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filesNotMovedBecauseLocked");
' #txt
us0 f237 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f237 responseMappingAction 'out=in;
' #txt
us0 f237 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f237 isAsynch false #txt
us0 f237 isInnerRd true #txt
us0 f237 userContext '* ' #txt
us0 f237 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inform the user</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f237 2846 1260 36 24 -88 6 #rect
us0 f237 @|RichDialogIcon #fIcon
us0 f910 expr out #txt
us0 f910 2864 1236 2864 1260 #arcP
us0 f577 expr out #txt
us0 f577 2882 1272 2966 1272 #arcP
us0 f578 targetWindow NEW:card: #txt
us0 f578 targetDisplay TOP #txt
us0 f578 richDialogId ch.ivyteam.ivy.addons.filemanager.util.FileAndDirectoryNameDialog #txt
us0 f578 startMethod start(String,String,List<String>,String,String,Number) #txt
us0 f578 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f578 requestActionDecl '<String text, String name, List<String> excludeNames, String excludePattern, String iconUri, Number type> param;' #txt
us0 f578 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/action/enterNameOfZip");
param.iconUri="/ch/ivyteam/ivy/addons/icons/zipArchive/48";
param.type=2;
' #txt
us0 f578 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f578 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.clickedButton;
out.dialogParam.outputString=result.name;
' #txt
us0 f578 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/enterFileName\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f578 isAsynch false #txt
us0 f578 isInnerRd true #txt
us0 f578 userContext '* ' #txt
us0 f578 3286 1316 36 24 20 -2 #rect
us0 f578 @|RichDialogIcon #fIcon
us0 f322 expr out #txt
us0 f322 3304 1340 3304 1386 #arcP
us0 f624 expr in #txt
us0 f624 outCond !in.selectedDocuments.isEmpty() #txt
us0 f624 3304 1270 3304 1316 #arcP
us0 f321 targetWindow NEW:card: #txt
us0 f321 targetDisplay TOP #txt
us0 f321 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f321 startMethod start(String,String) #txt
us0 f321 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f321 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f321 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/fileNotCreated")+"<br>"+in.returnedMessage.text;
param.iconUri="/ch/ivyteam/ivy/addons/icons/close/48";
' #txt
us0 f321 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f321 responseMappingAction 'out=in;
' #txt
us0 f321 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f321 isAsynch false #txt
us0 f321 isInnerRd true #txt
us0 f321 userContext '* ' #txt
us0 f321 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f321 3190 1516 36 24 -50 16 #rect
us0 f321 @|RichDialogIcon #fIcon
us0 f321 -65536|-1|-16777216 #nodeStyle
us0 f323 expr in #txt
us0 f323 3290 1528 3226 1528 #arcP
us0 f325 expr out #txt
us0 f325 3208 1540 3291 1648 #arcP
us0 f325 1 3208 1648 #addKink
us0 f325 0 0.9042552477560685 0 0 #arcLabel
us0 f328 targetWindow NEW:card: #txt
us0 f328 targetDisplay TOP #txt
us0 f328 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f328 startMethod start(String,String) #txt
us0 f328 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f328 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f328 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/userHasNoRightToRenameFile");
' #txt
us0 f328 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f328 responseMappingAction 'out=in;
' #txt
us0 f328 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f328 isAsynch false #txt
us0 f328 isInnerRd true #txt
us0 f328 userContext '* ' #txt
us0 f328 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f328 3446 988 36 24 -50 16 #rect
us0 f328 @|RichDialogIcon #fIcon
us0 f328 -14336|-1|-16777216 #nodeStyle
us0 f463 expr in #txt
us0 f463 3546 1000 3482 1000 #arcP
us0 f465 expr out #txt
us0 f465 3464 1012 3464 1086 #arcP
us0 f466 targetWindow NEW:card: #txt
us0 f466 targetDisplay TOP #txt
us0 f466 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f466 startMethod start(String,String) #txt
us0 f466 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f466 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f466 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filetoRenameLocked");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f466 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f466 responseMappingAction 'out=in;
' #txt
us0 f466 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f466 isAsynch false #txt
us0 f466 isInnerRd true #txt
us0 f466 userContext '* ' #txt
us0 f466 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f466 3678 964 36 24 -50 16 #rect
us0 f466 @|RichDialogIcon #fIcon
us0 f466 -14336|-1|-16777216 #nodeStyle
us0 f477 expr in #txt
us0 f477 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>LOCKED</name>
        <nameStyle>6,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f477 3569 894 3678 964 #arcP
us0 f478 expr out #txt
us0 f478 3696 988 3696 1030 #arcP
us0 f736 targetWindow NEW:card: #txt
us0 f736 targetDisplay TOP #txt
us0 f736 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f736 startMethod start(String,String) #txt
us0 f736 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f736 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f736 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileVersioning/messages/createVersionNotPossible");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f736 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f736 responseMappingAction 'out=in;
' #txt
us0 f736 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f736 isAsynch false #txt
us0 f736 isInnerRd true #txt
us0 f736 userContext '* ' #txt
us0 f736 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f736 3510 1956 36 24 -50 16 #rect
us0 f736 @|RichDialogIcon #fIcon
us0 f736 -14336|-1|-16777216 #nodeStyle
us0 f737 expr in #txt
us0 f737 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f737 3422 1920 3528 1956 #arcP
us0 f737 1 3528 1920 #addKink
us0 f737 0 0.6896250926254964 0 0 #arcLabel
us0 f700 expr out #txt
us0 f700 3528 1980 3414 2096 #arcP
us0 f644 targetWindow NEW:card: #txt
us0 f644 targetDisplay TOP #txt
us0 f644 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f644 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
us0 f644 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f644 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
us0 f644 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
param.buttonsList=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultPressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f644 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f644 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.pressedButton;
' #txt
us0 f644 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f644 isAsynch false #txt
us0 f644 isInnerRd true #txt
us0 f644 userContext '* ' #txt
us0 f644 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ask if overwrite</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f644 4118 892 36 24 20 -2 #rect
us0 f644 @|RichDialogIcon #fIcon
us0 f719 expr out #txt
us0 f719 4136 860 4136 892 #arcP
us0 f746 expr out #txt
us0 f746 4136 916 4136 954 #arcP
us0 f747 targetWindow NEW:card: #txt
us0 f747 targetDisplay TOP #txt
us0 f747 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f747 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
us0 f747 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f747 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
us0 f747 requestMappingAction 'param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
param.buttonsList=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultPressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f747 requestActionCode 'String s = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFiles").replaceAll("</html>","");
if(!s.startsWith("<html>")){
	s="<html>"+ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFiles").replaceAll("</html>","");
}
s+=in.dialogParam.message;
param.text=s;' #txt
us0 f747 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f747 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.pressedButton;
' #txt
us0 f747 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f747 isAsynch false #txt
us0 f747 isInnerRd true #txt
us0 f747 userContext '* ' #txt
us0 f747 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ask if overwrite</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f747 4550 860 36 24 20 -2 #rect
us0 f747 @|RichDialogIcon #fIcon
us0 f750 expr out #txt
us0 f750 4568 836 4568 860 #arcP
us0 f589 expr out #txt
us0 f589 4568 884 4568 914 #arcP
us0 f912 targetWindow NEW:card: #txt
us0 f912 targetDisplay TOP #txt
us0 f912 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f912 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
us0 f912 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f912 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
us0 f912 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileToUploadAlreadyExists").replaceFirst("</html>","")+"\n"+in.fileUpload.getName()+"</html>";
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
param.buttonsList=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultPressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f912 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f912 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.pressedButton;
' #txt
us0 f912 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f912 isAsynch false #txt
us0 f912 isInnerRd true #txt
us0 f912 userContext '* ' #txt
us0 f912 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask if replace the
existing file on the server</name>
        <nameStyle>46,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f912 5182 916 36 24 20 -2 #rect
us0 f912 @|RichDialogIcon #fIcon
us0 f916 expr out #txt
us0 f916 5200 900 5200 916 #arcP
us0 f332 expr out #txt
us0 f332 5200 940 5200 962 #arcP
us0 f917 targetWindow NEW:card: #txt
us0 f917 targetDisplay TOP #txt
us0 f917 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f917 startMethod start(String,String) #txt
us0 f917 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f917 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f917 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileExistsAndLocked");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f917 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f917 responseMappingAction 'out=in;
' #txt
us0 f917 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f917 isAsynch false #txt
us0 f917 isInnerRd true #txt
us0 f917 userContext '* ' #txt
us0 f917 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>tells the user
the file exists and 
is currently edited</name>
        <nameStyle>55,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f917 5062 884 36 24 -102 -10 #rect
us0 f917 @|RichDialogIcon #fIcon
us0 f47 expr in #txt
us0 f47 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f47 5186 832 5080 884 #arcP
us0 f47 1 5080 832 #addKink
us0 f47 0 0.7890452858293415 0 0 #arcLabel
us0 f688 expr out #txt
us0 f688 5080 908 5105 1036 #arcP
us0 f688 1 5080 1016 #addKink
us0 f688 0 0.6946447426950431 0 0 #arcLabel
us0 f75 targetWindow NEW:card: #txt
us0 f75 targetDisplay TOP #txt
us0 f75 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f75 startMethod start(String,String) #txt
us0 f75 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f75 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f75 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filesNotMovedBecauseLocked");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f75 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f75 responseMappingAction 'out=in;
' #txt
us0 f75 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f75 isAsynch false #txt
us0 f75 isInnerRd true #txt
us0 f75 userContext '* ' #txt
us0 f75 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>tells the user
the file exists and 
is currently edited</name>
        <nameStyle>55,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f75 5326 484 36 24 9 -22 #rect
us0 f75 @|RichDialogIcon #fIcon
us0 f78 expr in #txt
us0 f78 5344 438 5344 484 #arcP
us0 f226 expr out #txt
us0 f226 5344 508 5344 588 #arcP
us0 f80 targetWindow NEW:card: #txt
us0 f80 targetDisplay TOP #txt
us0 f80 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f80 startMethod start(String,String) #txt
us0 f80 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f80 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f80 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/fileTransferError");
param.iconUri="/ch/ivyteam/ivy/addons/icons/close/48";
' #txt
us0 f80 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f80 responseMappingAction 'out=in;
' #txt
us0 f80 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f80 isAsynch false #txt
us0 f80 isInnerRd true #txt
us0 f80 userContext '* ' #txt
us0 f80 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f80 5470 436 36 24 -114 -3 #rect
us0 f80 @|RichDialogIcon #fIcon
us0 f80 -65536|-1|-16777216 #nodeStyle
us0 f225 expr in #txt
us0 f225 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f225 5488 374 5488 436 #arcP
us0 f225 0 0.4246996788029458 0 0 #arcLabel
us0 f331 expr out #txt
us0 f331 5488 460 5488 524 #arcP
us0 f333 targetWindow NEW:card: #txt
us0 f333 targetDisplay TOP #txt
us0 f333 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f333 startMethod start(String,String) #txt
us0 f333 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f333 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f333 requestMappingAction 'param.text=in.dialogParam.message;
' #txt
us0 f333 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f333 responseMappingAction 'out=in;
' #txt
us0 f333 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f333 isAsynch false #txt
us0 f333 isInnerRd true #txt
us0 f333 userContext '* ' #txt
us0 f333 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
us0 f333 5662 228 36 24 20 -2 #rect
us0 f333 @|RichDialogIcon #fIcon
us0 f436 expr in #txt
us0 f436 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Right Pb</name>
        <nameStyle>8,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f436 5582 240 5662 240 #arcP
us0 f462 targetWindow NEW:card: #txt
us0 f462 targetDisplay TOP #txt
us0 f462 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f462 startMethod start(String,String) #txt
us0 f462 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f462 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f462 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/NoFilesMovedBecauseLocked");
' #txt
us0 f462 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f462 responseMappingAction 'out=in;
' #txt
us0 f462 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f462 isAsynch false #txt
us0 f462 isInnerRd true #txt
us0 f462 userContext '* ' #txt
us0 f462 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
us0 f462 5646 284 36 24 20 -2 #rect
us0 f462 @|RichDialogIcon #fIcon
us0 f583 expr in #txt
us0 f583 5582 296 5646 296 #arcP
us0 f484 targetWindow NEW:card: #txt
us0 f484 targetDisplay TOP #txt
us0 f484 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f484 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
us0 f484 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f484 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
us0 f484 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/question/48";
param.buttonsList=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwriteAll"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/skip")];
param.defaultPressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/skip");
' #txt
us0 f484 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f484 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.pressedButton;
' #txt
us0 f484 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f484 isAsynch false #txt
us0 f484 isInnerRd true #txt
us0 f484 userContext '* ' #txt
us0 f484 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask what to do</name>
        <nameStyle>14,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f484 5950 476 36 24 20 -2 #rect
us0 f484 @|RichDialogIcon #fIcon
us0 f491 expr in #txt
us0 f491 outCond in.returnedMessage.type==ch.ivyteam.ivy.addons.filemanager.FileHandler.INFORMATION_MESSAGE #txt
us0 f491 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File already 
exits</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f491 5838 432 5950 432 #arcP
us0 f491 0 0.5 0 -4 #arcLabel
us0 f490 expr out #txt
us0 f490 5968 444 5968 476 #arcP
us0 f490 0 0.4373068685644312 0 0 #arcLabel
us0 f76 expr out #txt
us0 f76 5968 500 5968 562 #arcP
us0 f435 targetWindow NEW:card: #txt
us0 f435 targetDisplay TOP #txt
us0 f435 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f435 startMethod start(String,String) #txt
us0 f435 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f435 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f435 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/uploadAlreadyRunning");
' #txt
us0 f435 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f435 responseMappingAction 'out=in;
' #txt
us0 f435 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/uploadAlreadyRunning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f435 isAsynch false #txt
us0 f435 isInnerRd true #txt
us0 f435 userContext '* ' #txt
us0 f435 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
us0 f435 5798 764 36 24 20 -2 #rect
us0 f435 @|RichDialogIcon #fIcon
us0 f438 expr in #txt
us0 f438 5742 776 5798 776 #arcP
us0 f591 targetWindow NEW:card: #txt
us0 f591 targetDisplay TOP #txt
us0 f591 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f591 startMethod start(String,String) #txt
us0 f591 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f591 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f591 requestMappingAction 'param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/security/userHasNoRightToUploadFiles");
' #txt
us0 f591 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f591 responseMappingAction 'out=in;
' #txt
us0 f591 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f591 isAsynch false #txt
us0 f591 isInnerRd true #txt
us0 f591 userContext '* ' #txt
us0 f591 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
us0 f591 5798 900 36 24 20 -2 #rect
us0 f591 @|RichDialogIcon #fIcon
us0 f609 expr in #txt
us0 f609 5742 912 5798 912 #arcP
us0 f493 expr out #txt
us0 f493 5834 776 5928 902 #arcP
us0 f493 1 5928 776 #addKink
us0 f493 1 0.07692598080472637 0 0 #arcLabel
us0 f690 targetWindow NEW:card: #txt
us0 f690 targetDisplay TOP #txt
us0 f690 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f690 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
us0 f690 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f690 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
us0 f690 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
param.buttonsList=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultPressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no");
' #txt
us0 f690 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f690 responseMappingAction 'out=in;
out.dialogParam.clickedButton=result.pressedButton;
' #txt
us0 f690 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f690 isAsynch false #txt
us0 f690 isInnerRd true #txt
us0 f690 userContext '* ' #txt
us0 f690 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ask</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f690 5710 1484 36 24 20 -2 #rect
us0 f690 @|RichDialogIcon #fIcon
us0 f691 expr out #txt
us0 f691 5728 1460 5728 1484 #arcP
us0 f692 expr out #txt
us0 f692 5728 1508 5728 1522 #arcP
us0 f693 targetWindow NEW:card: #txt
us0 f693 targetDisplay TOP #txt
us0 f693 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f693 startMethod start(String,String) #txt
us0 f693 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f693 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f693 requestMappingAction 'param.text=in.canUserOverwriteFilesByUpload ? ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/SomeFilesUploadedBecauseOverwriteLockedFiles") : ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/NotAllFilesUploadedBecauseOverwriteFilesNotPermitted");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f693 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f693 responseMappingAction 'out=in;
' #txt
us0 f693 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f693 isAsynch false #txt
us0 f693 isInnerRd true #txt
us0 f693 userContext '* ' #txt
us0 f693 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
us0 f693 5590 1388 36 24 20 -2 #rect
us0 f693 @|RichDialogIcon #fIcon
us0 f812 expr in #txt
us0 f812 outCond in.docsToOverwrite.isEmpty() #txt
us0 f812 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f812 5714 1400 5626 1400 #arcP
us0 f825 targetWindow NEW:card: #txt
us0 f825 targetDisplay TOP #txt
us0 f825 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f825 startMethod start(String,String) #txt
us0 f825 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f825 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f825 requestMappingAction 'param.text=in.canUserOverwriteFilesByUpload ? ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/NoFilesUploadedBecauseOverwriteLockedFiles") : ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/NoFilesUploadedBecauseOverwriteFilesNotPermitted");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f825 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f825 responseMappingAction 'out=in;
' #txt
us0 f825 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f825 isAsynch false #txt
us0 f825 isInnerRd true #txt
us0 f825 userContext '* ' #txt
us0 f825 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
us0 f825 5910 1284 36 24 20 -2 #rect
us0 f825 @|RichDialogIcon #fIcon
us0 f845 expr in #txt
us0 f845 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f845 5742 1296 5910 1296 #arcP
us0 f845 0 0.5913366156534715 0 0 #arcLabel
us0 f837 actionDecl 'List<java.io.File> files;
' #txt
us0 f837 actionTable 'files=in.tmpListOfFiles;
' #txt
us0 f837 actionCode panel.fireSE_FilesUnlocked(files); #txt
us0 f837 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f837 fireEvent SE_FilesUnlocked(List<java.io.File>) #txt
us0 f837 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE files unlocked</name>
        <nameStyle>17,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f837 526 1076 36 24 20 -2 #rect
us0 f837 @|RichDialogFireEventIcon #fIcon
us0 f846 expr out #txt
us0 f846 544 1060 544 1076 #arcP
us0 f632 expr out #txt
us0 f632 544 1100 544 1118 #arcP
us0 f857 expr in #txt
us0 f857 outCond 'in.tmpListOfFiles.size()>0 && in.filestoDelete.size()>0' #txt
us0 f857 4136 630 4136 644 #arcP
us0 f858 expr in #txt
us0 f858 outCond in.filestoDelete.size()>0 #txt
us0 f858 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f858 4136 790 4136 836 #arcP
us0 f847 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f847 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>docsToOverwrite empty?</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f847 4386 202 28 28 -4 -26 #rect
us0 f847 @|AlternativeIcon #fIcon
us0 f848 expr out #txt
us0 f848 4400 180 4400 202 #arcP
us0 f856 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f856 actionTable 'out=in;
' #txt
us0 f856 actionCode 'out.fileUploadInProgress=false;
panel.refreshActualSelectedFolder();
' #txt
us0 f856 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f856 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreh</name>
        <nameStyle>6,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f856 4342 396 36 24 3 9 #rect
us0 f856 @|RichDialogProcessStepIcon #fIcon
us0 f849 expr out #txt
us0 f849 4360 420 4360 446 #arcP
us0 f860 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f860 actionTable 'out=in;
' #txt
us0 f860 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
ivy.log.info("There is overwrite needed in file version with extended versioning.");
List<DocumentOnServer> locks = new List<DocumentOnServer>();
for(DocumentOnServer doc:in.docsToOverwrite){
	if(doc.getLocked()==null || doc.getLocked().compareTo("1")!=1){//document is not locked
		try{
				long id = Long.parseLong(doc.fileID);
				int nb = panel.getFileVersioningController().createNewVersion(id).versionNumber;
				doc.setVersionnumber(nb);
				in.fileManagementHandler.saveDocumentOnServer(doc,"");
				if(in.configurationController.fileActionHistoryConfiguration.editFileTracked)
				{
					try
					{
						in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(id,2,in.applicationUserName,"");
					}catch(Throwable t)
					{
						ivy.log.error("File Manager error: an error occurred while writing file changed history. "+t.getMessage());
					}
				}
				in.returnedMessage.documentOnServers.add(doc);
				panel.fireSE_fileChanged(doc.fileID);
		}catch(Throwable t){
				ivy.log.error("File Manager error: an error occurred while creating new file version in extended versioning. "+t.getMessage());
		}
	}else{//Document is locked
		locks.add(doc);
	}
}
in.docsToOverwrite.clear();
in.docsToOverwrite.addAll(locks);
' #txt
us0 f860 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f860 4422 244 36 24 20 -2 #rect
us0 f860 @|RichDialogProcessStepIcon #fIcon
us0 f861 expr in #txt
us0 f861 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f861 4414 216 4440 244 #arcP
us0 f861 1 4440 216 #addKink
us0 f861 0 0.9515157055268777 0 0 #arcLabel
us0 f918 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f918 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>locked files?</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f918 4426 282 28 28 14 0 #rect
us0 f918 @|AlternativeIcon #fIcon
us0 f929 expr out #txt
us0 f929 4440 268 4440 282 #arcP
us0 f924 targetWindow NEW #txt
us0 f924 targetDisplay TOP #txt
us0 f924 richDialogId ch.ivyteam.ivy.richdialog.rdpanels.basic.AutoRichDialog #txt
us0 f924 startMethod start() #txt
us0 f924 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f924 requestActionDecl '<> param;' #txt
us0 f924 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f924 responseMappingAction 'out=in;
' #txt
us0 f924 isAsynch false #txt
us0 f924 isInnerRd true #txt
us0 f924 4422 332 36 24 20 -2 #rect
us0 f924 @|RichDialogIcon #fIcon
us0 f933 expr in #txt
us0 f933 outCond !in.docsToOverwrite.isEmpty() #txt
us0 f933 4440 310 4440 332 #arcP
us0 f937 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f937 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show message?</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f937 4122 682 28 28 14 0 #rect
us0 f937 @|AlternativeIcon #fIcon
us0 f950 expr out #txt
us0 f950 4136 668 4136 682 #arcP
us0 f971 targetWindow NEW:card: #txt
us0 f971 targetDisplay TOP #txt
us0 f971 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f971 startMethod start(String,String) #txt
us0 f971 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f971 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f971 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f971 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f971 responseMappingAction 'out=in;
' #txt
us0 f971 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f971 isAsynch false #txt
us0 f971 isInnerRd true #txt
us0 f971 userContext '* ' #txt
us0 f971 4118 716 36 24 20 -2 #rect
us0 f971 @|RichDialogIcon #fIcon
us0 f972 expr in #txt
us0 f972 outCond in.dialogParam.outputBoolean #txt
us0 f972 4136 710 4136 716 #arcP
us0 f931 expr out #txt
us0 f931 4136 740 4136 762 #arcP
us0 f973 expr in #txt
us0 f973 4122 696 4122 776 #arcP
us0 f973 1 4068 696 #addKink
us0 f973 2 4068 776 #addKink
us0 f973 1 0.24886276344747923 0 0 #arcLabel
us0 f974 expr in #txt
us0 f974 4150 776 4328 1098 #arcP
us0 f974 1 4328 776 #addKink
us0 f974 1 0.11662124179721955 0 0 #arcLabel
us0 f834 targetWindow NEW:card: #txt
us0 f834 targetDisplay TOP #txt
us0 f834 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f834 startMethod start(String,String) #txt
us0 f834 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f834 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f834 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f834 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f834 responseMappingAction 'out=in;
' #txt
us0 f834 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f834 isAsynch false #txt
us0 f834 isInnerRd true #txt
us0 f834 userContext '* ' #txt
us0 f834 5710 1244 36 24 20 -2 #rect
us0 f834 @|RichDialogIcon #fIcon
us0 f979 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f979 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show message?</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f979 5714 1202 28 28 14 0 #rect
us0 f979 @|AlternativeIcon #fIcon
us0 f980 expr in #txt
us0 f980 outCond in.dialogParam.outputBoolean #txt
us0 f980 5728 1230 5728 1244 #arcP
us0 f981 expr out #txt
us0 f981 5728 1188 5728 1202 #arcP
us0 f818 expr out #txt
us0 f818 5728 1268 5728 1282 #arcP
us0 f982 expr in #txt
us0 f982 5714 1216 5714 1296 #arcP
us0 f982 1 5660 1216 #addKink
us0 f982 2 5660 1296 #addKink
us0 f982 1 0.2170542783371617 0 0 #arcLabel
us0 f984 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f984 actionTable 'out=in;
' #txt
us0 f984 actionCode out.fileUploadInProgress=false; #txt
us0 f984 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f984 5854 900 36 24 20 -2 #rect
us0 f984 @|RichDialogProcessStepIcon #fIcon
us0 f991 expr out #txt
us0 f991 5834 912 5854 912 #arcP
us0 f689 expr out #txt
us0 f689 5890 912 5918 912 #arcP
us0 f992 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f992 actionTable 'out=in;
' #txt
us0 f992 actionCode out.fileUploadInProgress=false; #txt
us0 f992 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f992 5966 1284 36 24 20 -2 #rect
us0 f992 @|RichDialogProcessStepIcon #fIcon
us0 f993 expr out #txt
us0 f993 5946 1296 5966 1296 #arcP
us0 f819 expr out #txt
us0 f819 6002 1296 6054 1296 #arcP
us0 f994 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f994 actionTable 'out=in;
' #txt
us0 f994 actionCode out.fileUploadInProgress=false; #txt
us0 f994 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f994 5710 1764 36 24 20 -2 #rect
us0 f994 @|RichDialogProcessStepIcon #fIcon
us0 f995 expr in #txt
us0 f995 outCond in.filesToUpload.isEmpty() #txt
us0 f995 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f995 5728 1742 5728 1764 #arcP
us0 f995 0 0.1527777777777778 0 0 #arcLabel
us0 f832 expr out #txt
us0 f832 5728 1788 5728 1814 #arcP
us0 f820 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f820 actionTable 'out=in;
' #txt
us0 f820 actionCode out.fileUploadInProgress=false; #txt
us0 f820 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f820 4686 1140 36 24 20 -2 #rect
us0 f820 @|RichDialogProcessStepIcon #fIcon
us0 f835 expr in #txt
us0 f835 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f835 4776 1102 4722 1152 #arcP
us0 f835 1 4776 1152 #addKink
us0 f835 1 0.4110820338482195 0 0 #arcLabel
us0 f607 expr out #txt
us0 f607 4686 1152 4578 1152 #arcP
us0 f998 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f998 actionTable 'out=in;
' #txt
us0 f998 actionCode out.fileUploadInProgress=false; #txt
us0 f998 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f998 4262 1148 36 24 20 -2 #rect
us0 f998 @|RichDialogProcessStepIcon #fIcon
us0 f1000 expr in #txt
us0 f1000 4328 1126 4298 1160 #arcP
us0 f1000 1 4328 1160 #addKink
us0 f1000 1 0.37344613184431347 0 0 #arcLabel
us0 f952 expr out #txt
us0 f952 4262 1160 4146 1160 #arcP
us0 f1003 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1003 actionTable 'out=in;
' #txt
us0 f1003 actionCode out.fileUploadInProgress=false; #txt
us0 f1003 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1003 5750 228 36 24 20 -2 #rect
us0 f1003 @|RichDialogProcessStepIcon #fIcon
us0 f1008 expr out #txt
us0 f1008 5698 240 5750 240 #arcP
us0 f455 expr out #txt
us0 f455 5682 296 5750 250 #arcP
us0 f464 expr out #txt
us0 f464 5768 252 5768 283 #arcP
us0 f1009 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1009 3098 258 28 28 14 0 #rect
us0 f1009 @|AlternativeIcon #fIcon
us0 f1011 expr in #txt
us0 f1011 outCond in.eventSource.actionType==2 #txt
us0 f1011 3070 272 3098 272 #arcP
us0 f1012 expr in #txt
us0 f1012 outCond ch.ivyteam.ivy.addons.filemanager.ulcextensionhandler.DesktopHandler.openFileReadOnlyMethodExist() #txt
us0 f1012 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>readOnly method
is implented by the
ulc.extensions</name>
        <nameStyle>50,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1012 3112 286 3214 432 #arcP
us0 f1012 1 3112 432 #addKink
us0 f1012 0 0.7898550724637681 15 0 #arcLabel
us0 f676 expr in #txt
us0 f676 3126 272 3150 272 #arcP
us0 f362 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f362 actionTable 'out=in;
' #txt
us0 f362 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.filelink.FileLink;
import ch.ivyteam.ivy.richdialog.widgets.components.RButton;
in.eventSource.actionType=-1;
if(in.#eventSource.#eventSource != null && in.eventSource.eventSource instanceof RButton){
	RButton rb = in.eventSource.eventSource as RButton;
	if(rb.getText().compareTo(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/edit"))==0){
		in.eventSource.actionType=1;//edit
	}else if(rb.getIconUri().compareTo(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/file/48"))==0){
		if(in.configurationController.activateFileVersioningExtended)
		{
			in.eventSource.actionType=3;//read only without warning
		}else{
			in.eventSource.actionType=2;//read only with warning
		}
	}
}

if(in.eventSource.actionType==-1){
	if(!in.configurationController.activateSecurity) {
		in.eventSource.actionType=1;//edit
	}else if(in.configurationController.diplayFilesRecursively) {
		in.eventSource.actionType=in.selectedDocument.canUserWrite?1:2;//edit = 1 ; readonly = 2
	}else if(in.selectedFolderOnServer.canUserUpdateFiles) {
		in.eventSource.actionType=1;//edit
	}else{
		in.eventSource.actionType=2;//read only with warning
	}
}

if(in.selectedDocument instanceof FileLink) {
	in.eventSource.actionType=3;//read only without warning
}
	' #txt
us0 f362 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f362 3038 212 36 24 20 -2 #rect
us0 f362 @|RichDialogProcessStepIcon #fIcon
us0 f367 expr in #txt
us0 f367 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f367 3056 198 3056 212 #arcP
us0 f367 0 0.3333333333333333 -1 0 #arcLabel
us0 f969 expr out #txt
us0 f969 3056 236 3056 258 #arcP
us0 f1013 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1013 actionTable 'out=in;
' #txt
us0 f1013 actionCode 'import ch.ivyteam.ivy.richdialog.widgets.components.RButton;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
if(in.configurationController.activateFileVersioningExtended && in.#eventSource!=null && in.eventSource.eventSource instanceof RButton && 
	(in.eventSource.eventSource as RButton).getText().compareTo(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/edit"))==0)
{
	panel._editSelectedFile();
}else{
	try{
		if(panel.ordnersTree.selectedTreeNode.value instanceof FolderOnServer){
			FolderOnServer FOS = panel.ordnersTree.selectedTreeNode.value as FolderOnServer;
			in.selectedFolderOnServer=FOS.clone();
			if(in.configurationController.activateSecurity){
				panel.toolbarGridBagLayoutPane.enabled=true;
				panel.buttonsGridBagLayoutPane.enabled=true;
				if(in.selectedFolderOnServer.canUserDeleteDir){
						panel.deleteDirButton.enabled=in.selectedFolderOnServer.isRoot?false:true;
						panel.newDirAtRootMenuItem.enabled=true;
						panel.makeNewDirButton.enabled=true;
						panel.makeNewDirAtRoot2Button.enabled=true;
						panel.downloadMenuItem.enabled=true;
						panel.toogleRecursiveMenuItem.enabled=true;
						panel.downloadDirContentMenuItem.enabled=true;
						panel.deleteDirectoryMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:true;
						panel.renameDirMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:true;
				}else if(in.selectedFolderOnServer.canUserUpdateDir){
						//set delete menu disabled
						panel.deleteDirectoryMenuItem.enabled=false;
						panel.deleteDirButton.enabled=false;
						panel.newDirAtRootMenuItem.enabled=true;
						panel.makeNewDirButton.enabled=true;
						panel.makeNewDirAtRoot2Button.enabled=true;
						panel.toogleRecursiveMenuItem.enabled=true;
						panel.downloadDirContentMenuItem.enabled=true;
						panel.renameDirMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:true;
				}else if(in.selectedFolderOnServer.canUserOpenDir){
					//set delete menu disabled
						panel.deleteDirectoryMenuItem.enabled=false;
						panel.deleteDirButton.enabled=false;
						panel.makeNewDirButton.enabled=false;
						panel.makeNewDirAtRoot2Button.enabled=false;
						panel.newDirAtRootMenuItem.enabled=false;
						panel.renameDirMenuItem.enabled=false;
	
				}else{//no rights on directory, no rigths on files
						panel.toolbarGridBagLayoutPane.enabled=false;
						panel.buttonsGridBagLayoutPane.enabled=false;
						panel.renameDirMenuItem.enabled=false;
						panel.downloadMenuItem.enabled=false;
						panel.newDirAtRootMenuItem.enabled=false;
						panel.uploadMenuItem.enabled=false;
						panel.deleteDirectoryMenuItem.enabled=false;
						panel.toogleRecursiveMenuItem.enabled=false;
						panel.downloadDirContentMenuItem.enabled=false;
				}
				
				if(in.selectedFolderOnServer.canUserOpenDir){
					if(in.selectedFolderOnServer.canUserDeleteFiles){
						panel.uploadMenuItem.enabled=true;
						panel.uploadButton.enabled=true;
						panel.pasteButton.enabled=true;
						panel.pasteMenuItemTable.enabled=true;
						panel.pasteMenuItem.enabled=true;			
						panel.fileTypeChooserMenuItem.enabled=in.configurationController.allowUserToSetDocumentFileTypes;				
						panel.editButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/write/48"));
						panel.editButton.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/edit"));
					}else if(in.selectedFolderOnServer.canUserWriteFiles){
						panel.deleteMenuItem.enabled=false;
						panel.deleteButton.enabled=false;
						panel.delete2Button.enabled=false;
						panel.uploadMenuItem.enabled=true;
						panel.uploadButton.enabled=true;
						panel.pasteButton.enabled=true;
						panel.pasteMenuItemTable.enabled=true;
						panel.pasteMenuItem.enabled=true;
						panel.fileTypeChooserMenuItem.enabled=in.configurationController.allowUserToSetDocumentFileTypes;
						panel.editButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/write/48"));
						panel.editButton.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/edit"));
						panel.editMenuItem.setEnabled(true);
					}else{
						panel.deleteMenuItem.enabled=false;
						panel.deleteButton.enabled=false;
						panel.delete2Button.enabled=false;
						panel.uploadMenuItem.enabled=false;
						panel.uploadButton.enabled=false;
						panel.zipMenuItem.enabled=false;
						panel.zip2Button.enabled=false;	
						panel.pasteButton.enabled=false;
						panel.pasteMenuItemTable.enabled=false;
						panel.pasteMenuItem.enabled=false;
						panel.setDescriptionMenuItem.enabled=false;
						panel.newVersionMenuItem.enabled=false;
						panel.makeVersionMenuItem.enabled=false;
						panel.fileTypeChooserMenuItem.enabled=false;
						panel.fileTypeManagerMenuItem.enabled=false;
						//panel.editMenuItem.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/read"));
						panel.editButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/file/48"));
						//panel.editMenuItem.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/file/16"));
						panel.editButton.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/read"));
						panel.editMenuItem.setEnabled(false);
					}
					
					if(in.isUserFileManagerAdmin){
						panel.directorySecurityManagerPanel.setSelectedFolderOnServer(in.selectedFolderOnServer);
						panel.fileTypeManagerMenuItem.enabled=in.configurationController.showFileTypeManagement;
					}else{
						panel.fileTypeManagerMenuItem.enabled=false;
					}
				}
			}else{//no security but some restrictions apply to the root directory
				panel.deleteDirectoryMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:true;
			  panel.renameDirMenuItem.enabled=in.selectedFolderOnServer.isRoot?false:true;
				panel.deleteDirButton.enabled=in.selectedFolderOnServer.isRoot?false:true;
			}
			
			if(in.configurationController.activateFileVersioningExtended){
				panel.editButton.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/read"));
				panel.editButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/file/48"));
				panel.refreshSelectedFolderButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/write/16"));
				panel.refreshSelectedFolderButton.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/tooltips/edit"));
				panel.refreshSelectedFolderButton.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/edit"));
				panel.refreshSelectedFolderButton.setRolloverIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/write/24"));
				panel.refreshSelectedFolderButton.setPressedIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/write/24"));
				panel.refreshSelectedFolderButton.enabled=false;
			}
			
			if(!in.fileUploadInProgress){//we just set the uploadHandler path only if there is no current upload in progress.
				if(!in.configurationController.storeFilesInDB)
				{//we set the serverPath just in case of storage on Server fileSystem
					in.uploadHandler.setServerPath(in.selectedFolderOnServer.path);
				}else{
					in.uploadHandler.setFilesDestinationPathForDB(in.selectedFolderOnServer.path);
				}
			}
			
			if(in.configurationController.activateSecurity && !in.selectedFolderOnServer.canUserWriteFiles){
				panel.uploadButton.setEnabled(false);
			}
			
			in.documentsInDb.clear();
			in.selectedDocument=null;
			in.selectedDocuments.clear();
			in.selectedDocumentsForParent.clear();
			panel.unlockButton.setEnabled(false);
			panel.unlockMenuItem.setEnabled(false);
			//get the documents 
			if(in.#selectedFolderOnServer.#path !=null){
				if(in.configurationController.activateSecurity && !in.selectedFolderOnServer.canUserOpenDir){
					//do nothing we don''t list the files
				}else{
					in.documentsInDb.addAll(in.fileManagementHandler.getDocumentOnServersInDirectory(in.selectedFolderOnServer.path,in.configurationController.diplayFilesRecursively));
				}
			}
			
			if(!in.fileUploadInProgress){
				in.filesNumber=in.documentsInDb.size().toString();
				int n = in.documentsInDb.size();
				out.returnedMessage.text = (n==0?ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/noDocumentFound"):
							(n==1?ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/oneDocumentFound"): 
							in.filesNumber+" " +ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/xDocumentsFound")));
				out.returnedMessage.type=FileHandler.INFORMATION_MESSAGE;
			}
		}
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
}' #txt
us0 f1013 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1013 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>security</name>
        <nameStyle>8,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1013 1246 140 36 24 20 -2 #rect
us0 f1013 @|RichDialogProcessStepIcon #fIcon
us0 f1019 guid 13F1F455B5CBF8F1 #txt
us0 f1019 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1019 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1019 actionTable 'out=in;
' #txt
us0 f1019 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
import ch.ivyteam.ivy.richdialog.exec.RdEvent;

if(event instanceof RdEvent){
	RdEvent e = event as RdEvent;
	Object o = e.getParameter();
	if(o instanceof FolderOnServer){
		out.selectedFolderOnServer = o as FolderOnServer;
		ivy.log.info("folder actualised...");
	}
}' #txt
us0 f1019 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>folderRightChanged</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1019 1006 1198 20 20 13 0 #rect
us0 f1019 @|RichDialogProcessStartIcon #fIcon
us0 f1021 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1021 actionTable 'out=in;
' #txt
us0 f1021 actionCode panel.ordnersTree.getSelectedTreeNode().setValue(in.selectedFolderOnServer); #txt
us0 f1021 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1021 998 1236 36 24 20 -2 #rect
us0 f1021 @|RichDialogProcessStepIcon #fIcon
us0 f1093 expr out #txt
us0 f1093 1016 1218 1016 1236 #arcP
us0 f1095 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1095 1006 1278 20 20 13 0 #rect
us0 f1095 @|RichDialogProcessEndIcon #fIcon
us0 f1119 expr out #txt
us0 f1119 1016 1260 1016 1278 #arcP
us0 f1120 guid 13F3EBF7035DF827 #txt
us0 f1120 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1120 method getFileUploadManager() #txt
us0 f1120 disableUIEvents false #txt
us0 f1120 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f1120 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.FileUploadHandler fileUploadManager> result;
' #txt
us0 f1120 outParameterMapAction 'result.fileUploadManager=in.uploadHandler;
' #txt
us0 f1120 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getFileUploadManager()</name>
        <nameStyle>22,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1120 6838 86 20 20 13 0 #rect
us0 f1120 @|RichDialogMethodStartIcon #fIcon
us0 f1121 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1121 6838 134 20 20 13 0 #rect
us0 f1121 @|RichDialogProcessEndIcon #fIcon
us0 f1122 expr out #txt
us0 f1122 6848 106 6848 134 #arcP
us0 f1123 guid 13F42D68072611EA #txt
us0 f1123 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1123 method getFileDownloadManager() #txt
us0 f1123 disableUIEvents false #txt
us0 f1123 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f1123 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.FileDownloadHandler fileDownloadManager> result;
' #txt
us0 f1123 outParameterMapAction 'result.fileDownloadManager=in.downloadHandler;
' #txt
us0 f1123 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getFileDownloadManager()</name>
        <nameStyle>24,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1123 6838 190 20 20 13 0 #rect
us0 f1123 @|RichDialogMethodStartIcon #fIcon
us0 f1124 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1124 6838 246 20 20 13 0 #rect
us0 f1124 @|RichDialogProcessEndIcon #fIcon
us0 f1125 expr out #txt
us0 f1125 6848 210 6848 246 #arcP
us0 f1128 expr in #txt
us0 f1128 336 790 336 812 #arcP
us0 f1127 guid 13F43171D5097C77 #txt
us0 f1127 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1127 method getClientDesktopCommunicator() #txt
us0 f1127 disableUIEvents false #txt
us0 f1127 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f1127 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ulcextensionhandler.DesktopHandler clientDesktopCommunicator> result;
' #txt
us0 f1127 outParameterMapAction 'result.clientDesktopCommunicator=panel.desktopHandlerPanel.getClientDesktopCommunicator();
' #txt
us0 f1127 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getClientDesktopCommunicator()</name>
        <nameStyle>30,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1127 6838 310 20 20 13 0 #rect
us0 f1127 @|RichDialogMethodStartIcon #fIcon
us0 f1129 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1129 6838 374 20 20 13 0 #rect
us0 f1129 @|RichDialogProcessEndIcon #fIcon
us0 f1130 expr out #txt
us0 f1130 6848 330 6848 374 #arcP
us0 f1131 guid 13FFED4EFAACAA4B #txt
us0 f1131 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1131 method _askForDownloadOverride(ch.ivyteam.ivy.addons.docfactory.FileOperationMessage) #txt
us0 f1131 disableUIEvents false #txt
us0 f1131 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.docfactory.FileOperationMessage fileOperationMessage> param = methodEvent.getInputArguments();
' #txt
us0 f1131 inActionCode 'out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles");
out.tmpListOfFiles = param.fileOperationMessage.files;
out.filesToOverwrite.clear();' #txt
us0 f1131 outParameterDecl '<> result;
' #txt
us0 f1131 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_askForDownloadOverride(FileOperationMessage)</name>
        <nameStyle>45,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1131 4398 1254 20 20 13 0 #rect
us0 f1131 @|RichDialogMethodStartIcon #fIcon
us0 f1132 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1132 actionTable 'out=in;
' #txt
us0 f1132 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1132 4390 1332 36 24 20 -2 #rect
us0 f1132 @|RichDialogProcessStepIcon #fIcon
us0 f1133 expr out #txt
us0 f1133 4408 1274 4408 1332 #arcP
us0 f1134 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1134 4394 1386 28 28 14 0 #rect
us0 f1134 @|AlternativeIcon #fIcon
us0 f1135 expr out #txt
us0 f1135 4408 1356 4408 1386 #arcP
us0 f1136 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1136 actionTable 'out=in;
' #txt
us0 f1136 actionCode 'in.dialogParam.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/message/overwriteExistingFiles").replace("FFILE",in.tmpListOfFiles.get(0).getName());
in.dialogParam.stringList.clear();
in.dialogParam.stringList.add(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/label/overwriteFile"));
in.dialogParam.stringList.add(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/label/notOverwriteFile"));
if(in.tmpListOfFiles.size()==2) {
	in.dialogParam.stringList.add(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/label/overwriteFileAndTheNextOne"));
  in.dialogParam.stringList.add(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/label/notOverwriteFileAndTheNextOne"));
}else if(in.tmpListOfFiles.size()>2) {
	int i = in.tmpListOfFiles.size()-1;
	String s = String.valueOf(i);
	in.dialogParam.stringList.add(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/label/overwriteFileAndTheNextOnes").replace("NB",s));
  in.dialogParam.stringList.add(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/label/notOverwriteFileAndTheNextOnes").replace("NB",s));
}
' #txt
us0 f1136 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1136 4310 1388 36 24 20 -2 #rect
us0 f1136 @|RichDialogProcessStepIcon #fIcon
us0 f1137 expr in #txt
us0 f1137 outCond in.tmpListOfFiles.size()>0 #txt
us0 f1137 4394 1400 4346 1400 #arcP
us0 f1138 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1138 actionTable 'out=in;
' #txt
us0 f1138 actionCode in.progressText=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/label/downloadInProgress"); #txt
us0 f1138 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1138 4390 1444 36 24 20 -2 #rect
us0 f1138 @|RichDialogProcessStepIcon #fIcon
us0 f1139 expr in #txt
us0 f1139 4408 1414 4408 1444 #arcP
us0 f1140 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1140 actionTable 'out=in;
' #txt
us0 f1140 actionCode in.downloadHandler.downloadPreparedFilesWithPossibilityToExclude(in.filesToOverwrite); #txt
us0 f1140 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1140 4390 1500 36 24 20 -2 #rect
us0 f1140 @|RichDialogProcessStepIcon #fIcon
us0 f1141 expr out #txt
us0 f1141 4408 1468 4408 1500 #arcP
us0 f1142 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1142 4398 1558 20 20 13 0 #rect
us0 f1142 @|RichDialogProcessEndIcon #fIcon
us0 f1143 expr out #txt
us0 f1143 4408 1524 4408 1558 #arcP
us0 f1144 targetWindow NEW:card: #txt
us0 f1144 targetDisplay TOP #txt
us0 f1144 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f1144 startMethod startAsOptionChooser(String,String,List<String>,String) #txt
us0 f1144 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1144 requestActionDecl '<String text, String iconUri, List<String> checkBoxsList, String defaultSelectedCheckbox> param;' #txt
us0 f1144 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
param.checkBoxsList=in.dialogParam.stringList;
param.defaultSelectedCheckbox=in.dialogParam.stringList.get(0);
' #txt
us0 f1144 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1144 responseMappingAction 'out=in;
out.dialogParam.outputString=result.choosedCheckBox;
' #txt
us0 f1144 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/fileAlreadyExists\")%>"/width 500 /height 300 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1144 isAsynch false #txt
us0 f1144 isInnerRd true #txt
us0 f1144 userContext '* ' #txt
us0 f1144 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
us0 f1144 4230 1388 36 24 -152 18 #rect
us0 f1144 @|RichDialogIcon #fIcon
us0 f1145 expr out #txt
us0 f1145 4310 1400 4266 1400 #arcP
us0 f1146 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1146 actionTable 'out=in;
' #txt
us0 f1146 actionCode '//HERE the in.filesToOverwrite is used to store the files that will NOT BE overwritten.
if(in.dialogParam.outputString.equals(in.dialogParam.stringList.get(0))) {
	//overwrite the file
	out.tmpListOfFiles.removeAt(0);
} else if(in.dialogParam.outputString.equals(in.dialogParam.stringList.get(1))) {
	//ignore the file
	in.filesToOverwrite.add(in.tmpListOfFiles.get(0));
	out.tmpListOfFiles.removeAt(0);
} else if (in.dialogParam.outputString.equals(in.dialogParam.stringList.get(2))) {
	//overwrite the next ones
	out.tmpListOfFiles.clear();
} else{
	//ignore the rest of the files
	in.filesToOverwrite.addAll(in.tmpListOfFiles);
	out.tmpListOfFiles.clear();
}' #txt
us0 f1146 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1146 4230 1332 36 24 20 -2 #rect
us0 f1146 @|RichDialogProcessStepIcon #fIcon
us0 f1147 expr out #txt
us0 f1147 4248 1388 4248 1356 #arcP
us0 f1148 expr out #txt
us0 f1148 4266 1344 4390 1344 #arcP
us0 f1149 guid 14063C059408CB04 #txt
us0 f1149 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1149 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1149 actionTable 'out=in;
' #txt
us0 f1149 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>translateDirectory</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1149 1318 1334 20 20 13 0 #rect
us0 f1149 @|RichDialogProcessStartIcon #fIcon
us0 f1150 targetWindow NEW:card: #txt
us0 f1150 targetDisplay TOP #txt
us0 f1150 richDialogId ch.ivyteam.ivy.addons.filemanager.util.ItemTranslationAdmin #txt
us0 f1150 startMethod start(ch.ivyteam.ivy.addons.filemanager.ItemTranslation,ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,ch.ivyteam.ivy.addons.filemanager.database.persistence.TranslatedFileManagerItemsEnum,String) #txt
us0 f1150 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1150 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.ItemTranslation inputItemTranslation, ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController configuration, ch.ivyteam.ivy.addons.filemanager.database.persistence.TranslatedFileManagerItemsEnum itemType, String itemMainName> param;' #txt
us0 f1150 requestMappingAction 'param.inputItemTranslation=in.selectedFolderOnServer.getTranslation();
param.configuration=in.configurationController;
param.itemType=ch.ivyteam.ivy.addons.filemanager.database.persistence.TranslatedFileManagerItemsEnum.FOLDER_ON_SERVER;
param.itemMainName=in.selectedFolderOnServer.name;
' #txt
us0 f1150 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1150 responseMappingAction 'out=in;
' #txt
us0 f1150 responseActionCode out.selectedFolderOnServer.setTranslation(result.outputItemTranslation); #txt
us0 f1150 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/translate\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1150 isAsynch false #txt
us0 f1150 isInnerRd true #txt
us0 f1150 userContext '* ' #txt
us0 f1150 1310 1388 36 24 20 -2 #rect
us0 f1150 @|RichDialogIcon #fIcon
us0 f1151 expr out #txt
us0 f1151 1328 1354 1328 1388 #arcP
us0 f1152 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1152 1318 1470 20 20 13 0 #rect
us0 f1152 @|RichDialogProcessEndIcon #fIcon
us0 f864 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f864 actionTable 'out=in;
' #txt
us0 f864 actionCode 'panel.refresh();
panel.ordnersTree.clearSelection();' #txt
us0 f864 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f864 1310 1428 36 24 20 -2 #rect
us0 f864 @|RichDialogProcessStepIcon #fIcon
us0 f1126 expr out #txt
us0 f1126 1328 1412 1328 1428 #arcP
us0 f1153 expr out #txt
us0 f1153 1328 1452 1328 1470 #arcP
us0 f1156 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1156 4874 1322 28 28 14 0 #rect
us0 f1156 @|AlternativeIcon #fIcon
us0 f1155 expr in #txt
us0 f1155 outCond in.dialogParam.message.isEmpty() #txt
us0 f1155 4888 1350 4888 1372 #arcP
us0 f1158 targetWindow NEW:card: #txt
us0 f1158 targetDisplay TOP #txt
us0 f1158 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f1158 startMethod start(String,String) #txt
us0 f1158 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1158 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f1158 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f1158 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1158 responseMappingAction 'out=in;
' #txt
us0 f1158 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1158 isAsynch false #txt
us0 f1158 isInnerRd true #txt
us0 f1158 userContext '* ' #txt
us0 f1158 4974 1324 36 24 20 -2 #rect
us0 f1158 @|RichDialogIcon #fIcon
us0 f1159 expr in #txt
us0 f1159 4902 1336 4974 1336 #arcP
us0 f1160 expr out #txt
us0 f1160 4992 1348 4906 1384 #arcP
us0 f1160 1 4992 1384 #addKink
us0 f1160 1 0.14495997928384785 0 0 #arcLabel
us0 f1161 guid 140BA1DAF1C3C71A #txt
us0 f1161 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1161 method _filesSelectedForUpload(List<java.io.File>,List<java.io.File>) #txt
us0 f1161 disableUIEvents false #txt
us0 f1161 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> acceptedFiles,List<java.io.File> rejectedFiles> param = methodEvent.getInputArguments();
' #txt
us0 f1161 inParameterMapAction 'out.tmpListOfFiles=param.acceptedFiles;
' #txt
us0 f1161 inActionCode 'out.dialogParam.message="";

if(!param.rejectedFiles.isEmpty()) {
	out.dialogParam.message="<html>"+ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/upload/message/fileUploadNotAllowForTheseFiles")+"<br>";
	for(java.io.File f : param.rejectedFiles) {
		out.dialogParam.message+="<br>"+f.getName();
	}
	out.dialogParam.message+="</html>";
	out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/upload/title/fileUploadNotAllowForTheseFiles");
}' #txt
us0 f1161 outParameterDecl '<> result;
' #txt
us0 f1161 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_filesSelectedForUpload(Object[])</name>
        <nameStyle>33,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1161 4878 1262 20 20 13 0 #rect
us0 f1161 @|RichDialogMethodStartIcon #fIcon
us0 f1162 expr out #txt
us0 f1162 4888 1282 4888 1322 #arcP
us0 f885 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f885 actionTable 'out=in;
' #txt
us0 f885 actionCode 'import ch.ivyteam.ivy.addons.filemanager.document.filter.DocumentListFilterForUpload;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List<String> accepted = new List<String>();
List<java.io.File> rejectedFiles = new List<java.io.File>();
if(in.#configurationController.#documentFilter !=null) {
	for(String s : in.filesToUpload) {
		DocumentOnServer doc = new DocumentOnServer();
		java.io.File f = new java.io.File(s);
		doc.setFilename(f.getName());
		doc.setExtension(FileHandler.getFileExtension(f.getName()));
		doc.setPath(in.DnDDestinationPath+"/"+f.getName());
		if(in.configurationController.documentFilter.allowAction(doc,ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterActionEnum.UPLOAD).allow) {
			accepted.add(s);
		}else{
			rejectedFiles.add(f);
		}
	}
	in.filesToUpload.clear();
	in.filesToUpload.addAll(accepted);
}

if(in.#configurationController.#documentListFilter !=null) {
	List<List<String>> result = DocumentListFilterForUpload.getRejectedAndAcceptedFilesForUpload(in.configurationController,in.DnDDestinationPath,in.filesToUpload);
	for(String s: result.get(0)) {
		rejectedFiles.add(new java.io.File(s));
	}
	in.filesToUpload.clear();
	in.filesToUpload.addAll(result.get(1));
}
in.dialogParam.message="";

if(!rejectedFiles.isEmpty()) {
	in.dialogParam.message="<html>"+ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/upload/message/fileUploadNotAllowForTheseFiles")+"<br>";
	for(java.io.File f : rejectedFiles) {
		in.dialogParam.message+="<br>"+f.getName();
	}
	in.dialogParam.message+="</html>";
	in.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/upload/title/fileUploadNotAllowForTheseFiles");
}' #txt
us0 f885 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f885 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filtering with documentFilter if any</name>
        <nameStyle>36,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f885 5710 948 36 24 20 -2 #rect
us0 f885 @|RichDialogProcessStepIcon #fIcon
us0 f887 expr in #txt
us0 f887 outCond '!in.configurationController.activateSecurity || in.dialogParam.outputBoolean' #txt
us0 f887 5728 926 5728 948 #arcP
us0 f1154 targetWindow NEW:card: #txt
us0 f1154 targetDisplay TOP #txt
us0 f1154 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f1154 startMethod start(String,String) #txt
us0 f1154 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1154 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f1154 requestMappingAction 'param.text=in.dialogParam.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f1154 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1154 responseMappingAction 'out=in;
' #txt
us0 f1154 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1154 isAsynch false #txt
us0 f1154 isInnerRd true #txt
us0 f1154 userContext '* ' #txt
us0 f1154 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1154 5806 1004 36 24 20 -2 #rect
us0 f1154 @|RichDialogIcon #fIcon
us0 f1157 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1157 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Some files filtered?</name>
        <nameStyle>20,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1157 5714 1002 28 28 -118 -20 #rect
us0 f1157 @|AlternativeIcon #fIcon
us0 f1163 expr out #txt
us0 f1163 5728 972 5728 1002 #arcP
us0 f978 expr in #txt
us0 f978 outCond in.dialogParam.message.isEmpty() #txt
us0 f978 5728 1030 5728 1060 #arcP
us0 f1164 expr in #txt
us0 f1164 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1164 5742 1016 5806 1016 #arcP
us0 f1165 expr out #txt
us0 f1165 5806 1027 5746 1072 #arcP
us0 f1018 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1018 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error?</name>
        <nameStyle>6,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1018 6474 210 28 28 14 0 #rect
us0 f1018 @|AlternativeIcon #fIcon
us0 f1166 expr in #txt
us0 f1166 outCond in.panelId==in.incomingErrorUtil.panelId #txt
us0 f1166 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1166 6488 190 6488 210 #arcP
us0 f1166 0 0.5666666666666667 1 0 #arcLabel
us0 f1167 expr in #txt
us0 f1167 outCond in.errorUtil.errorOccurred #txt
us0 f1167 6483 233 6456 268 #arcP
us0 f1167 0 0.22925201176693863 0 0 #arcLabel
us0 f1118 targetWindow NEW:card: #txt
us0 f1118 targetDisplay TOP #txt
us0 f1118 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f1118 startMethod start(String,String) #txt
us0 f1118 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1118 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f1118 requestMappingAction 'param.text="<html>"+in.errorUtil.message+IF(in.#errorUtil.#throwable!=null," <br>"+in.errorUtil.throwable.getMessage(),"");
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f1118 requestActionCode 'if(in.#errorUtil.#throwable!=null){
	ivy.log.error(in.errorUtil.throwable.getMessage(),in.errorUtil.throwable);
}' #txt
us0 f1118 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1118 responseMappingAction 'out=in;
' #txt
us0 f1118 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1118 isAsynch false #txt
us0 f1118 isInnerRd true #txt
us0 f1118 userContext '* ' #txt
us0 f1118 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display message</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1118 6526 268 36 24 25 0 #rect
us0 f1118 @|RichDialogIcon #fIcon
us0 f1168 expr in #txt
us0 f1168 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Warning</name>
        <nameStyle>7,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1168 6495 231 6544 268 #arcP
us0 f1168 0 0.48313172308975033 0 0 #arcLabel
us0 f1169 expr out #txt
us0 f1169 6544 292 6495 328 #arcP
us0 f1170 expr out #txt
us0 f1170 2575 830 2536 860 #arcP
us0 f704 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f704 actionTable 'out=in;
' #txt
us0 f704 actionCode 'in.errorUtil.message="";
if(!in.tmpListOfFiles.isEmpty()) {
		in.progressText=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/download/label/downloadInProgress");
		in.downloadHandler.downloadFiles(in.tmpListOfFiles);
	}' #txt
us0 f704 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f704 2246 980 36 24 20 -2 #rect
us0 f704 @|RichDialogProcessStepIcon #fIcon
us0 f23 expr out #txt
us0 f23 2264 1004 2264 1027 #arcP
us0 f1172 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1172 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if the action is
possible (allowed)</name>
        <nameStyle>23,7
18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1172 2250 922 28 28 6 -8 #rect
us0 f1172 @|AlternativeIcon #fIcon
us0 f1173 expr out #txt
us0 f1173 2264 898 2264 922 #arcP
us0 f1171 expr in #txt
us0 f1171 outCond in.errorUtil.message.isEmpty() #txt
us0 f1171 2264 950 2264 980 #arcP
us0 f1174 targetWindow NEW:card: #txt
us0 f1174 targetDisplay TOP #txt
us0 f1174 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f1174 startMethod start(String,String) #txt
us0 f1174 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1174 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f1174 requestMappingAction 'param.text="<html>"+in.errorUtil.message;
param.iconUri="/ch/ivyteam/ivy/addons/icons/warning/48";
' #txt
us0 f1174 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1174 responseMappingAction 'out=in;
' #txt
us0 f1174 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f1174 isAsynch false #txt
us0 f1174 isInnerRd true #txt
us0 f1174 userContext '* ' #txt
us0 f1174 2174 924 36 24 20 -2 #rect
us0 f1174 @|RichDialogIcon #fIcon
us0 f1175 expr in #txt
us0 f1175 2250 936 2210 936 #arcP
us0 f1176 expr out #txt
us0 f1176 2207 948 2249 980 #arcP
us0 f1177 guid 14174CE2D46458CD #txt
us0 f1177 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1177 broadcast SE_FolderOnServer_changed #txt
us0 f1177 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1177 actionTable 'out=in;
' #txt
us0 f1177 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
import ch.ivyteam.ivy.addons.filemanager.util.PathUtil;
import ch.ivyteam.ivy.addons.filemanager.folderonserver.FolderAction;

if(param.#returnedMessage!=null) {
	
	if(param.returnedMessage.panelId!= out.panelId) {
		if(param.returnedMessage.actionType==FolderAction.RENAME && param.returnedMessage.files.size()==2) {
			//old dir
			java.io.File dir1 = param.returnedMessage.files.get(0);
			String oldPath = PathUtil.formatPathForDirectoryWithoutLastSeparator(dir1.getPath());
			//new dir
			java.io.File dir2 = param.returnedMessage.files.get(1);
			String nPath = PathUtil.formatPathForDirectoryWithoutLastSeparator(dir2.getPath());
			List<Tree> tree = panel.ordnersTree.getTreeData().getAllDeepChildren();
			boolean updateDocs = in.configurationController.diplayFilesRecursively;
			for(Tree t : tree) {
				FolderOnServer fos = t.getValue() as FolderOnServer;
				if(fos.getPath().equals(oldPath)) {
					updateDocs = true;
					ivy.log.info("In listener found renamed folder in deep tree \n{0} \n{1} \n{2}",fos,dir2.getName(), PathUtil.formatPathForDirectoryWithoutLastSeparator(dir2.getPath()));
					fos.setName(dir2.getName());
					fos.setPath(PathUtil.formatPathForDirectoryWithoutLastSeparator(dir2.getPath()));
					t.setValue(fos);
					List<Tree> deepTree = t.getAllDeepChildren();
					for(Tree dt: deepTree) {
						FolderOnServer dfos = dt.getValue() as FolderOnServer;
						ivy.log.info("In listener found renamed folder in deep tree \n{0} \n{1} \n{2} \n{3}",dfos,oldPath, nPath,dfos.getPath().replaceFirst("\\Q"+ oldPath+"\\E",nPath));
						dfos.setPath(dfos.getPath().replaceFirst("\\Q"+ oldPath+"\\E",nPath));
					}
				}
			}
			if(updateDocs) {
				if(param.#returnedMessage.#hashMapFiles!=null && !param.returnedMessage.hashMapFiles.isEmpty()) {
					ivy.log.info("In Listener call desktopHandlerPanel._replaceServerFileInClientServerEditCheck {0}",in.returnedMessage.hashMapFiles);
					panel.desktopHandlerPanel._replaceServerFileInClientServerEditCheck(param.returnedMessage.hashMapFiles);
				}
				for(DocumentOnServer doc:out.documentsInDb) {
					ivy.log.info("In listener updating the documents contained in the folder \n{0} to:\n{1}",doc.getPath(),doc.setPath(doc.getPath().replaceFirst("\\Q"+ oldPath+"\\E",nPath)));
					doc.setPath(doc.getPath().replaceFirst("\\Q"+ oldPath+"\\E",nPath));
				}
			}
		}
	}
		
}' #txt
us0 f1177 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_FolderOnServer_changed</name>
        <nameStyle>25,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1177 6478 790 20 20 13 0 #rect
us0 f1177 @|RichDialogBroadcastStartIcon #fIcon
us0 f1178 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1178 6478 870 20 20 13 0 #rect
us0 f1178 @|RichDialogProcessEndIcon #fIcon
us0 f1179 expr out #txt
us0 f1179 6488 810 6488 870 #arcP
us0 f639 expr out #txt
us0 f639 2864 716 2864 758 #arcP
us0 f1180 expr out #txt
us0 f1180 982 528 350 528 #arcP
us0 f1180 0 0.03212818207210886 0 0 #arcLabel
us0 f722 expr out #txt
us0 f722 423 699 354 736 #arcP
us0 f722 0 0.06675405220310134 0 0 #arcLabel
us0 f867 expr out #txt
us0 f867 462 698 354 736 #arcP
us0 f867 0 0.4562085961957109 0 0 #arcLabel
us0 f353 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f353 2482 258 28 28 14 0 #rect
us0 f353 @|AlternativeIcon #fIcon
us0 f959 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f959 2430 262 20 20 13 0 #rect
us0 f959 @|RichDialogProcessEndIcon #fIcon
us0 f961 expr in #txt
us0 f961 2482 272 2450 272 #arcP
us0 f1041 guid 14986130D0363C58 #txt
us0 f1041 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1041 method _uploadChoosedFiles(List<java.io.File>) #txt
us0 f1041 disableUIEvents false #txt
us0 f1041 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> choosedFiles> param = methodEvent.getInputArguments();
' #txt
us0 f1041 inActionCode 'if(!out.fileUploadInProgress) {
	out.filesToUpload.clear();
	for(java.io.File f: param.choosedFiles) {
		out.filesToUpload.add(f.getPath());
	}
	panel.fireUploadChoosedFiles(out.panelId);
}' #txt
us0 f1041 outParameterDecl '<> result;
' #txt
us0 f1041 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_uploadChoosedFiles(List&lt;File&gt;)</name>
        <nameStyle>31,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1041 2189 733 22 22 -40 -27 #rect
us0 f1041 @|RichDialogMethodStartIcon #fIcon
us0 f1042 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1042 2189 797 22 22 14 0 #rect
us0 f1042 @|RichDialogProcessEndIcon #fIcon
us0 f1044 expr out #txt
us0 f1044 2200 755 2200 797 #arcP
us0 f1045 guid 149861648E6885FA #txt
us0 f1045 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1045 broadcast uploadChoosedFiles #txt
us0 f1045 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1045 actionTable 'out=in;
out.samePanelFlag=in.panelId==param.panelId;
' #txt
us0 f1045 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>uploadChoosedFiles</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1045 5493 765 22 22 -78 12 #rect
us0 f1045 @|RichDialogBroadcastStartIcon #fIcon
us0 f1046 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1046 5554 762 28 28 14 0 #rect
us0 f1046 @|AlternativeIcon #fIcon
us0 f1047 expr out #txt
us0 f1047 5515 776 5554 776 #arcP
us0 f1048 expr in #txt
us0 f1048 outCond in.samePanelFlag #txt
us0 f1048 5582 776 5714 776 #arcP
us0 f1050 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1050 5557 805 22 22 14 0 #rect
us0 f1050 @|RichDialogProcessEndIcon #fIcon
us0 f1051 expr in #txt
us0 f1051 5568 790 5568 805 #arcP
us0 f1053 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1053 actionTable 'out=in;
out.dialogParam.outputBoolean=false;
' #txt
us0 f1053 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1053 2382 132 36 24 20 -2 #rect
us0 f1053 @|RichDialogProcessStepIcon #fIcon
us0 f1054 expr in #txt
us0 f1054 outCond in.responseBoolean #txt
us0 f1054 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1054 2334 144 2382 144 #arcP
us0 f1054 0 0.2880244078442032 0 0 #arcLabel
us0 f1015 expr out #txt
us0 f1015 2418 144 2482 144 #arcP
us0 f1015 0 0.2880244078442032 0 0 #arcLabel
us0 f872 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f872 actionTable 'out=in;
' #txt
us0 f872 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.versioning.DocumentOnServerVersionRemoverUtil;
import ch.ivyteam.ivy.addons.filemanager.ReturnedMessage;

ReturnedMessage rm = DocumentOnServerVersionRemoverUtil.getMessageBeforeDocumentDeleteAction(in.selectedDocumentsForParent,in.configurationController,!in.dialogParam.outputBoolean);
in.selectedDocuments.clear();
in.selectedDocuments.addAll(rm.documentOnServers);
in.dialogParam.message = rm.text;
if(rm.documentOnServers.isEmpty()) {
	in.errorUtil.message = rm.text;
	in.errorUtil.panelId = in.panelId;
	in.dialogParam.windowTitle = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning");
	in.errorUtil.errorOccurred=false;
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f872 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f872 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>keep only removable files
compute message</name>
        <nameStyle>41,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f872 2477 196 38 24 14 5 #rect
us0 f872 @|RichDialogProcessStepIcon #fIcon
us0 f1055 expr out #txt
us0 f1055 2496 220 2496 258 #arcP
us0 f1056 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1056 actionTable 'out=in;
' #txt
us0 f1056 actionCode 'out.dialogParam.clickedButton="";
out.dialogParam.outputString="";
in.progressUnit=-1;

out.dialogParam.icon="/ch/ivyteam/ivy/addons/icons/warning/48";
if(in.configurationController.activateFileVersioning) {
	if(in.dialogParam.outputBoolean) {
		out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/confirmdeleteDir");
	} else {
		out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/confirmdeleteFileVersion");
	}
	out.dialogParam.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
		ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
	out.dialogParam.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no");
	
} else {
	out.dialogParam.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFiles"),
		ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/cancel")];
	out.dialogParam.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/cancel");
	out.dialogParam.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/confirmdeleteDir");
}
out.returnedMessage.text = "";' #txt
us0 f1056 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1056 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>compute message title
buttons</name>
        <nameStyle>22,7
7,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1056 2478 316 36 24 20 -2 #rect
us0 f1056 @|RichDialogProcessStepIcon #fIcon
us0 f1092 expr in #txt
us0 f1092 outCond !in.selectedDocuments.isEmpty() #txt
us0 f1092 2496 286 2496 316 #arcP
us0 f352 expr out #txt
us0 f352 2496 340 2496 364 #arcP
us0 f1181 expr in #txt
us0 f1181 2496 158 2496 196 #arcP
us0 f125 expr out #txt
us0 f125 2496 492 2496 538 #arcP
us0 f39 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f39 processCall 'Functional Processes/Filemanager/Upload/BeforeUpload:call(ch.ivyteam.ivy.addons.filemanager.configuration.FileManagerConfigurationController,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler,List<String>)' #txt
us0 f39 doCall true #txt
us0 f39 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.configuration.FileManagerConfigurationController configuration,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler,List<java.lang.String> selectedClientFilesForUpload> param;
' #txt
us0 f39 requestMappingAction 'param.configuration=in.configurationController;
param.fileManagementHandler=in.fileManagementHandler;
param.selectedClientFilesForUpload=in.filesToUpload;
' #txt
us0 f39 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f39 responseMappingAction 'out=in;
out.filesToUpload=result.selectedClientFilesForUpload;
' #txt
us0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>BeforeUpload</name>
    </language>
</elementInfo>
' #txt
us0 f39 5454 1644 36 24 -100 -5 #rect
us0 f39 @|CallSubIcon #fIcon
us0 f85 expr in #txt
us0 f85 outCond in.filesToOverwrite.isEmpty() #txt
us0 f85 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f85 5714 1128 5472 1644 #arcP
us0 f85 1 5472 1128 #addKink
us0 f85 1 0.2550822741050449 0 0 #arcLabel
us0 f88 expr out #txt
us0 f88 5472 1668 5472 1716 #arcP
us0 f88 0 0.2550822741050449 0 0 #arcLabel
us0 f167 expr out #txt
us0 f167 5608 1412 5472 1644 #arcP
us0 f167 1 5608 1512 #addKink
us0 f167 1 0.09677506113888548 0 0 #arcLabel
us0 f290 expr out #txt
us0 f290 5630 1592 5490 1656 #arcP
us0 f291 expr in #txt
us0 f291 5717 1725 5490 1656 #arcP
us0 f291 0 0.5474013841700681 0 0 #arcLabel
us0 f293 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f293 processCall 'Functional Processes/Filemanager/Upload/AfterUpload:call(ch.ivyteam.ivy.addons.filemanager.configuration.FileManagerConfigurationController,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler,List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer>)' #txt
us0 f293 doCall true #txt
us0 f293 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.configuration.FileManagerConfigurationController configuration,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler,List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> createdDocumentOnServersWithUploadedFiles> param;
' #txt
us0 f293 requestMappingAction 'param.configuration=in.configurationController;
param.fileManagementHandler=in.fileManagementHandler;
param.createdDocumentOnServersWithUploadedFiles=in.returnedMessage.documentOnServers;
' #txt
us0 f293 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f293 responseMappingAction 'out=in;
' #txt
us0 f293 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>AfterUpload</name>
        <nameStyle>11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f293 4342 332 36 24 -70 4 #rect
us0 f293 @|CallSubIcon #fIcon
us0 f371 expr in #txt
us0 f371 outCond in.docsToOverwrite.isEmpty() #txt
us0 f371 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f371 4386 216 4360 332 #arcP
us0 f371 1 4360 216 #addKink
us0 f371 0 0.9515157055268777 0 0 #arcLabel
us0 f614 expr out #txt
us0 f614 4360 356 4360 396 #arcP
us0 f614 0 0.9515157055268777 0 0 #arcLabel
us0 f615 expr in #txt
us0 f615 4426 296 4360 332 #arcP
us0 f615 1 4388 296 #addKink
us0 f615 0 0.7637417487351214 0 0 #arcLabel
us0 f617 expr out #txt
us0 f617 4422 344 4378 344 #arcP
us0 f811 guid 14A6248C8F39933B #txt
us0 f811 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f811 broadcast directoryMoved #txt
us0 f811 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f811 actionTable 'out=in;
out.systemEventParameter=param.movedFolder;
' #txt
us0 f811 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>directoryMoved</name>
        <nameStyle>14,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f811 1941 1381 22 22 14 0 #rect
us0 f811 @|RichDialogBroadcastStartIcon #fIcon
us0 f814 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f814 actionTable 'out=in;
' #txt
us0 f814 actionCode 'import ch.ivyteam.ivy.addons.filemanager.restricted.database.sql.FolderOnServerTranslationHelper;
import ch.ivyteam.ivy.addons.filemanager.util.PathUtil;
import ch.ivyteam.ivy.addons.filemanager.database.persistence.IFolderOnServerPersistence;
import ch.ivyteam.ivy.addons.filemanager.database.PersistenceConnectionManagerFactory;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;

FolderOnServer movedDir = in.systemEventParameter as FolderOnServer;
String displayName = movedDir.getName();
String newPath = movedDir.getPath();
if(in.configurationController.activateDirectoryTranslation) {
	IFolderOnServerPersistence dirPers = PersistenceConnectionManagerFactory.getIFolderOnServerPersistenceInstance(in.configurationController);
	
	movedDir = dirPers.get(movedDir.getId()) as FolderOnServer;
	newPath = FolderOnServerTranslationHelper.getTranslatedPathForFolderOnServer(movedDir, in.configurationController);
	displayName = movedDir.getDisplayName();
}
out.dialogParam.message = "<html>"+String.format(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/directoryMoved"), "\""+displayName+"\"", "\""+newPath+"\"");
out.dialogParam.windowTitle = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/directoryMoved");' #txt
us0 f814 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f814 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Set message</name>
        <nameStyle>11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f814 1934 1636 36 24 20 -2 #rect
us0 f814 @|RichDialogProcessStepIcon #fIcon
us0 f833 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f833 1941 1829 22 22 14 0 #rect
us0 f833 @|RichDialogProcessEndIcon #fIcon
us0 f934 targetWindow NEW:card: #txt
us0 f934 targetDisplay TOP #txt
us0 f934 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
us0 f934 startMethod start(String,String) #txt
us0 f934 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f934 requestActionDecl '<String text, String iconUri> param;' #txt
us0 f934 requestMappingAction 'param.text=in.dialogParam.message;
' #txt
us0 f934 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f934 responseMappingAction 'out=in;
' #txt
us0 f934 windowConfiguration '{/title "<%=in.dialogParam.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f934 isAsynch false #txt
us0 f934 isInnerRd true #txt
us0 f934 userContext '* ' #txt
us0 f934 1934 1700 36 24 20 -2 #rect
us0 f934 @|RichDialogIcon #fIcon
us0 f935 expr out #txt
us0 f935 1952 1660 1952 1700 #arcP
us0 f1052 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1052 actionTable 'out=in;
' #txt
us0 f1052 actionCode panel.refresh(); #txt
us0 f1052 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1052 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh panel</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1052 1934 1764 36 24 20 -2 #rect
us0 f1052 @|RichDialogProcessStepIcon #fIcon
us0 f1182 expr out #txt
us0 f1182 1952 1724 1952 1764 #arcP
us0 f859 expr out #txt
us0 f859 1952 1788 1952 1829 #arcP
us0 f1183 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1183 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Show message to user?</name>
        <nameStyle>21,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1183 1938 1442 28 28 14 0 #rect
us0 f1183 @|AlternativeIcon #fIcon
us0 f1184 expr out #txt
us0 f1184 1952 1403 1952 1442 #arcP
us0 f1186 expr in #txt
us0 f1186 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1186 1938 1456 1934 1776 #arcP
us0 f1186 1 1904 1456 #addKink
us0 f1186 2 1904 1776 #addKink
us0 f1186 1 0.505859375 0 0 #arcLabel
us0 f1185 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1185 actionTable 'out=in;
' #txt
us0 f1185 actionCode 'import ch.ivyteam.ivy.addons.filemanager.folderonserver.TreeUtil;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;


try{
	FolderOnServer movedDir = in.systemEventParameter as FolderOnServer;
	if(!TreeUtil.isFolderOnServerInTree(movedDir,in.folderTree)) {
		out.systemEventParameter = null;
	}
}catch(Exception ex) {
	//Exception occurs only if movedDir is null or folderTree is null, usw...
	out.systemEventParameter = null;
}

' #txt
us0 f1185 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1185 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if moved dir
is present in this FM Tree</name>
        <nameStyle>19,7
26,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1185 1934 1508 36 24 20 -2 #rect
us0 f1185 @|RichDialogProcessStepIcon #fIcon
us0 f1187 expr in #txt
us0 f1187 outCond in.configurationController.showUserMessageByMoveDirectory #txt
us0 f1187 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1187 1952 1470 1952 1508 #arcP
us0 f1187 0 0.19090909090909092 -1 0 #arcLabel
us0 f1188 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1188 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>movedDir in Tree?</name>
        <nameStyle>17,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1188 1938 1570 28 28 14 0 #rect
us0 f1188 @|AlternativeIcon #fIcon
us0 f1189 expr out #txt
us0 f1189 1952 1532 1952 1570 #arcP
us0 f1189 0 0.19090909090909092 -1 0 #arcLabel
us0 f823 expr in #txt
us0 f823 outCond 'in.#systemEventParameter != null' #txt
us0 f823 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f823 1952 1598 1952 1636 #arcP
us0 f823 0 0.3684210526315789 1 0 #arcLabel
us0 f1190 expr in #txt
us0 f1190 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1190 1966 1584 1963 1840 #arcP
us0 f1190 1 2096 1584 #addKink
us0 f1190 2 2096 1840 #addKink
us0 f1190 1 0.328125 1 0 #arcLabel
us0 f302 guid 14D7BA42885B0922 #txt
us0 f302 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f302 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f302 actionTable 'out=in;
' #txt
us0 f302 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.filelink.FileLink;
import ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterAnswer;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
	DocumentOnServer doc;
	if(panel.filesTable.selectedListEntry instanceof FileLink) {
		doc = panel.filesTable.selectedListEntry as FileLink;
	} else {
		doc = panel.filesTable.selectedListEntry as DocumentOnServer;
	}
  
	
	boolean allow =true;
	if(in.#configurationController.#documentFilter!=null) {
		DocumentFilterAnswer answer = in.configurationController.documentFilter.allowAction(doc,ch.ivyteam.ivy.addons.filemanager.database.security.DocumentFilterActionEnum.PRINT);
		allow = answer.allow;
		if(!allow) {
			in.errorUtil.panelId = in.panelId;
			in.errorUtil.errorOccurred=false;
			in.errorUtil.message =answer.message;
			in.dialogParam.windowTitle = ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/actionVorbidden");
			panel.fireErrorOccurred(in.errorUtil);
		}
	}
	if(allow) {
		doc= in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
		panel.desktopHandlerPanel.printDocumentOnServer(doc);
		if(in.configurationController.fileActionHistoryConfiguration.printFileTracked)
		{
			in.fileManagementHandler.getFileActionHistoryController().createNewActionHistory(Long.parseLong(doc.fileID),7,in.applicationUserName,"");
		}
	}
}
' #txt
us0 f302 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>printFile</name>
        <nameStyle>9,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f302 3638 142 20 20 13 0 #rect
us0 f302 @|RichDialogProcessStartIcon #fIcon
us0 f302 -14336|-1|-16777216 #nodeStyle
us0 f303 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f303 3635 203 26 26 14 0 #rect
us0 f303 @|RichDialogProcessEndIcon #fIcon
us0 f304 expr out #txt
us0 f304 3648 162 3648 203 #arcP
us0 f222 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f222 actionTable 'out=in;
' #txt
us0 f222 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

for(DocumentOnServer doc: in.documentsInDb){
	if(doc.filename.equalsIgnoreCase(in.selectedDocument.filename)){
		panel.filesTable.setSelectedListEntry(doc);
		if(doc.#lockingUserID!=null && doc.lockingUserID.trim().equalsIgnoreCase(in.applicationUserName))
		{
			panel.unlockButton.setEnabled(true);
			panel.unlockMenuItem.setEnabled(true);
		}else{
			panel.unlockButton.setEnabled(false);
			panel.unlockMenuItem.setEnabled(false);
		}
	}
}' #txt
us0 f222 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f222 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f222 2198 612 36 24 20 -2 #rect
us0 f222 @|RichDialogProcessStepIcon #fIcon
us0 f221 guid 14D7BA4AD96EC317 #txt
us0 f221 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f221 method setSelectedFile(java.io.File) #txt
us0 f221 disableUIEvents false #txt
us0 f221 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File fileToSelect> param = methodEvent.getInputArguments();
' #txt
us0 f221 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;


out.selectedDocument=new DocumentOnServer();
out.selectedDocument.filename=param.fileToSelect.getName();
out.selectedDocument.path=FileHandler.getFileDirectoryPath(param.fileToSelect);


' #txt
us0 f221 outParameterDecl '<> result;
' #txt
us0 f221 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setSelectedFile(File)</name>
    </language>
</elementInfo>
' #txt
us0 f221 2206 574 20 20 -50 -27 #rect
us0 f221 @|RichDialogMethodStartIcon #fIcon
us0 f287 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f287 2203 659 26 26 14 0 #rect
us0 f287 @|RichDialogProcessEndIcon #fIcon
us0 f286 expr out #txt
us0 f286 2216 594 2216 612 #arcP
us0 f289 expr out #txt
us0 f289 2216 636 2216 659 #arcP
us0 f1191 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1191 actionTable 'out=in;
' #txt
us0 f1191 actionCode 'import ch.ivyteam.ivy.addons.filemanager.ReturnedMessage;
import ch.ivyteam.ivy.addons.filemanager.document.DocumentLockManager;
try{
	DocumentLockManager.unlockDocumentsLockedUnderPathByInactiveUsers(in.configurationController.rootPath,in.fileManagementHandler);
} catch (Exception e) {
	ivy.log.error("An Exception occured by unlocking the Documents locked by inactive users.", e);
	in.returnedMessage = new ReturnedMessage("Cannot unlock the documents locked by inactive users.", ReturnedMessage.INFORMATION_MESSAGE);
}' #txt
us0 f1191 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1191 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unlock the documents 
locked by inactive users.</name>
        <nameStyle>47,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1191 318 876 36 24 20 -2 #rect
us0 f1191 @|RichDialogProcessStepIcon #fIcon
us0 f1192 expr out #txt
us0 f1192 336 836 336 876 #arcP
us0 f1193 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1193 processCall 'Functional Processes/Filemanager/Panel/RichDialogPanelDefinition:call(ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerPanel,ch.ivyteam.ivy.addons.filemanager.configuration.FileManagerConfigurationController)' #txt
us0 f1193 doCall true #txt
us0 f1193 requestActionDecl '<ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerPanel panel,ch.ivyteam.ivy.addons.filemanager.configuration.FileManagerConfigurationController fileManagerConfiguration> param;
' #txt
us0 f1193 requestMappingAction 'param.panel=panel;
param.fileManagerConfiguration=in.configurationController;
' #txt
us0 f1193 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f1193 responseMappingAction 'out=in;
' #txt
us0 f1193 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>RichDialogPanelDefinition</name>
        <nameStyle>25,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f1193 318 948 36 24 20 -2 #rect
us0 f1193 @|CallSubIcon #fIcon
us0 f1194 expr out #txt
us0 f1194 336 900 336 948 #arcP
us0 f866 expr out #txt
us0 f866 336 972 336 1014 #arcP
us0 f1195 expr out #txt
us0 f1195 576 692 354 960 #arcP
us0 f1195 1 576 960 #addKink
us0 f1195 0 0.7309669156603205 0 0 #arcLabel
>Proto us0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>Start methods
and unload event</swimlaneLabel>
        <swimlaneLabel>Working with directories
create, delete, selection changed, refresh ...
</swimlaneLabel>
        <swimlaneLabel>Working with files
upload, download, edit, delete, zip, mail ...</swimlaneLabel>
        <swimlaneLabel>Callback methods to be reached
from java Objects</swimlaneLabel>
        <swimlaneLabel>Broadcasts</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>948</swimlaneSize>
    <swimlaneSize>1208</swimlaneSize>
    <swimlaneSize>1816</swimlaneSize>
    <swimlaneSize>2216</swimlaneSize>
    <swimlaneSize>560</swimlaneSize>
    <swimlaneColor>-10027162</swimlaneColor>
    <swimlaneColor>-154</swimlaneColor>
    <swimlaneColor>-10027009</swimlaneColor>
    <swimlaneColor>-39322</swimlaneColor>
    <swimlaneColor>-103</swimlaneColor>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
</elementInfo>
' #txt
>Proto us0 .rdData2UIAction 'panel.buttonGroupGridBagLayoutPane.visible=in.configurationController.toolBarVisible && !in.roundedCornerIconsMode;
panel.buttonsGridBagLayoutPane.visible=in.configurationController.toolBarVisible;
panel.delete2Button.enabled=!in.readOnlyMode;
panel.deleteDir2Button.enabled=!in.readOnlyMode;
panel.deleteDirectoryMenuItem.visible=in.configurationController.advancedActionsEnabled;
panel.edit2Button.enabled=!in.readOnlyMode;
panel.fileActionsToolBar2BoxPane.visible=in.roundedCornerIconsMode;
panel.FileNameInvisibleTextField.text=in.selectedDocument.filename;
panel.filesTable.listData=in.documentsInDb;
panel.fileToolbarPane.visible=in.configurationController.toolBarVisible;
panel.fileToolbarPane2.visible=in.configurationController.toolBarVisible;
panel.fileToolbarPane3.visible=in.configurationController.toolBarVisible;
panel.fileTypeChooserMenuItem.visible=in.configurationController.allowUserToSetDocumentFileTypes;
panel.fileTypeManagerMenuItem.visible=in.configurationController.showFileTypeManagement;
panel.mail2Button.visible=false;
panel.makeNewDirAtRoot2Button.enabled=!in.readOnlyMode;
panel.newCopy2Button.enabled=!in.readOnlyMode;
panel.newDirAtRootMenuItem.visible=in.configurationController.advancedActionsEnabled;
panel.ordnersTree.treeData=in.folderTree;
panel.pasteButton.enabled=in.copyOn && 
(!in.configurationController.activateSecurity || 
in.#selectedFolderOnServer !=null && 
in.selectedFolderOnServer.canUserWriteFiles);
panel.pasteMenuItem.enabled=in.copyOn && 
(!in.configurationController.activateSecurity || 
in.#selectedFolderOnServer !=null && 
in.selectedFolderOnServer.canUserWriteFiles);
panel.pasteMenuItemTable.enabled=in.copyOn && 
(!in.configurationController.activateSecurity || 
in.#selectedFolderOnServer !=null && 
in.selectedFolderOnServer.canUserWriteFiles);
panel.pathChooserFlowLayoutPane.visible=in.isPathChooserFlowLayoutVisible;
panel.ProgressBar.string=in.progressText;
panel.ProgressBar.value=in.progressUnit;
panel.ProgressBar.visible=IF(in.progressUnit>=0,true,false);
panel.serverDirectoriesToolBar2BoxPane.visible=in.configurationController.toolBarVisible && in.roundedCornerIconsMode;
panel.showHistoryMenuItem.enabled=in.#selectedDocument!=null && in.selectedDocument.fileID.length()>0;
panel.showHistoryMenuItem.visible=in.configurationController.showFileHistoryMenuItem;
panel.SplitPane.dividerSize=IF(in.configurationController.folderTreeVisible, 5, 0);
panel.SplitPane.leftComponent.visible=in.configurationController.folderTreeVisible;
panel.statusLabel.iconUri=IF(in.returnedMessage.type == ch.ivyteam.ivy.addons.filemanager.FileHandler.ERROR_MESSAGE,
ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/close/16"), ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/info/16"));
panel.statusLabel.text=IF(in.#returnedMessage!=null || in.returnedMessage.text.trim()!="",
in.returnedMessage.text,
"");
panel.tagsMenuItem.visible=in.configurationController.activateFileTags;
panel.toogleFileListing2Button.text=IF (!in.configurationController.diplayFilesRecursively, 
	ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/showAll"), 
	ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/showFolder"));
panel.toogleRecursiveMenuItem.text=IF(in.configurationController.diplayFilesRecursively,
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/showAllFilesDirectlyInFolder"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/showAllFilesInFolderStructure"));
panel.toolbarGridBagLayoutPane.visible=!in.roundedCornerIconsMode;
panel.translateDirMenuItem.enabled=in.#selectedFolderOnServer !=null && in.selectedFolderOnServer.canUserTranslateDirectory;
panel.upload2Button.enabled=!in.readOnlyMode;
panel.zip2Button.enabled=!in.readOnlyMode;
' #txt
>Proto us0 .type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
>Proto us0 .processKind RICH_DIALOG #txt
>Proto us0 -8 -8 16 16 16 26 #rect
>Proto us0 '' #fIcon
us0 f18 mainOut f20 tail #connect
us0 f20 head f19 mainIn #connect
us0 f87 out f29 tail #connect
us0 f29 head f28 mainIn #connect
us0 f77 out f106 tail #connect
us0 f106 head f105 mainIn #connect
us0 f13 out f16 tail #connect
us0 f16 head f15 mainIn #connect
us0 f13 out f121 tail #connect
us0 f121 head f11 mainIn #connect
us0 f126 mainOut f128 tail #connect
us0 f128 head f127 mainIn #connect
us0 f112 mainOut f132 tail #connect
us0 f132 head f124 mainIn #connect
us0 f124 mainOut f135 tail #connect
us0 f135 head f134 mainIn #connect
us0 f136 mainOut f138 tail #connect
us0 f138 head f137 mainIn #connect
us0 f137 mainOut f141 tail #connect
us0 f141 head f140 in #connect
us0 f92 mainOut f144 tail #connect
us0 f144 head f124 mainIn #connect
us0 f145 mainOut f147 tail #connect
us0 f147 head f146 mainIn #connect
us0 f26 mainOut f12 tail #connect
us0 f12 head f11 mainIn #connect
us0 f150 mainOut f152 tail #connect
us0 f152 head f151 mainIn #connect
us0 f153 mainOut f155 tail #connect
us0 f155 head f154 mainIn #connect
us0 f154 mainOut f158 tail #connect
us0 f158 head f157 mainIn #connect
us0 f157 mainOut f159 tail #connect
us0 f159 head f156 mainIn #connect
us0 f162 mainOut f164 tail #connect
us0 f164 head f163 mainIn #connect
us0 f95 out f168 tail #connect
us0 f168 head f31 mainIn #connect
us0 f77 out f177 tail #connect
us0 f177 head f176 mainIn #connect
us0 f176 mainOut f89 tail #connect
us0 f89 head f81 mainIn #connect
us0 f33 mainOut f107 tail #connect
us0 f107 head f115 mainIn #connect
us0 f10 mainOut f179 tail #connect
us0 f179 head f166 mainIn #connect
us0 f166 mainOut f24 tail #connect
us0 f24 head f94 mainIn #connect
us0 f9 mainOut f181 tail #connect
us0 f181 head f180 mainIn #connect
us0 f182 mainOut f184 tail #connect
us0 f184 head f183 mainIn #connect
us0 f183 mainOut f186 tail #connect
us0 f186 head f185 mainIn #connect
us0 f187 mainOut f189 tail #connect
us0 f189 head f188 mainIn #connect
us0 f205 mainOut f207 tail #connect
us0 f207 head f206 mainIn #connect
us0 f203 out f208 tail #connect
us0 f208 head f206 mainIn #connect
us0 f206 mainOut f212 tail #connect
us0 f212 head f211 mainIn #connect
us0 f227 mainOut f229 tail #connect
us0 f229 head f228 mainIn #connect
us0 f230 mainOut f232 tail #connect
us0 f232 head f231 mainIn #connect
us0 f239 mainOut f241 tail #connect
us0 f241 head f240 mainIn #connect
us0 f240 mainOut f243 tail #connect
us0 f243 head f242 mainIn #connect
us0 f277 mainOut f279 tail #connect
us0 f279 head f278 mainIn #connect
us0 f280 mainOut f282 tail #connect
us0 f282 head f281 mainIn #connect
us0 f301 mainOut f312 tail #connect
us0 f312 head f306 mainIn #connect
us0 f334 mainOut f337 tail #connect
us0 f337 head f336 mainIn #connect
us0 f335 mainOut f339 tail #connect
us0 f339 head f338 mainIn #connect
us0 f340 mainOut f342 tail #connect
us0 f342 head f341 mainIn #connect
us0 f8 mainOut f133 tail #connect
us0 f133 head f13 in #connect
us0 f142 head f358 mainIn #connect
us0 f358 mainOut f360 tail #connect
us0 f360 head f359 mainIn #connect
us0 f366 out f370 tail #connect
us0 f370 head f368 mainIn #connect
us0 f368 mainOut f374 tail #connect
us0 f374 head f373 mainIn #connect
us0 f140 out f142 tail #connect
us0 f274 mainOut f276 tail #connect
us0 f276 head f275 mainIn #connect
us0 f275 mainOut f357 tail #connect
us0 f357 head f140 in #connect
us0 f210 mainOut f379 tail #connect
us0 f379 head f284 in #connect
us0 f284 out f381 tail #connect
us0 f381 head f380 mainIn #connect
us0 f380 mainOut f385 tail #connect
us0 f385 head f384 mainIn #connect
us0 f395 out f398 tail #connect
us0 f398 head f397 mainIn #connect
us0 f397 mainOut f400 tail #connect
us0 f400 head f399 mainIn #connect
us0 f411 mainOut f415 tail #connect
us0 f415 head f413 in #connect
us0 f209 mainOut f418 tail #connect
us0 f418 head f411 mainIn #connect
us0 f403 mainOut f407 tail #connect
us0 f407 head f404 in #connect
us0 f387 mainOut f410 tail #connect
us0 f410 head f403 mainIn #connect
us0 f417 head f416 mainIn #connect
us0 f416 mainOut f412 tail #connect
us0 f412 head f414 mainIn #connect
us0 f419 mainOut f421 tail #connect
us0 f421 head f420 mainIn #connect
us0 f422 mainOut f424 tail #connect
us0 f424 head f423 mainIn #connect
us0 f443 head f442 mainIn #connect
us0 f446 head f445 mainIn #connect
us0 f445 mainOut f449 tail #connect
us0 f449 head f425 in #connect
us0 f450 mainOut f447 tail #connect
us0 f447 head f445 mainIn #connect
us0 f453 head f452 in #connect
us0 f461 mainOut f460 tail #connect
us0 f460 head f458 mainIn #connect
us0 f175 out f426 tail #connect
us0 f426 head f425 in #connect
us0 f178 mainOut f471 tail #connect
us0 f471 head f470 mainIn #connect
us0 f388 mainOut f390 tail #connect
us0 f390 head f389 mainIn #connect
us0 f391 mainOut f476 tail #connect
us0 f476 head f392 mainIn #connect
us0 f452 out f224 tail #connect
us0 f224 head f223 in #connect
us0 f437 out f459 tail #connect
us0 f459 head f456 mainIn #connect
us0 f437 out f443 tail #connect
us0 f437 out f446 tail #connect
us0 f456 mainOut f440 tail #connect
us0 f440 head f439 mainIn #connect
us0 f524 head f523 mainIn #connect
us0 f223 out f454 tail #connect
us0 f454 head f579 mainIn #connect
us0 f215 mainOut f62 tail #connect
us0 f62 head f14 mainIn #connect
us0 f588 mainOut f65 tail #connect
us0 f65 head f592 mainIn #connect
us0 f494 mainOut f67 tail #connect
us0 f67 head f66 mainIn #connect
us0 f66 mainOut f68 tail #connect
us0 f68 head f508 mainIn #connect
us0 f15 mainOut f32 tail #connect
us0 f32 head f26 mainIn #connect
us0 f105 mainOut f69 tail #connect
us0 f69 head f503 mainIn #connect
us0 f503 mainOut f70 tail #connect
us0 f70 head f81 mainIn #connect
us0 f324 mainOut f82 tail #connect
us0 f82 head f79 mainIn #connect
us0 f79 mainOut f84 tail #connect
us0 f84 head f327 mainIn #connect
us0 f285 mainOut f97 tail #connect
us0 f97 head f90 mainIn #connect
us0 f90 mainOut f98 tail #connect
us0 f98 head f288 mainIn #connect
us0 f117 mainOut f120 tail #connect
us0 f120 head f119 mainIn #connect
us0 f118 mainOut f148 tail #connect
us0 f148 head f119 mainIn #connect
us0 f169 mainOut f171 tail #connect
us0 f171 head f170 mainIn #connect
us0 f172 mainOut f194 tail #connect
us0 f194 head f192 mainIn #connect
us0 f192 mainOut f196 tail #connect
us0 f196 head f195 mainIn #connect
us0 f218 mainOut f294 tail #connect
us0 f294 head f220 mainIn #connect
us0 f220 mainOut f296 tail #connect
us0 f296 head f295 mainIn #connect
us0 f219 mainOut f298 tail #connect
us0 f298 head f297 mainIn #connect
us0 f305 mainOut f310 tail #connect
us0 f310 head f309 mainIn #connect
us0 f309 mainOut f308 tail #connect
us0 f308 head f307 mainIn #connect
us0 f314 mainOut f318 tail #connect
us0 f318 head f317 in #connect
us0 f326 out f316 tail #connect
us0 f316 head f315 mainIn #connect
us0 f315 mainOut f365 tail #connect
us0 f365 head f347 in #connect
us0 f326 out f479 tail #connect
us0 f479 head f432 mainIn #connect
us0 f344 mainOut f480 tail #connect
us0 f480 head f345 mainIn #connect
us0 f345 mainOut f485 tail #connect
us0 f485 head f317 in #connect
us0 f482 head f432 mainIn #connect
us0 f347 out f320 tail #connect
us0 f320 head f319 mainIn #connect
us0 f319 mainOut f431 tail #connect
us0 f431 head f432 mainIn #connect
us0 f486 mainOut f488 tail #connect
us0 f488 head f487 mainIn #connect
us0 f495 mainOut f498 tail #connect
us0 f498 head f497 mainIn #connect
us0 f496 mainOut f499 tail #connect
us0 f499 head f497 mainIn #connect
us0 f5 mainOut f501 tail #connect
us0 f501 head f457 mainIn #connect
us0 f457 mainOut f7 tail #connect
us0 f7 head f6 mainIn #connect
us0 f502 mainOut f505 tail #connect
us0 f505 head f504 mainIn #connect
us0 f506 mainOut f509 tail #connect
us0 f509 head f507 mainIn #connect
us0 f507 mainOut f511 tail #connect
us0 f511 head f510 mainIn #connect
us0 f512 mainOut f518 tail #connect
us0 f518 head f517 in #connect
us0 f517 out f529 tail #connect
us0 f529 head f525 mainIn #connect
us0 f532 mainOut f561 tail #connect
us0 f561 head f554 mainIn #connect
us0 f590 out f540 tail #connect
us0 f540 head f532 mainIn #connect
us0 f554 mainOut f595 tail #connect
us0 f595 head f594 mainIn #connect
us0 f594 mainOut f597 tail #connect
us0 f597 head f596 mainIn #connect
us0 f525 mainOut f601 tail #connect
us0 f601 head f600 in #connect
us0 f600 out f582 tail #connect
us0 f582 head f581 mainIn #connect
us0 f590 out f604 tail #connect
us0 f604 head f603 mainIn #connect
us0 f603 mainOut f606 tail #connect
us0 f606 head f605 in #connect
us0 f605 out f598 tail #connect
us0 f598 head f594 mainIn #connect
us0 f600 out f608 tail #connect
us0 f608 head f605 in #connect
us0 f517 out f602 tail #connect
us0 f602 head f605 in #connect
us0 f73 out f611 tail #connect
us0 f611 head f610 mainIn #connect
us0 f616 mainOut f143 tail #connect
us0 f143 head f139 mainIn #connect
us0 f628 mainOut f630 tail #connect
us0 f630 head f629 mainIn #connect
us0 f191 mainOut f641 tail #connect
us0 f641 head f214 mainIn #connect
us0 f214 mainOut f638 tail #connect
us0 f638 head f637 mainIn #connect
us0 f637 mainOut f643 tail #connect
us0 f643 head f642 mainIn #connect
us0 f645 out f648 tail #connect
us0 f648 head f647 mainIn #connect
us0 f647 mainOut f650 tail #connect
us0 f650 head f649 mainIn #connect
us0 f645 out f651 tail #connect
us0 f651 head f649 mainIn #connect
us0 f652 mainOut f654 tail #connect
us0 f654 head f653 mainIn #connect
us0 f653 mainOut f656 tail #connect
us0 f656 head f655 mainIn #connect
us0 f657 mainOut f658 tail #connect
us0 f658 head f41 in #connect
us0 f41 out f660 tail #connect
us0 f660 head f659 mainIn #connect
us0 f41 out f662 tail #connect
us0 f662 head f661 mainIn #connect
us0 f659 mainOut f664 tail #connect
us0 f664 head f663 mainIn #connect
us0 f661 mainOut f666 tail #connect
us0 f666 head f659 mainIn #connect
us0 f668 mainOut f56 tail #connect
us0 f56 head f73 in #connect
us0 f675 mainOut f678 tail #connect
us0 f678 head f677 mainIn #connect
us0 f140 out f682 tail #connect
us0 f682 head f674 mainIn #connect
us0 f329 out f687 tail #connect
us0 f687 head f686 mainIn #connect
us0 f610 mainOut f695 tail #connect
us0 f695 head f670 in #connect
us0 f670 out f57 tail #connect
us0 f57 head f191 mainIn #connect
us0 f670 out f697 tail #connect
us0 f697 head f696 mainIn #connect
us0 f696 mainOut f698 tail #connect
us0 f698 head f214 mainIn #connect
us0 f701 mainOut f702 tail #connect
us0 f702 head f487 mainIn #connect
us0 f516 mainOut f706 tail #connect
us0 f706 head f705 in #connect
us0 f703 mainOut f709 tail #connect
us0 f709 head f708 mainIn #connect
us0 f708 mainOut f515 tail #connect
us0 f515 head f514 mainIn #connect
us0 f710 mainOut f712 tail #connect
us0 f712 head f711 mainIn #connect
us0 f713 head f707 mainIn #connect
us0 f665 mainOut f725 tail #connect
us0 f725 head f667 in #connect
us0 f694 ao f100 tail #connect
us0 f100 head f277 @CG|ai #connect
us0 f667 out f102 tail #connect
us0 f102 head f101 mainIn #connect
us0 f667 out f669 tail #connect
us0 f669 head f668 mainIn #connect
us0 f667 out f130 tail #connect
us0 f130 head f129 mainIn #connect
us0 f705 out f726 tail #connect
us0 f726 head f519 in #connect
us0 f705 out f713 tail #connect
us0 f519 out f727 tail #connect
us0 f727 head f574 mainIn #connect
us0 f519 out f524 tail #connect
us0 f707 mainOut f522 tail #connect
us0 f522 head f574 mainIn #connect
us0 f520 out f625 tail #connect
us0 f625 head f576 mainIn #connect
us0 f520 out f714 tail #connect
us0 f714 head f575 mainIn #connect
us0 f576 mainOut f729 tail #connect
us0 f729 head f728 mainIn #connect
us0 f730 out f55 tail #connect
us0 f55 head f101 mainIn #connect
us0 f738 mainOut f741 tail #connect
us0 f741 head f740 mainIn #connect
us0 f733 mainOut f734 tail #connect
us0 f734 head f738 mainIn #connect
us0 f735 mainOut f743 tail #connect
us0 f743 head f739 in #connect
us0 f745 head f744 mainIn #connect
us0 f751 head f30 mainIn #connect
us0 f51 mainOut f672 tail #connect
us0 f672 head f671 in #connect
us0 f671 out f752 tail #connect
us0 f752 head f403 mainIn #connect
us0 f671 out f754 tail #connect
us0 f754 head f753 mainIn #connect
us0 f366 out f755 tail #connect
us0 f755 head f373 mainIn #connect
us0 f103 mainOut f104 tail #connect
us0 f104 head f497 mainIn #connect
us0 f489 head f483 mainIn #connect
us0 f3 mainOut f526 tail #connect
us0 f526 head f521 in #connect
us0 f539 mainOut f541 tail #connect
us0 f541 head f645 in #connect
us0 f269 mainOut f408 tail #connect
us0 f408 head f369 in #connect
us0 f537 mainOut f538 tail #connect
us0 f538 head f748 in #connect
us0 f739 out f543 tail #connect
us0 f543 head f542 mainIn #connect
us0 f739 out f745 tail #connect
us0 f542 mainOut f544 tail #connect
us0 f544 head f742 mainIn #connect
us0 f535 mainOut f553 tail #connect
us0 f553 head f536 mainIn #connect
us0 f548 mainOut f550 tail #connect
us0 f550 head f549 mainIn #connect
us0 f547 mainOut f552 tail #connect
us0 f552 head f551 in #connect
us0 f551 out f556 tail #connect
us0 f556 head f555 mainIn #connect
us0 f555 mainOut f558 tail #connect
us0 f558 head f557 mainIn #connect
us0 f551 out f559 tail #connect
us0 f559 head f557 mainIn #connect
us0 f560 mainOut f564 tail #connect
us0 f564 head f563 mainIn #connect
us0 f563 mainOut f562 tail #connect
us0 f562 head f703 mainIn #connect
us0 f565 mainOut f567 tail #connect
us0 f567 head f566 mainIn #connect
us0 f566 mainOut f569 tail #connect
us0 f569 head f568 mainIn #connect
us0 f571 mainOut f573 tail #connect
us0 f573 head f572 in #connect
us0 f572 out f627 tail #connect
us0 f627 head f626 mainIn #connect
us0 f626 mainOut f633 tail #connect
us0 f633 head f705 in #connect
us0 f646 mainOut f680 tail #connect
us0 f680 head f679 in #connect
us0 f679 out f683 tail #connect
us0 f683 head f681 mainIn #connect
us0 f715 mainOut f757 tail #connect
us0 f757 head f756 mainIn #connect
us0 f758 mainOut f760 tail #connect
us0 f760 head f759 mainIn #connect
us0 f761 mainOut f764 tail #connect
us0 f764 head f763 in #connect
us0 f763 out f716 tail #connect
us0 f716 head f715 mainIn #connect
us0 f767 mainOut f769 tail #connect
us0 f769 head f768 mainIn #connect
us0 f771 out f773 tail #connect
us0 f773 head f679 in #connect
us0 f771 out f775 tail #connect
us0 f775 head f774 mainIn #connect
us0 f768 mainOut f777 tail #connect
us0 f777 head f776 mainIn #connect
us0 f770 mainOut f772 tail #connect
us0 f772 head f771 in #connect
us0 f778 mainOut f762 tail #connect
us0 f762 head f761 mainIn #connect
us0 f781 mainOut f783 tail #connect
us0 f783 head f782 mainIn #connect
us0 f784 mainOut f786 tail #connect
us0 f786 head f785 mainIn #connect
us0 f787 mainOut f789 tail #connect
us0 f789 head f788 mainIn #connect
us0 f170 mainOut f791 tail #connect
us0 f791 head f790 mainIn #connect
us0 f790 mainOut f174 tail #connect
us0 f174 head f173 mainIn #connect
us0 f579 mainOut f793 tail #connect
us0 f793 head f792 mainIn #connect
us0 f792 mainOut f580 tail #connect
us0 f580 head f458 mainIn #connect
us0 f306 mainOut f795 tail #connect
us0 f795 head f794 mainIn #connect
us0 f794 mainOut f64 tail #connect
us0 f64 head f63 mainIn #connect
us0 f31 mainOut f797 tail #connect
us0 f797 head f796 mainIn #connect
us0 f796 mainOut f50 tail #connect
us0 f50 head f40 mainIn #connect
us0 f803 mainOut f806 tail #connect
us0 f806 head f805 in #connect
us0 f807 mainOut f802 tail #connect
us0 f802 head f801 mainIn #connect
us0 f813 mainOut f808 tail #connect
us0 f808 head f807 mainIn #connect
us0 f816 head f815 mainIn #connect
us0 f817 out f822 tail #connect
us0 f822 head f821 mainIn #connect
us0 f824 out f827 tail #connect
us0 f827 head f826 mainIn #connect
us0 f824 out f829 tail #connect
us0 f829 head f828 mainIn #connect
us0 f828 mainOut f831 tail #connect
us0 f831 head f830 in #connect
us0 f838 mainOut f840 tail #connect
us0 f840 head f839 mainIn #connect
us0 f839 mainOut f842 tail #connect
us0 f842 head f841 mainIn #connect
us0 f821 mainOut f844 tail #connect
us0 f844 head f843 in #connect
us0 f810 head f809 mainIn #connect
us0 f95 out f851 tail #connect
us0 f851 head f850 mainIn #connect
us0 f850 mainOut f149 tail #connect
us0 f149 head f40 mainIn #connect
us0 f780 mainOut f853 tail #connect
us0 f853 head f852 mainIn #connect
us0 f798 mainOut f855 tail #connect
us0 f855 head f854 in #connect
us0 f854 out f800 tail #connect
us0 f800 head f799 mainIn #connect
us0 f863 head f862 mainIn #connect
us0 f343 mainOut f873 tail #connect
us0 f873 head f346 mainIn #connect
us0 f74 mainOut f60 tail #connect
us0 f60 head f59 in #connect
us0 f311 mainOut f61 tail #connect
us0 f61 head f59 in #connect
us0 f59 out f313 tail #connect
us0 f313 head f329 in #connect
us0 f59 out f330 tail #connect
us0 f330 head f81 mainIn #connect
us0 f425 out f875 tail #connect
us0 f875 head f874 mainIn #connect
us0 f425 out f453 tail #connect
us0 f442 mainOut f428 tail #connect
us0 f428 head f874 mainIn #connect
us0 f874 mainOut f444 tail #connect
us0 f444 head f429 in #connect
us0 f441 head f439 mainIn #connect
us0 f439 mainOut f451 tail #connect
us0 f451 head f434 in #connect
us0 f877 head f450 mainIn #connect
us0 f434 out f878 tail #connect
us0 f878 head f445 mainIn #connect
us0 f434 out f877 tail #connect
us0 f1 mainOut f36 tail #connect
us0 f36 head f2 mainIn #connect
us0 f37 mainOut f46 tail #connect
us0 f46 head f45 in #connect
us0 f45 out f43 tail #connect
us0 f43 head f42 mainIn #connect
us0 f197 mainOut f213 tail #connect
us0 f213 head f202 mainIn #connect
us0 f45 out f216 tail #connect
us0 f216 head f202 mainIn #connect
us0 f217 head f202 mainIn #connect
us0 f19 mainOut f433 tail #connect
us0 f433 head f377 mainIn #connect
us0 f377 mainOut f22 tail #connect
us0 f22 head f21 mainIn #connect
us0 f500 mainOut f533 tail #connect
us0 f533 head f531 mainIn #connect
us0 f530 mainOut f534 tail #connect
us0 f534 head f531 mainIn #connect
us0 f180 mainOut f870 tail #connect
us0 f870 head f869 in #connect
us0 f881 head f880 mainIn #connect
us0 f880 mainOut f882 tail #connect
us0 f882 head f44 mainIn #connect
us0 f869 out f884 tail #connect
us0 f884 head f883 mainIn #connect
us0 f869 out f881 tail #connect
us0 f886 mainOut f889 tail #connect
us0 f889 head f888 mainIn #connect
us0 f890 mainOut f892 tail #connect
us0 f892 head f891 mainIn #connect
us0 f891 mainOut f894 tail #connect
us0 f894 head f893 mainIn #connect
us0 f404 out f901 tail #connect
us0 f901 head f900 mainIn #connect
us0 f900 mainOut f903 tail #connect
us0 f903 head f902 in #connect
us0 f902 out f613 tail #connect
us0 f613 head f612 mainIn #connect
us0 f911 mainOut f915 tail #connect
us0 f915 head f914 in #connect
us0 f413 out f919 tail #connect
us0 f919 head f911 mainIn #connect
us0 f413 out f417 tail #connect
us0 f914 out f283 tail #connect
us0 f283 head f210 mainIn #connect
us0 f920 mainOut f922 tail #connect
us0 f922 head f921 mainIn #connect
us0 f925 mainOut f927 tail #connect
us0 f927 head f926 in #connect
us0 f936 out f939 tail #connect
us0 f939 head f938 mainIn #connect
us0 f938 mainOut f941 tail #connect
us0 f941 head f940 mainIn #connect
us0 f940 mainOut f943 tail #connect
us0 f943 head f942 mainIn #connect
us0 f942 mainOut f945 tail #connect
us0 f945 head f944 mainIn #connect
us0 f936 out f947 tail #connect
us0 f947 head f946 mainIn #connect
us0 f946 mainOut f949 tail #connect
us0 f949 head f948 in #connect
us0 f948 out f951 tail #connect
us0 f951 head f942 mainIn #connect
us0 f953 head f948 in #connect
us0 f954 out f957 tail #connect
us0 f957 head f956 mainIn #connect
us0 f964 mainOut f966 tail #connect
us0 f966 head f965 mainIn #connect
us0 f895 ao f968 tail #connect
us0 f968 head f343 @CG|ai #connect
us0 f967 out f970 tail #connect
us0 f970 head f668 mainIn #connect
us0 f799 mainOut f976 tail #connect
us0 f976 head f975 mainIn #connect
us0 f975 mainOut f977 tail #connect
us0 f977 head f804 in #connect
us0 f116 mainOut f986 tail #connect
us0 f986 head f985 mainIn #connect
us0 f299 mainOut f868 tail #connect
us0 f868 head f985 mainIn #connect
us0 f584 mainOut f378 tail #connect
us0 f378 head f985 mainIn #connect
us0 f985 mainOut f300 tail #connect
us0 f300 head f871 mainIn #connect
us0 f423 mainOut f988 tail #connect
us0 f988 head f987 mainIn #connect
us0 f987 mainOut f990 tail #connect
us0 f990 head f989 in #connect
us0 f989 out f72 tail #connect
us0 f72 head f175 in #connect
us0 f574 mainOut f997 tail #connect
us0 f997 head f996 in #connect
us0 f996 out f570 tail #connect
us0 f570 head f520 in #connect
us0 f996 out f1001 tail #connect
us0 f1001 head f999 mainIn #connect
us0 f679 out f1005 tail #connect
us0 f1005 head f1004 mainIn #connect
us0 f1004 mainOut f1007 tail #connect
us0 f1007 head f1006 in #connect
us0 f1006 out f779 tail #connect
us0 f779 head f778 mainIn #connect
us0 f27 mainOut f372 tail #connect
us0 f372 head f1014 in #connect
us0 f1014 out f1017 tail #connect
us0 f1017 head f1016 mainIn #connect
us0 f1022 mainOut f1024 tail #connect
us0 f1024 head f1023 mainIn #connect
us0 f1023 mainOut f1026 tail #connect
us0 f1026 head f1025 mainIn #connect
us0 f1027 mainOut f1029 tail #connect
us0 f1029 head f1028 mainIn #connect
us0 f1028 mainOut f1030 tail #connect
us0 f1030 head f1025 mainIn #connect
us0 f1031 out f1033 tail #connect
us0 f1033 head f1023 mainIn #connect
us0 f203 out f1037 tail #connect
us0 f1037 head f1036 mainIn #connect
us0 f1036 mainOut f1038 tail #connect
us0 f1038 head f193 mainIn #connect
us0 f472 mainOut f199 tail #connect
us0 f199 head f198 mainIn #connect
us0 f233 ao f234 tail #connect
us0 f234 head f733 @CG|ai #connect
us0 f235 ao f244 tail #connect
us0 f244 head f51 @CG|ai #connect
us0 f395 out f245 tail #connect
us0 f245 head f399 mainIn #connect
us0 f469 mainOut f249 tail #connect
us0 f249 head f472 mainIn #connect
us0 f473 mainOut f250 tail #connect
us0 f250 head f1031 in #connect
us0 f475 mainOut f247 tail #connect
us0 f247 head f474 mainIn #connect
us0 f1031 out f246 tail #connect
us0 f246 head f475 mainIn #connect
us0 f763 out f248 tail #connect
us0 f248 head f756 mainIn #connect
us0 f251 ao f252 tail #connect
us0 f252 head f767 @CG|ai #connect
us0 f253 ao f254 tail #connect
us0 f254 head f770 @CG|ai #connect
us0 f572 out f256 tail #connect
us0 f256 head f255 mainIn #connect
us0 f257 ao f258 tail #connect
us0 f258 head f565 @CG|ai #connect
us0 f259 ao f260 tail #connect
us0 f260 head f560 @CG|ai #connect
us0 f261 mainOut f266 tail #connect
us0 f266 head f264 mainIn #connect
us0 f467 mainOut f263 tail #connect
us0 f263 head f262 mainIn #connect
us0 f487 mainOut f110 tail #connect
us0 f110 head f262 mainIn #connect
us0 f160 mainOut f111 tail #connect
us0 f111 head f262 mainIn #connect
us0 f53 mainOut f54 tail #connect
us0 f54 head f262 mainIn #connect
us0 f34 mainOut f109 tail #connect
us0 f109 head f262 mainIn #connect
us0 f0 mainOut f4 tail #connect
us0 f4 head f262 mainIn #connect
us0 f99 mainOut f96 tail #connect
us0 f96 head f262 mainIn #connect
us0 f52 mainOut f93 tail #connect
us0 f93 head f262 mainIn #connect
us0 f699 mainOut f265 tail #connect
us0 f265 head f262 mainIn #connect
us0 f634 mainOut f267 tail #connect
us0 f267 head f262 mainIn #connect
us0 f717 mainOut f271 tail #connect
us0 f271 head f262 mainIn #connect
us0 f262 mainOut f35 tail #connect
us0 f35 head f954 in #connect
us0 f954 out f123 tail #connect
us0 f123 head f91 mainIn #connect
us0 f954 out f161 tail #connect
us0 f161 head f3 mainIn #connect
us0 f956 mainOut f349 tail #connect
us0 f349 head f865 mainIn #connect
us0 f521 out f351 tail #connect
us0 f351 head f350 mainIn #connect
us0 f521 out f863 tail #connect
us0 f350 mainOut f270 tail #connect
us0 f270 head f865 mainIn #connect
us0 f527 head f402 mainIn #connect
us0 f585 mainOut f618 tail #connect
us0 f618 head f586 in #connect
us0 f586 out f620 tail #connect
us0 f620 head f619 mainIn #connect
us0 f619 mainOut f622 tail #connect
us0 f622 head f621 mainIn #connect
us0 f586 out f623 tail #connect
us0 f623 head f621 mainIn #connect
us0 f355 out f636 tail #connect
us0 f636 head f635 in #connect
us0 f355 out f527 tail #connect
us0 f635 out f430 tail #connect
us0 f430 head f427 mainIn #connect
us0 f354 mainOut f401 tail #connect
us0 f401 head f355 in #connect
us0 f273 mainOut f718 tail #connect
us0 f718 head f640 mainIn #connect
us0 f766 mainOut f879 tail #connect
us0 f879 head f876 mainIn #connect
us0 f896 mainOut f898 tail #connect
us0 f898 head f897 mainIn #connect
us0 f897 mainOut f272 tail #connect
us0 f272 head f954 in #connect
us0 f955 mainOut f962 tail #connect
us0 f962 head f899 mainIn #connect
us0 f899 mainOut f963 tail #connect
us0 f963 head f954 in #connect
us0 f721 mainOut f1034 tail #connect
us0 f1034 head f487 mainIn #connect
us0 f427 mainOut f468 tail #connect
us0 f468 head f402 mainIn #connect
us0 f528 mainOut f724 tail #connect
us0 f724 head f723 mainIn #connect
us0 f723 mainOut f720 tail #connect
us0 f720 head f954 in #connect
us0 f765 mainOut f1032 tail #connect
us0 f1032 head f960 mainIn #connect
us0 f960 mainOut f1039 tail #connect
us0 f1039 head f1035 mainIn #connect
us0 f958 mainOut f1043 tail #connect
us0 f1043 head f1040 mainIn #connect
us0 f1040 mainOut f1057 tail #connect
us0 f1057 head f1049 in #connect
us0 f1049 out f1062 tail #connect
us0 f1062 head f1058 mainIn #connect
us0 f1049 out f1060 tail #connect
us0 f1060 head f1059 mainIn #connect
us0 f1059 mainOut f1064 tail #connect
us0 f1064 head f1063 mainIn #connect
us0 f1063 mainOut f1061 tail #connect
us0 f1061 head f1058 mainIn #connect
us0 f1066 mainOut f1069 tail #connect
us0 f1069 head f1068 mainIn #connect
us0 f1065 mainOut f1071 tail #connect
us0 f1071 head f1070 in #connect
us0 f1070 out f1073 tail #connect
us0 f1073 head f1072 mainIn #connect
us0 f1070 out f1067 tail #connect
us0 f1067 head f1066 mainIn #connect
us0 f1072 mainOut f1074 tail #connect
us0 f1074 head f1068 mainIn #connect
us0 f1075 mainOut f1077 tail #connect
us0 f1077 head f1076 mainIn #connect
us0 f862 mainOut f1079 tail #connect
us0 f1079 head f1078 in #connect
us0 f1078 out f1081 tail #connect
us0 f1081 head f350 mainIn #connect
us0 f42 mainOut f1087 tail #connect
us0 f1087 head f1086 mainIn #connect
us0 f1086 mainOut f49 tail #connect
us0 f49 head f71 in #connect
us0 f71 out f1088 tail #connect
us0 f1088 head f197 mainIn #connect
us0 f71 out f217 tail #connect
us0 f48 mainOut f200 tail #connect
us0 f200 head f108 mainIn #connect
us0 f108 mainOut f1082 tail #connect
us0 f1082 head f1080 mainIn #connect
us0 f87 out f86 tail #connect
us0 f86 head f40 mainIn #connect
us0 f1083 mainOut f1084 tail #connect
us0 f1084 head f475 mainIn #connect
us0 f1085 mainOut f1091 tail #connect
us0 f1091 head f1090 mainIn #connect
us0 f1094 out f1089 tail #connect
us0 f1089 head f1085 mainIn #connect
us0 f1094 out f1097 tail #connect
us0 f1097 head f1090 mainIn #connect
us0 f1098 mainOut f1100 tail #connect
us0 f1100 head f1099 mainIn #connect
us0 f83 mainOut f1102 tail #connect
us0 f1102 head f1101 mainIn #connect
us0 f1101 mainOut f1096 tail #connect
us0 f1096 head f1094 in #connect
us0 f361 mainOut f1104 tail #connect
us0 f1104 head f1103 mainIn #connect
us0 f1103 mainOut f363 tail #connect
us0 f363 head f366 in #connect
us0 f1107 mainOut f1106 tail #connect
us0 f1106 head f730 in #connect
us0 f190 mainOut f1109 tail #connect
us0 f1109 head f1107 mainIn #connect
us0 f731 mainOut f1105 tail #connect
us0 f1105 head f1107 mainIn #connect
us0 f1108 mainOut f1110 tail #connect
us0 f1110 head f206 mainIn #connect
us0 f1112 head f1111 mainIn #connect
us0 f1111 mainOut f1114 tail #connect
us0 f1114 head f1113 mainIn #connect
us0 f883 mainOut f1116 tail #connect
us0 f1116 head f1115 mainIn #connect
us0 f1115 mainOut f593 tail #connect
us0 f593 head f44 mainIn #connect
us0 f1117 mainOut f546 tail #connect
us0 f546 head f483 mainIn #connect
us0 f113 mainOut f545 tail #connect
us0 f545 head f913 mainIn #connect
us0 f284 out f383 tail #connect
us0 f383 head f587 mainIn #connect
us0 f914 out f685 tail #connect
us0 f685 head f113 mainIn #connect
us0 f587 mainOut f382 tail #connect
us0 f382 head f380 mainIn #connect
us0 f404 out f448 tail #connect
us0 f448 head f386 mainIn #connect
us0 f386 mainOut f356 tail #connect
us0 f356 head f406 mainIn #connect
us0 f902 out f364 tail #connect
us0 f364 head f238 mainIn #connect
us0 f238 mainOut f405 tail #connect
us0 f405 head f906 mainIn #connect
us0 f612 mainOut f684 tail #connect
us0 f684 head f409 mainIn #connect
us0 f409 mainOut f394 tail #connect
us0 f394 head f395 in #connect
us0 f674 mainOut f393 tail #connect
us0 f393 head f376 mainIn #connect
us0 f376 mainOut f396 tail #connect
us0 f396 head f616 mainIn #connect
us0 f375 mainOut f481 tail #connect
us0 f481 head f87 in #connect
us0 f1016 mainOut f292 tail #connect
us0 f292 head f38 mainIn #connect
us0 f38 mainOut f904 tail #connect
us0 f904 head f1020 mainIn #connect
us0 f129 mainOut f907 tail #connect
us0 f907 head f905 mainIn #connect
us0 f905 mainOut f131 tail #connect
us0 f131 head f675 mainIn #connect
us0 f673 mainOut f908 tail #connect
us0 f908 head f206 mainIn #connect
us0 f732 mainOut f58 tail #connect
us0 f58 head f203 in #connect
us0 f73 out f909 tail #connect
us0 f909 head f732 mainIn #connect
us0 f999 mainOut f204 tail #connect
us0 f204 head f201 mainIn #connect
us0 f201 mainOut f236 tail #connect
us0 f236 head f1002 mainIn #connect
us0 f575 mainOut f910 tail #connect
us0 f910 head f237 mainIn #connect
us0 f237 mainOut f577 tail #connect
us0 f577 head f576 mainIn #connect
us0 f578 mainOut f322 tail #connect
us0 f322 head f326 in #connect
us0 f317 out f624 tail #connect
us0 f624 head f578 mainIn #connect
us0 f317 out f482 tail #connect
us0 f347 out f323 tail #connect
us0 f323 head f321 mainIn #connect
us0 f321 mainOut f325 tail #connect
us0 f325 head f432 mainIn #connect
us0 f1006 out f463 tail #connect
us0 f463 head f328 mainIn #connect
us0 f328 mainOut f465 tail #connect
us0 f465 head f1010 mainIn #connect
us0 f679 out f477 tail #connect
us0 f477 head f466 mainIn #connect
us0 f466 mainOut f478 tail #connect
us0 f478 head f749 mainIn #connect
us0 f635 out f737 tail #connect
us0 f737 head f736 mainIn #connect
us0 f736 mainOut f700 tail #connect
us0 f700 head f402 mainIn #connect
us0 f932 mainOut f719 tail #connect
us0 f719 head f644 mainIn #connect
us0 f644 mainOut f746 tail #connect
us0 f746 head f936 in #connect
us0 f581 mainOut f750 tail #connect
us0 f750 head f747 mainIn #connect
us0 f747 mainOut f589 tail #connect
us0 f589 head f590 in #connect
us0 f686 mainOut f916 tail #connect
us0 f916 head f912 mainIn #connect
us0 f912 mainOut f332 tail #connect
us0 f332 head f77 in #connect
us0 f329 out f47 tail #connect
us0 f47 head f917 mainIn #connect
us0 f917 mainOut f688 tail #connect
us0 f688 head f176 mainIn #connect
us0 f223 out f78 tail #connect
us0 f78 head f75 mainIn #connect
us0 f75 mainOut f226 tail #connect
us0 f226 head f579 mainIn #connect
us0 f452 out f225 tail #connect
us0 f225 head f80 mainIn #connect
us0 f80 mainOut f331 tail #connect
us0 f331 head f461 mainIn #connect
us0 f989 out f436 tail #connect
us0 f436 head f333 mainIn #connect
us0 f175 out f583 tail #connect
us0 f583 head f462 mainIn #connect
us0 f429 out f491 tail #connect
us0 f491 head f599 mainIn #connect
us0 f429 out f441 tail #connect
us0 f599 mainOut f490 tail #connect
us0 f490 head f484 mainIn #connect
us0 f484 mainOut f76 tail #connect
us0 f76 head f437 in #connect
us0 f854 out f438 tail #connect
us0 f438 head f435 mainIn #connect
us0 f609 head f591 mainIn #connect
us0 f435 mainOut f493 tail #connect
us0 f493 head f983 mainIn #connect
us0 f809 mainOut f691 tail #connect
us0 f691 head f690 mainIn #connect
us0 f690 mainOut f692 tail #connect
us0 f692 head f824 in #connect
us0 f843 out f812 tail #connect
us0 f812 head f693 mainIn #connect
us0 f843 out f810 tail #connect
us0 f817 out f845 tail #connect
us0 f845 head f825 mainIn #connect
us0 f629 mainOut f846 tail #connect
us0 f846 head f837 mainIn #connect
us0 f837 mainOut f632 tail #connect
us0 f632 head f631 mainIn #connect
us0 f926 out f857 tail #connect
us0 f857 head f928 mainIn #connect
us0 f926 out f953 tail #connect
us0 f930 out f858 tail #connect
us0 f858 head f932 mainIn #connect
us0 f921 mainOut f848 tail #connect
us0 f848 head f847 in #connect
us0 f856 mainOut f849 tail #connect
us0 f849 head f923 mainIn #connect
us0 f861 head f860 mainIn #connect
us0 f860 mainOut f929 tail #connect
us0 f929 head f918 in #connect
us0 f918 out f933 tail #connect
us0 f933 head f924 mainIn #connect
us0 f928 mainOut f950 tail #connect
us0 f950 head f937 in #connect
us0 f937 out f972 tail #connect
us0 f972 head f971 mainIn #connect
us0 f971 mainOut f931 tail #connect
us0 f931 head f930 in #connect
us0 f937 out f973 tail #connect
us0 f973 head f930 in #connect
us0 f930 out f974 tail #connect
us0 f974 head f948 in #connect
us0 f979 out f980 tail #connect
us0 f980 head f834 mainIn #connect
us0 f815 mainOut f981 tail #connect
us0 f981 head f979 in #connect
us0 f834 mainOut f818 tail #connect
us0 f818 head f817 in #connect
us0 f979 out f982 tail #connect
us0 f982 head f817 in #connect
us0 f591 mainOut f991 tail #connect
us0 f991 head f984 mainIn #connect
us0 f984 mainOut f689 tail #connect
us0 f689 head f983 mainIn #connect
us0 f825 mainOut f993 tail #connect
us0 f993 head f992 mainIn #connect
us0 f992 mainOut f819 tail #connect
us0 f819 head f836 mainIn #connect
us0 f830 out f995 tail #connect
us0 f995 head f994 mainIn #connect
us0 f994 mainOut f832 tail #connect
us0 f832 head f801 mainIn #connect
us0 f605 out f835 tail #connect
us0 f835 head f820 mainIn #connect
us0 f820 mainOut f607 tail #connect
us0 f607 head f596 mainIn #connect
us0 f948 out f1000 tail #connect
us0 f1000 head f998 mainIn #connect
us0 f998 mainOut f952 tail #connect
us0 f952 head f944 mainIn #connect
us0 f333 mainOut f1008 tail #connect
us0 f1008 head f1003 mainIn #connect
us0 f462 mainOut f455 tail #connect
us0 f455 head f1003 mainIn #connect
us0 f1003 mainOut f464 tail #connect
us0 f464 head f492 mainIn #connect
us0 f967 out f1011 tail #connect
us0 f1011 head f1009 in #connect
us0 f967 out f1112 tail #connect
us0 f1009 out f1012 tail #connect
us0 f1012 head f206 mainIn #connect
us0 f1009 out f676 tail #connect
us0 f676 head f673 mainIn #connect
us0 f730 out f367 tail #connect
us0 f367 head f362 mainIn #connect
us0 f362 mainOut f969 tail #connect
us0 f969 head f967 in #connect
us0 f1019 mainOut f1093 tail #connect
us0 f1093 head f1021 mainIn #connect
us0 f1021 mainOut f1119 tail #connect
us0 f1119 head f1095 mainIn #connect
us0 f1120 mainOut f1122 tail #connect
us0 f1122 head f1121 mainIn #connect
us0 f1123 mainOut f1125 tail #connect
us0 f1125 head f1124 mainIn #connect
us0 f1078 out f1128 tail #connect
us0 f1128 head f268 mainIn #connect
us0 f1127 mainOut f1130 tail #connect
us0 f1130 head f1129 mainIn #connect
us0 f1131 mainOut f1133 tail #connect
us0 f1133 head f1132 mainIn #connect
us0 f1132 mainOut f1135 tail #connect
us0 f1135 head f1134 in #connect
us0 f1134 out f1137 tail #connect
us0 f1137 head f1136 mainIn #connect
us0 f1134 out f1139 tail #connect
us0 f1139 head f1138 mainIn #connect
us0 f1138 mainOut f1141 tail #connect
us0 f1141 head f1140 mainIn #connect
us0 f1140 mainOut f1143 tail #connect
us0 f1143 head f1142 mainIn #connect
us0 f1136 mainOut f1145 tail #connect
us0 f1145 head f1144 mainIn #connect
us0 f1144 mainOut f1147 tail #connect
us0 f1147 head f1146 mainIn #connect
us0 f1146 mainOut f1148 tail #connect
us0 f1148 head f1132 mainIn #connect
us0 f1149 mainOut f1151 tail #connect
us0 f1151 head f1150 mainIn #connect
us0 f1150 mainOut f1126 tail #connect
us0 f1126 head f864 mainIn #connect
us0 f864 mainOut f1153 tail #connect
us0 f1153 head f1152 mainIn #connect
us0 f1156 out f1155 tail #connect
us0 f1155 head f886 mainIn #connect
us0 f1156 out f1159 tail #connect
us0 f1159 head f1158 mainIn #connect
us0 f1158 mainOut f1160 tail #connect
us0 f1160 head f886 mainIn #connect
us0 f1161 mainOut f1162 tail #connect
us0 f1162 head f1156 in #connect
us0 f804 out f887 tail #connect
us0 f887 head f885 mainIn #connect
us0 f804 out f609 tail #connect
us0 f885 mainOut f1163 tail #connect
us0 f1163 head f1157 in #connect
us0 f1157 out f978 tail #connect
us0 f978 head f803 mainIn #connect
us0 f1157 out f1164 tail #connect
us0 f1164 head f1154 mainIn #connect
us0 f1154 mainOut f1165 tail #connect
us0 f1165 head f803 mainIn #connect
us0 f369 out f1166 tail #connect
us0 f1166 head f1018 in #connect
us0 f369 out f489 tail #connect
us0 f1018 out f1167 tail #connect
us0 f1167 head f1117 mainIn #connect
us0 f1018 out f1168 tail #connect
us0 f1168 head f1118 mainIn #connect
us0 f1118 mainOut f1169 tail #connect
us0 f1169 head f483 mainIn #connect
us0 f513 mainOut f1170 tail #connect
us0 f1170 head f563 mainIn #connect
us0 f704 mainOut f23 tail #connect
us0 f23 head f25 mainIn #connect
us0 f17 mainOut f1173 tail #connect
us0 f1173 head f1172 in #connect
us0 f1172 out f1171 tail #connect
us0 f1171 head f704 mainIn #connect
us0 f1172 out f1175 tail #connect
us0 f1175 head f1174 mainIn #connect
us0 f1174 mainOut f1176 tail #connect
us0 f1176 head f704 mainIn #connect
us0 f1177 mainOut f1179 tail #connect
us0 f1179 head f1178 mainIn #connect
us0 f642 mainOut f639 tail #connect
us0 f639 head f193 mainIn #connect
us0 f114 mainOut f1180 tail #connect
us0 f1180 head f954 in #connect
us0 f165 mainOut f722 tail #connect
us0 f722 head f862 mainIn #connect
us0 f122 mainOut f867 tail #connect
us0 f867 head f862 mainIn #connect
us0 f961 head f959 mainIn #connect
us0 f1041 mainOut f1044 tail #connect
us0 f1044 head f1042 mainIn #connect
us0 f1045 mainOut f1047 tail #connect
us0 f1047 head f1046 in #connect
us0 f1046 out f1048 tail #connect
us0 f1048 head f854 in #connect
us0 f1046 out f1051 tail #connect
us0 f1051 head f1050 mainIn #connect
us0 f748 out f1054 tail #connect
us0 f1054 head f1053 mainIn #connect
us0 f748 out f751 tail #connect
us0 f1053 mainOut f1015 tail #connect
us0 f1015 head f1014 in #connect
us0 f872 mainOut f1055 tail #connect
us0 f1055 head f353 in #connect
us0 f353 out f1092 tail #connect
us0 f1092 head f1056 mainIn #connect
us0 f353 out f961 tail #connect
us0 f1056 mainOut f352 tail #connect
us0 f352 head f375 mainIn #connect
us0 f1014 out f1181 tail #connect
us0 f1181 head f872 mainIn #connect
us0 f28 mainOut f125 tail #connect
us0 f125 head f95 in #connect
us0 f805 out f85 tail #connect
us0 f85 head f39 mainIn #connect
us0 f805 out f816 tail #connect
us0 f39 mainOut f88 tail #connect
us0 f88 head f813 mainIn #connect
us0 f693 mainOut f167 tail #connect
us0 f167 head f39 mainIn #connect
us0 f826 mainOut f290 tail #connect
us0 f290 head f39 mainIn #connect
us0 f830 out f291 tail #connect
us0 f291 head f39 mainIn #connect
us0 f847 out f371 tail #connect
us0 f371 head f293 mainIn #connect
us0 f847 out f861 tail #connect
us0 f293 mainOut f614 tail #connect
us0 f614 head f856 mainIn #connect
us0 f918 out f615 tail #connect
us0 f615 head f293 mainIn #connect
us0 f924 mainOut f617 tail #connect
us0 f617 head f293 mainIn #connect
us0 f814 mainOut f935 tail #connect
us0 f935 head f934 mainIn #connect
us0 f934 mainOut f1182 tail #connect
us0 f1182 head f1052 mainIn #connect
us0 f1052 mainOut f859 tail #connect
us0 f859 head f833 mainIn #connect
us0 f811 mainOut f1184 tail #connect
us0 f1184 head f1183 in #connect
us0 f1186 head f1052 mainIn #connect
us0 f1183 out f1187 tail #connect
us0 f1187 head f1185 mainIn #connect
us0 f1183 out f1186 tail #connect
us0 f1185 mainOut f1189 tail #connect
us0 f1189 head f1188 in #connect
us0 f1188 out f823 tail #connect
us0 f823 head f814 mainIn #connect
us0 f1188 out f1190 tail #connect
us0 f1190 head f833 mainIn #connect
us0 f302 mainOut f304 tail #connect
us0 f304 head f303 mainIn #connect
us0 f221 mainOut f286 tail #connect
us0 f286 head f222 mainIn #connect
us0 f222 mainOut f289 tail #connect
us0 f289 head f287 mainIn #connect
us0 f268 mainOut f1192 tail #connect
us0 f1192 head f1191 mainIn #connect
us0 f1191 mainOut f1194 tail #connect
us0 f1194 head f1193 mainIn #connect
us0 f1193 mainOut f866 tail #connect
us0 f866 head f865 mainIn #connect
us0 f91 mainOut f1195 tail #connect
us0 f1195 head f1193 mainIn #connect
