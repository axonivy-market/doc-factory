[Ivy]
[>Created: Fri Jun 28 09:33:19 EDT 2013]
125FE384C5BE80F0 3.17 #module
>Proto >Proto Collection #zClass
Fs0 FileChooserDialogProcess Big #zClass
Fs0 RD #cInfo
Fs0 #process
Fs0 @TextInP .xml .xml #zField
Fs0 @TextInP .responsibility .responsibility #zField
Fs0 @AnnotationInP-0n ai ai #zField
Fs0 @MessageFlowInP-0n messageIn messageIn #zField
Fs0 @MessageFlowOutP-0n messageOut messageOut #zField
Fs0 @TextInP .resExport .resExport #zField
Fs0 @TextInP .type .type #zField
Fs0 @TextInP .processKind .processKind #zField
Fs0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Fs0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Fs0 @RichDialogInitStart f0 '' #zField
Fs0 @RichDialogProcessEnd f1 '' #zField
Fs0 @RichDialogInitStart f3 '' #zField
Fs0 @RichDialogProcessStart f5 '' #zField
Fs0 @RichDialogProcessStart f6 '' #zField
Fs0 @RichDialogProcessStep f9 '' #zField
Fs0 @PushWFArc f10 '' #zField
Fs0 @RichDialogEnd f11 '' #zField
Fs0 @PushWFArc f13 '' #zField
Fs0 @RichDialogEnd f14 '' #zField
Fs0 @RichDialogProcessStep f2 '' #zField
Fs0 @PushWFArc f16 '' #zField
Fs0 @RichDialog f17 '' #zField
Fs0 @PushWFArc f18 '' #zField
Fs0 @PushWFArc f15 '' #zField
Fs0 @RichDialogInitStart f19 '' #zField
Fs0 @RichDialogProcessStart f21 '' #zField
Fs0 @RichDialogProcessEnd f22 '' #zField
Fs0 @Alternative f24 '' #zField
Fs0 @PushWFArc f25 '' #zField
Fs0 @RichDialogProcessStep f26 '' #zField
Fs0 @PushWFArc f27 '' #zField
Fs0 @PushWFArc f28 '' #zField
Fs0 @RichDialogProcessStep f29 '' #zField
Fs0 @PushWFArc f30 '' #zField
Fs0 @PushWFArc f23 '' #zField
Fs0 @PushWFArc f31 '' #zField
Fs0 @RichDialogProcessStep f8 '' #zField
Fs0 @PushWFArc f32 '' #zField
Fs0 @PushWFArc f20 '' #zField
Fs0 @PushWFArc f4 '' #zField
Fs0 @RichDialogProcessStep f7 '' #zField
Fs0 @RichDialogProcessStart f12 '' #zField
Fs0 @PushWFArc f33 '' #zField
Fs0 @RichDialogProcessEnd f34 '' #zField
Fs0 @RichDialogProcessStep f36 '' #zField
Fs0 @RichDialogMethodStart f38 '' #zField
Fs0 @PushWFArc f39 '' #zField
Fs0 @RichDialogProcessEnd f37 '' #zField
Fs0 @PushWFArc f40 '' #zField
Fs0 @RichDialogInitStart f35 '' #zField
Fs0 @PushWFArc f42 '' #zField
Fs0 @RichDialogMethodStart f43 '' #zField
Fs0 @RichDialogProcessEnd f46 '' #zField
Fs0 @RichDialogProcessStep f48 '' #zField
Fs0 @PushWFArc f49 '' #zField
Fs0 @RichDialogMethodStart f50 '' #zField
Fs0 @RichDialogProcessStart f62 '' #zField
Fs0 @RichDialogProcessStep f63 '' #zField
Fs0 @PushWFArc f64 '' #zField
Fs0 @RichDialogProcessEnd f65 '' #zField
Fs0 @PushWFArc f66 '' #zField
Fs0 @RichDialogMethodStart f67 '' #zField
Fs0 @RichDialogMethodStart f69 '' #zField
Fs0 @PushWFArc f70 '' #zField
Fs0 @RichDialogInitStart f71 '' #zField
Fs0 @PushWFArc f72 '' #zField
Fs0 @RichDialogProcessStep f73 '' #zField
Fs0 @PushWFArc f74 '' #zField
Fs0 @PushWFArc f41 '' #zField
Fs0 @RichDialogProcessStep f75 '' #zField
Fs0 @PushWFArc f76 '' #zField
Fs0 @PushWFArc f77 '' #zField
Fs0 @RichDialog f91 '' #zField
Fs0 @PushWFArc f92 '' #zField
Fs0 @PushWFArc f44 '' #zField
Fs0 @RichDialogProcessStep f237 '' #zField
Fs0 @PushWFArc f45 '' #zField
Fs0 @RichDialog f204 '' #zField
Fs0 @RichDialogProcessStep f158 '' #zField
Fs0 @Alternative f239 '' #zField
Fs0 @RichDialogProcessStep f241 '' #zField
Fs0 @RichDialog f47 '' #zField
Fs0 @PushWFArc f159 '' #zField
Fs0 @PushWFArc f242 '' #zField
Fs0 @PushWFArc f206 '' #zField
Fs0 @PushWFArc f52 '' #zField
Fs0 @PushWFArc f53 '' #zField
Fs0 @RichDialogProcessStep f56 '' #zField
Fs0 @RichDialogProcessStep f68 '' #zField
Fs0 @PushWFArc f80 '' #zField
Fs0 @PushWFArc f81 '' #zField
Fs0 @PushWFArc f82 '' #zField
Fs0 @RichDialogProcessStep f83 '' #zField
Fs0 @PushWFArc f84 '' #zField
Fs0 @RichDialogProcessEnd f85 '' #zField
Fs0 @PushWFArc f86 '' #zField
Fs0 @RichDialogProcessStart f51 '' #zField
Fs0 @RichDialog f54 '' #zField
Fs0 @PushWFArc f55 '' #zField
Fs0 @RichDialogProcessEnd f57 '' #zField
Fs0 @PushWFArc f58 '' #zField
>Proto Fs0 Fs0 FileChooserDialogProcess #zField
Fs0 f0 guid 1223BBAF0B7B8784 #txt
Fs0 f0 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f0 method start() #txt
Fs0 f0 disableUIEvents true #txt
Fs0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f0 inParameterMapAction 'out.fileChoosed=new java.io.File("");
' #txt
Fs0 f0 outParameterDecl '<> result;
' #txt
Fs0 f0 embeddedRdInitializations '{/fileListChooserPanel {/fieldName "fileListChooserPanel"/startMethod "start()"/parameterMapping ""/initScript ""}/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Fs0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
        <nameStyle>7,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f0 90 40 20 20 13 0 #rect
Fs0 f0 @|RichDialogInitStartIcon #fIcon
Fs0 f1 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f1 83 435 26 26 14 0 #rect
Fs0 f1 @|RichDialogProcessEndIcon #fIcon
Fs0 f3 guid 1223C2E5ABF450E9 #txt
Fs0 f3 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f3 method start(String) #txt
Fs0 f3 disableUIEvents true #txt
Fs0 f3 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path> param = methodEvent.getInputArguments();
' #txt
Fs0 f3 inParameterMapAction 'out.configurationController.rootPath=param.path;
out.fileChoosed=new java.io.File("");
out.uploadEnabled=true;
' #txt
Fs0 f3 outParameterDecl '<java.io.File choosedFile> result;
' #txt
Fs0 f3 outParameterMapAction 'result.choosedFile=in.fileChoosed;
' #txt
Fs0 f3 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/fileListChooserPanel {/fieldName "fileListChooserPanel"/startMethod "start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,String)"/parameterMapping "param.configurationController.rootPath=callParam.path;\nparam.searchPattern=\"\";\n"/initScript ""/userContext * }}' #txt
Fs0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(String)</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f3 38 270 20 20 13 0 #rect
Fs0 f3 @|RichDialogInitStartIcon #fIcon
Fs0 f5 guid 1223C2F12D42CBD6 #txt
Fs0 f5 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f5 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f5 actionTable 'out=in;
' #txt
Fs0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ok</name>
        <nameStyle>2,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f5 382 54 20 20 -6 -30 #rect
Fs0 f5 @|RichDialogProcessStartIcon #fIcon
Fs0 f6 guid 1223C2F27664F76D #txt
Fs0 f6 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f6 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f6 actionTable 'out=in;
' #txt
Fs0 f6 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Cancel</name>
        <nameStyle>6,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f6 494 54 20 20 -23 -34 #rect
Fs0 f6 @|RichDialogProcessStartIcon #fIcon
Fs0 f9 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f9 actionTable 'out=in;
' #txt
Fs0 f9 actionCode 'out.fileChoosed=new java.io.File("");
' #txt
Fs0 f9 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set file to new File(&quot;&quot;)</name>
        <nameStyle>24,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f9 486 100 36 24 20 -2 #rect
Fs0 f9 @|RichDialogProcessStepIcon #fIcon
Fs0 f10 expr out #txt
Fs0 f10 504 74 504 100 #arcP
Fs0 f11 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f11 guid 1223C2FB608F3607 #txt
Fs0 f11 435 155 26 26 14 0 #rect
Fs0 f11 @|RichDialogEndIcon #fIcon
Fs0 f13 expr out #txt
Fs0 f13 504 124 461 168 #arcP
Fs0 f13 1 504 168 #addKink
Fs0 f13 0 0.973299281214435 0 0 #arcLabel
Fs0 f14 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f14 guid 1223C319160B0142 #txt
Fs0 f14 87 187 26 26 14 0 #rect
Fs0 f14 @|RichDialogEndIcon #fIcon
Fs0 f2 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f2 actionTable 'out=in;
' #txt
Fs0 f2 actionCode 'out.windowTitle=ivy.cms.co("/ch/xpertline/common/ria/component/fileManagement/windowTitles/error");
out.error=ivy.cms.co("/ch/xpertline/common/ria/component/fileManagement/messages/error/invalidFilepath");' #txt
Fs0 f2 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f2 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f2 82 92 36 24 20 -2 #rect
Fs0 f2 @|RichDialogProcessStepIcon #fIcon
Fs0 f16 expr out #txt
Fs0 f16 100 60 100 92 #arcP
Fs0 f17 targetWindow NEW:card: #txt
Fs0 f17 targetDisplay TOP #txt
Fs0 f17 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Fs0 f17 startMethod askQuestion(String,String,List<String>,String) #txt
Fs0 f17 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f17 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Fs0 f17 requestMappingAction 'param.icon="error";
param.question=in.error;
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
Fs0 f17 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f17 responseMappingAction 'out=in;
' #txt
Fs0 f17 windowConfiguration '{/title "<%=in.windowTitle%>"/width 400 /height 300 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f17 isAsynch false #txt
Fs0 f17 isInnerRd true #txt
Fs0 f17 isDialog true #txt
Fs0 f17 userContext '* ' #txt
Fs0 f17 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error</name>
        <nameStyle>5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f17 82 140 36 24 20 -2 #rect
Fs0 f17 @|RichDialogIcon #fIcon
Fs0 f17 -65536|-1|-16777216 #nodeStyle
Fs0 f18 expr out #txt
Fs0 f18 100 116 100 140 #arcP
Fs0 f15 expr out #txt
Fs0 f15 100 164 100 187 #arcP
Fs0 f19 guid 1223C586F109C517 #txt
Fs0 f19 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f19 method start(String,String) #txt
Fs0 f19 disableUIEvents true #txt
Fs0 f19 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path,java.lang.String customLabel> param = methodEvent.getInputArguments();
' #txt
Fs0 f19 inParameterMapAction 'out.configurationController.rootPath=param.path;
out.customLabel=param.customLabel;
out.fileChoosed=new java.io.File("");
out.uploadEnabled=true;
' #txt
Fs0 f19 outParameterDecl '<java.io.File choosedFile> result;
' #txt
Fs0 f19 outParameterMapAction 'result.choosedFile=in.fileChoosed;
' #txt
Fs0 f19 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/fileListChooserPanel {/fieldName "fileListChooserPanel"/startMethod "start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,String)"/parameterMapping "param.configurationController.rootPath=callParam.path;\nparam.searchPattern=\"\";\n"/initScript ""/userContext * }}' #txt
Fs0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(String,String)</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f19 142 270 20 20 13 0 #rect
Fs0 f19 @|RichDialogInitStartIcon #fIcon
Fs0 f21 guid 122F3EA5CC997B1E #txt
Fs0 f21 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f21 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f21 actionTable 'out=in;
' #txt
Fs0 f21 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileChoosedChanged</name>
        <nameStyle>18,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f21 390 254 20 20 -43 -27 #rect
Fs0 f21 @|RichDialogProcessStartIcon #fIcon
Fs0 f22 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f22 390 398 20 20 13 0 #rect
Fs0 f22 @|RichDialogProcessEndIcon #fIcon
Fs0 f24 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f24 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>isFileChoosed null ?</name>
        <nameStyle>20,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f24 386 298 28 28 9 -25 #rect
Fs0 f24 @|AlternativeIcon #fIcon
Fs0 f25 expr out #txt
Fs0 f25 400 274 400 298 #arcP
Fs0 f26 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f26 actionTable 'out=in;
' #txt
Fs0 f26 actionCode 'panel.chooseButton.setEnabled(false);
panel.previewButton.setEnabled(false);' #txt
Fs0 f26 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f26 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>disable choose button
and preview</name>
        <nameStyle>22,7,9
11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f26 526 300 36 24 20 -2 #rect
Fs0 f26 @|RichDialogProcessStepIcon #fIcon
Fs0 f27 expr in #txt
Fs0 f27 414 312 526 312 #arcP
Fs0 f28 expr out #txt
Fs0 f28 544 324 410 408 #arcP
Fs0 f28 1 544 408 #addKink
Fs0 f28 1 0.18447262856624663 0 0 #arcLabel
Fs0 f29 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f29 actionTable 'out=in;
' #txt
Fs0 f29 actionCode 'out.fileChoosed = panel.fileListChooserPanel.getSelectedFile();

out.selectedDocumentOnServer = panel.fileListChooserPanel.getSelectedDocument().clone();

panel.chooseButton.setEnabled(true);
panel.previewButton.setEnabled(true);' #txt
Fs0 f29 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f29 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f29 382 348 36 24 20 -2 #rect
Fs0 f29 @|RichDialogProcessStepIcon #fIcon
Fs0 f30 expr in #txt
Fs0 f30 outCond panel.fileListChooserPanel.getSelectedFile()!=null #txt
Fs0 f30 400 326 400 348 #arcP
Fs0 f23 expr out #txt
Fs0 f23 400 372 400 398 #arcP
Fs0 f31 expr out #txt
Fs0 f31 392 74 435 168 #arcP
Fs0 f31 1 392 168 #addKink
Fs0 f31 0 0.7887630836370372 0 0 #arcLabel
Fs0 f8 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f8 actionTable 'out=in;
' #txt
Fs0 f8 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
import ch.ivyteam.ivy.addons.filemanager.FileUploadHandler;
import ch.ivyteam.ivy.addons.filemanager.database.fileaction.FileActionHistoryController;
panel.chooseButton.setEnabled(false);
panel.previewButton.setEnabled(false);

//set the file
out.fileChoosed=new java.io.File("");
in.filemanagementHandler= AbstractFileManagementHandler.getInstance(in.configurationController);
if(in.configurationController.storeFilesInDB)
{
	if(in.configurationController.fileActionHistoryConfiguration.activateFileActionHistory)
	{
		in.fileManagementHandler.setFileActionHistoryController(new FileActionHistoryController(in.configurationController.fileActionHistoryConfiguration));
	}
	File dir = new File(ivy.session.getSessionUserName()+"/"+System.nanoTime()+"/Upload/",true);
	dir.mkdir();
	if(dir.isDirectory())
	{
		in.uploader = new FileUploadHandler(panel,"_uploadError","_uploadDoneForFilesInDB","_askForOverwriteFiles","",dir.getAbsolutePath());
	  in.uploader.setAreFilesStoredInDB(true);
	}else{
		in.uploader = new FileUploadHandler(panel,"_uploadError","_uploadDoneForFilesInDB","_askForOverwriteFiles","",in.configurationController.rootPath);
		in.uploader.setAreFilesStoredInDB(true);
	}
	in.uploader.setAreFilesStoredInDB(true);
	in.uploader.setFilesDestinationPathForDB(in.configurationController.rootPath);
	in.uploader.setFileHandlerMgt(in.fileManagementHandler);
}else{
	in.uploader = new FileUploadHandler(panel,"_uploadError","_uploadDone","_askForOverwriteFiles","",in.configurationController.rootPath);
	in.uploader.setFileHandlerMgt(in.fileManagementHandler);
	in.uploader.setAreFilesStoredInDB(false);
}

if(in.configurationController.maxFileUploadSize>0){
	in.uploader.setMaxSize(in.configurationController.maxFileUploadSize);
}' #txt
Fs0 f8 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f8 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f8 78 364 36 24 20 -2 #rect
Fs0 f8 @|RichDialogProcessStepIcon #fIcon
Fs0 f32 expr out #txt
Fs0 f32 152 290 114 376 #arcP
Fs0 f32 1 152 376 #addKink
Fs0 f32 1 0.02656792352600072 0 0 #arcLabel
Fs0 f20 expr out #txt
Fs0 f20 48 290 78 376 #arcP
Fs0 f20 1 48 376 #addKink
Fs0 f20 0 0.7479295709772202 0 0 #arcLabel
Fs0 f4 expr out #txt
Fs0 f4 96 388 96 435 #arcP
Fs0 f7 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f7 actionTable 'out=in;
' #txt
Fs0 f7 actionCode '
in.uploader.uploadWithoutShowingProgress(true);' #txt
Fs0 f7 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f7 382 540 36 24 20 -2 #rect
Fs0 f7 @|RichDialogProcessStepIcon #fIcon
Fs0 f12 guid 128B5FB2D0AAFD6E #txt
Fs0 f12 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f12 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f12 actionTable 'out=in;
' #txt
Fs0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload files</name>
        <nameStyle>12,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f12 390 486 20 20 13 0 #rect
Fs0 f12 @|RichDialogProcessStartIcon #fIcon
Fs0 f33 expr out #txt
Fs0 f33 400 506 400 540 #arcP
Fs0 f34 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f34 390 598 20 20 13 0 #rect
Fs0 f34 @|RichDialogProcessEndIcon #fIcon
Fs0 f36 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f36 actionTable 'out=in;
' #txt
Fs0 f36 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
try{
	if(in.configurationController.storeFilesInDB)
	{
		for(DocumentOnServer doc:in.returnedMessage.documentOnServers)
		{
			in.fileManagementHandler.saveDocumentOnServer(doc,in.configurationController.rootPath);
		}
	}
}catch(Throwable t)
{
	ivy.log.error("Error while saving the uploaded files in the SimpleFileChooserDialog. ",+t.getMessage(),t);
}' #txt
Fs0 f36 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f36 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f36 750 388 36 24 20 -2 #rect
Fs0 f36 @|RichDialogProcessStepIcon #fIcon
Fs0 f38 guid 128B94A86BA64AE4 #txt
Fs0 f38 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f38 method _uploadDoneForFilesInDB(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
Fs0 f38 disableUIEvents false #txt
Fs0 f38 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
Fs0 f38 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
Fs0 f38 outParameterDecl '<> result;
' #txt
Fs0 f38 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_uploadDoneForFilesInDB()</name>
        <nameStyle>25,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f38 758 334 20 20 13 0 #rect
Fs0 f38 @|RichDialogMethodStartIcon #fIcon
Fs0 f39 expr out #txt
Fs0 f39 400 564 400 598 #arcP
Fs0 f37 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f37 758 486 20 20 13 0 #rect
Fs0 f37 @|RichDialogProcessEndIcon #fIcon
Fs0 f40 expr out #txt
Fs0 f40 768 354 768 388 #arcP
Fs0 f35 guid 128B98D3200575CD #txt
Fs0 f35 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f35 method start(String,String,Boolean) #txt
Fs0 f35 disableUIEvents true #txt
Fs0 f35 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path,java.lang.String customLabel,java.lang.Boolean showUploadButton> param = methodEvent.getInputArguments();
' #txt
Fs0 f35 inParameterMapAction 'out.configurationController.rootPath=param.path;
out.customLabel=param.customLabel;
out.fileChoosed=new java.io.File("");
out.uploadEnabled=param.showUploadButton;
' #txt
Fs0 f35 outParameterDecl '<java.io.File choosedFile> result;
' #txt
Fs0 f35 outParameterMapAction 'result.choosedFile=in.fileChoosed;
' #txt
Fs0 f35 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/fileListChooserPanel {/fieldName "fileListChooserPanel"/startMethod "start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,String)"/parameterMapping "param.configurationController.rootPath=callParam.path;\nparam.searchPattern=\"\";\n"/initScript ""/userContext * }}' #txt
Fs0 f35 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(String,String,Boolean)</name>
        <nameStyle>28,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f35 182 334 20 20 13 0 #rect
Fs0 f35 @|RichDialogInitStartIcon #fIcon
Fs0 f42 expr out #txt
Fs0 f42 192 354 114 376 #arcP
Fs0 f42 1 192 376 #addKink
Fs0 f42 1 0.3039399518421458 0 0 #arcLabel
Fs0 f43 guid 128B98EC4A8358F2 #txt
Fs0 f43 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f43 method _uploadError(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
Fs0 f43 disableUIEvents false #txt
Fs0 f43 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
Fs0 f43 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
Fs0 f43 outParameterDecl '<> result;
' #txt
Fs0 f43 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_uploadError(ReturnedMessage)</name>
        <nameStyle>29,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f43 758 38 20 20 -45 -33 #rect
Fs0 f43 @|RichDialogMethodStartIcon #fIcon
Fs0 f46 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f46 758 198 20 20 13 0 #rect
Fs0 f46 @|RichDialogProcessEndIcon #fIcon
Fs0 f48 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f48 actionTable 'out=in;
out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error");
' #txt
Fs0 f48 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f48 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f48 750 84 36 24 20 -2 #rect
Fs0 f48 @|RichDialogProcessStepIcon #fIcon
Fs0 f49 expr out #txt
Fs0 f49 768 58 768 84 #arcP
Fs0 f50 guid 128B9DC1608E56B4 #txt
Fs0 f50 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f50 method _askForOverwriteFiles(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
Fs0 f50 disableUIEvents false #txt
Fs0 f50 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
Fs0 f50 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
Fs0 f50 outParameterDecl '<> result;
' #txt
Fs0 f50 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_askForOverwriteFiles(ReturnedMessage)</name>
        <nameStyle>38,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f50 1190 38 20 20 13 0 #rect
Fs0 f50 @|RichDialogMethodStartIcon #fIcon
Fs0 f62 guid 12925613436290EC #txt
Fs0 f62 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f62 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f62 actionTable 'out=in;
' #txt
Fs0 f62 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>openFile</name>
        <nameStyle>8,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f62 542 486 20 20 13 0 #rect
Fs0 f62 @|RichDialogProcessStartIcon #fIcon
Fs0 f63 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f63 actionTable 'out=in;
' #txt
Fs0 f63 actionCode 'panel.desktopHandlerPanel.openFile(in.fileChoosed);

if(in.fileManagementHandler.fileActionHistoryController.getConfig().activateFileActionHistory)
{
	try{
		long id = long.parseLong(in.selectedDocumentOnServer.fileID);
		in.fileManagementHandler.fileActionHistoryController.createNewActionHistory(id,8,ivy.session.getSessionUserName(),"");
	}catch(Throwable t){
		ivy.log.error("Error in writing activity in SimpleFileChooser dialog. "+t.getMessage(),t);
	}
}
' #txt
Fs0 f63 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f63 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f63 534 540 36 24 20 -2 #rect
Fs0 f63 @|RichDialogProcessStepIcon #fIcon
Fs0 f64 expr out #txt
Fs0 f64 552 506 552 540 #arcP
Fs0 f65 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f65 542 606 20 20 13 0 #rect
Fs0 f65 @|RichDialogProcessEndIcon #fIcon
Fs0 f66 expr out #txt
Fs0 f66 552 564 552 606 #arcP
Fs0 f67 guid 12B2DCF578593218 #txt
Fs0 f67 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f67 method _uploadDone(List<java.io.File>) #txt
Fs0 f67 disableUIEvents false #txt
Fs0 f67 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> uploadedFiles> param = methodEvent.getInputArguments();
' #txt
Fs0 f67 inParameterMapAction 'out.returnedMessage.files=param.uploadedFiles;
' #txt
Fs0 f67 outParameterDecl '<> result;
' #txt
Fs0 f67 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_uploadDone(List&lt;File&gt;)</name>
        <nameStyle>23,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f67 950 390 20 20 13 0 #rect
Fs0 f67 @|RichDialogMethodStartIcon #fIcon
Fs0 f69 guid 12B9B45F3E5AB46B #txt
Fs0 f69 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f69 method _close() #txt
Fs0 f69 disableUIEvents false #txt
Fs0 f69 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_close()</name>
    </language>
</elementInfo>
' #txt
Fs0 f69 558 54 20 20 13 0 #rect
Fs0 f69 @|RichDialogMethodStartIcon #fIcon
Fs0 f70 expr out #txt
Fs0 f70 559 70 520 100 #arcP
Fs0 f71 guid 137B77D675A839A2 #txt
Fs0 f71 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f71 method start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,Boolean) #txt
Fs0 f71 disableUIEvents true #txt
Fs0 f71 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController configurationController,java.lang.Boolean showUploadButton> param = methodEvent.getInputArguments();
' #txt
Fs0 f71 inParameterMapAction 'out.configurationController=param.configurationController;
out.uploadEnabled=param.showUploadButton;
' #txt
Fs0 f71 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer selectedDocumentOnServer> result;
' #txt
Fs0 f71 outParameterMapAction 'result.selectedDocumentOnServer=in.selectedDocumentOnServer;
' #txt
Fs0 f71 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }/fileListChooserPanel {/fieldName "fileListChooserPanel"/startMethod "start(ch.ivyteam.ivy.addons.filemanager.configuration.BasicConfigurationController,String)"/parameterMapping "param.configurationController=callParam.configurationController;\nparam.searchPattern=\"\";\n"/initScript ""/userContext * }}' #txt
Fs0 f71 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(BasicConfigurationController)</name>
        <nameStyle>35,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f71 142 438 20 20 13 0 #rect
Fs0 f71 @|RichDialogInitStartIcon #fIcon
Fs0 f72 expr out #txt
Fs0 f72 145 440 105 388 #arcP
Fs0 f73 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f73 actionTable 'out=in;
' #txt
Fs0 f73 actionCode '
panel.fileListChooserPanel.refresh();' #txt
Fs0 f73 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f73 750 437 36 22 20 -2 #rect
Fs0 f73 @|RichDialogProcessStepIcon #fIcon
Fs0 f74 expr out #txt
Fs0 f74 768 412 768 437 #arcP
Fs0 f41 expr out #txt
Fs0 f41 768 459 768 486 #arcP
Fs0 f75 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f75 actionTable 'out=in;
' #txt
Fs0 f75 actionCode 'if(in.fileManagementHandler!=null)
{
	try{
		in.fileManagementHandler.insertFiles(in.returnedMessage.files,in.configurationController.rootPath,"");
	}catch(Throwable t)
	{
		ivy.log.error("Error while saving the uploaded files in the SimpleFileChooserDialog. ",+t.getMessage(),t);
	}
}' #txt
Fs0 f75 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f75 854 388 36 24 20 -2 #rect
Fs0 f75 @|RichDialogProcessStepIcon #fIcon
Fs0 f76 expr out #txt
Fs0 f76 950 400 890 400 #arcP
Fs0 f77 expr out #txt
Fs0 f77 854 408 786 440 #arcP
Fs0 f77 0 0.65 0 0 #arcLabel
Fs0 f91 targetWindow NEW:card: #txt
Fs0 f91 targetDisplay TOP #txt
Fs0 f91 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
Fs0 f91 startMethod start(String,String) #txt
Fs0 f91 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f91 requestActionDecl '<String text, String iconUri> param;' #txt
Fs0 f91 requestMappingAction 'param.text=in.returnedMessage.text;
' #txt
Fs0 f91 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f91 responseMappingAction 'out=in;
' #txt
Fs0 f91 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information\")%>"/width 300 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f91 isAsynch false #txt
Fs0 f91 isInnerRd true #txt
Fs0 f91 userContext '* ' #txt
Fs0 f91 750 132 36 24 20 -2 #rect
Fs0 f91 @|RichDialogIcon #fIcon
Fs0 f92 expr out #txt
Fs0 f92 768 108 768 132 #arcP
Fs0 f44 expr out #txt
Fs0 f44 768 156 768 198 #arcP
Fs0 f237 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f237 actionTable 'out=in;
' #txt
Fs0 f237 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
boolean tmpBoolean=false;
List<DocumentOnServer> docskeep = new List<DocumentOnServer>();
List<DocumentOnServer> documents = panel.fileListChooserPanel.getDocumentsList();
for(DocumentOnServer doc: in.returnedMessage.documentOnServers){//Check if some existing docs are locked
	for(DocumentOnServer docin: documents){
		if(doc.getFilename().compareTo(docin.getFilename())==0){
			if(docin.locked.equals("1")){
				tmpBoolean=true;
				doc.setLocked("1");
			}
			break;
		}
	}
}
if(tmpBoolean){//Some docs to override are locked, remove them from the list to override and from the list to upload
	List<java.io.File> filesToKeep = new List<java.io.File>();
	for(DocumentOnServer doc: in.returnedMessage.documentOnServers){
		if(!doc.locked.equals("1"))
		{
			docskeep.add(doc);
		}
	}
	for(java.io.File f:in.returnedMessage.files){
		boolean reject = false;
		for(DocumentOnServer doc: in.returnedMessage.documentOnServers){
			if(doc.getFilename().compareTo(f.getName())==0){
				if(doc.locked.equals("1"))
				{
					reject=true;
				}
				break;
			}
		}
		if(!reject){
			filesToKeep.add(f);
		}
	}
	in.returnedMessage.documentOnServers.clear();
	in.returnedMessage.documentOnServers.addAll(docskeep);
	in.returnedMessage.files.clear();
	in.returnedMessage.files.addAll(filesToKeep);
}

' #txt
Fs0 f237 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f237 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Are the existing Files
locked? Exclude them</name>
        <nameStyle>43,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f237 1182 100 36 24 24 -16 #rect
Fs0 f237 @|RichDialogProcessStepIcon #fIcon
Fs0 f45 expr out #txt
Fs0 f45 1200 58 1200 100 #arcP
Fs0 f204 targetWindow NEW:card: #txt
Fs0 f204 targetDisplay TOP #txt
Fs0 f204 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
Fs0 f204 startMethod startAsConfirmDialog(String,String,List<String>,String) #txt
Fs0 f204 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f204 requestActionDecl '<String text, String iconUri, List<String> buttonsList, String defaultPressedButton> param;' #txt
Fs0 f204 requestMappingAction 'param.iconUri="/ch/ivyteam/ivy/addons/icons/question/48";
param.buttonsList=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultPressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
Fs0 f204 requestActionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

param.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFiles").replaceFirst("</html>","");
for(DocumentOnServer doc: in.returnedMessage.documentOnServers){
	param.text+="<br>"+doc.getFilename();
}
param.text+="<br></html>";' #txt
Fs0 f204 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f204 responseMappingAction 'out=in;
out.userResponse=result.pressedButton;
' #txt
Fs0 f204 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f204 isAsynch false #txt
Fs0 f204 isInnerRd true #txt
Fs0 f204 userContext '* ' #txt
Fs0 f204 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask if replace the
existing file on the server</name>
        <nameStyle>46,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f204 1086 260 36 24 -137 -7 #rect
Fs0 f204 @|RichDialogIcon #fIcon
Fs0 f158 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f158 actionTable 'out=in;
' #txt
Fs0 f158 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles"); #txt
Fs0 f158 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f158 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f158 1086 212 36 24 20 -2 #rect
Fs0 f158 @|RichDialogProcessStepIcon #fIcon
Fs0 f239 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f239 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
Fs0 f239 1186 154 28 28 14 0 #rect
Fs0 f239 @|AlternativeIcon #fIcon
Fs0 f241 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f241 actionTable 'out=in;
' #txt
Fs0 f241 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
Fs0 f241 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f241 1278 156 36 24 20 -2 #rect
Fs0 f241 @|RichDialogProcessStepIcon #fIcon
Fs0 f47 targetWindow NEW:card: #txt
Fs0 f47 targetDisplay TOP #txt
Fs0 f47 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
Fs0 f47 startMethod start(String,String) #txt
Fs0 f47 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f47 requestActionDecl '<String text, String iconUri> param;' #txt
Fs0 f47 requestActionCode param.text="<html>"+ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filesNotUploadedBecauseLocked"); #txt
Fs0 f47 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f47 responseMappingAction 'out=in;
' #txt
Fs0 f47 windowConfiguration '{/title "<%=in.windowTitle%>"/width 400 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f47 isAsynch false #txt
Fs0 f47 isInnerRd true #txt
Fs0 f47 userContext '* ' #txt
Fs0 f47 1278 260 36 24 20 -2 #rect
Fs0 f47 @|RichDialogIcon #fIcon
Fs0 f159 expr in #txt
Fs0 f159 outCond !in.returnedMessage.documentOnServers.isEmpty() #txt
Fs0 f159 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>there are still
files to override</name>
        <nameStyle>16,7
17,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f159 1186 168 1104 212 #arcP
Fs0 f159 1 1104 168 #addKink
Fs0 f159 0 0.7780841373825325 0 0 #arcLabel
Fs0 f242 expr in #txt
Fs0 f242 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No files to 
override
anymore</name>
        <nameStyle>22,7
7,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f242 1214 168 1278 168 #arcP
Fs0 f242 0 0.40625 0 23 #arcLabel
Fs0 f206 expr out #txt
Fs0 f206 1104 236 1104 260 #arcP
Fs0 f52 expr out #txt
Fs0 f52 1296 180 1296 260 #arcP
Fs0 f53 expr out #txt
Fs0 f53 1200 124 1200 154 #arcP
Fs0 f56 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f56 actionTable 'out=in;
' #txt
Fs0 f56 actionCode 'if(!in.returnedMessage.files.isEmpty()){
	in.uploader.uploadPreparedFilesWithoutShowingProgress(in.returnedMessage.files);
}' #txt
Fs0 f56 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f56 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload the files if any</name>
        <nameStyle>23,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f56 1182 348 36 24 -53 -33 #rect
Fs0 f56 @|RichDialogProcessStepIcon #fIcon
Fs0 f68 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f68 actionTable 'out=in;
' #txt
Fs0 f68 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

try{
	if(in.userResponse.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"))){
		//we override the files so we delete them
		in.fileManagementHandler.deleteDocumentOnServers(in.returnedMessage.documentOnServers);
	}else{
		//we exclude the files that should be overridden
		List<java.io.File> filesToKeep = new List<java.io.File>();
		for(java.io.File f:in.returnedMessage.files){
			boolean reject = false;
			for(DocumentOnServer doc: in.returnedMessage.documentOnServers){
				if(doc.getFilename().compareTo(f.getName())==0){
					reject=true;
					break;
				}
			}
			if(!reject){
				filesToKeep.add(f);
			}
		}
		in.returnedMessage.files.clear();
		in.returnedMessage.files.addAll(filesToKeep);
	}
}catch(Throwable t){

}' #txt
Fs0 f68 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f68 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>if reponse = no Delete the files that
 will be overwritten</name>
        <nameStyle>58,7,9
</nameStyle>
        <desc>Delete the file that
 will be overwritten</desc>
    </language>
</elementInfo>
' #txt
Fs0 f68 1086 308 36 24 -217 -21 #rect
Fs0 f68 @|RichDialogProcessStepIcon #fIcon
Fs0 f80 expr out #txt
Fs0 f80 1104 332 1182 360 #arcP
Fs0 f80 1 1104 360 #addKink
Fs0 f80 1 0.2655887406437936 0 0 #arcLabel
Fs0 f81 expr out #txt
Fs0 f81 1104 284 1104 308 #arcP
Fs0 f82 expr out #txt
Fs0 f82 1296 284 1218 360 #arcP
Fs0 f82 1 1296 360 #addKink
Fs0 f82 1 0.040298813044590175 0 0 #arcLabel
Fs0 f83 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f83 actionTable 'out=in;
' #txt
Fs0 f83 actionCode panel.fileListChooserPanel.refresh(); #txt
Fs0 f83 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f83 1182 404 36 24 20 -2 #rect
Fs0 f83 @|RichDialogProcessStepIcon #fIcon
Fs0 f84 expr out #txt
Fs0 f84 1200 372 1200 404 #arcP
Fs0 f85 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f85 1190 462 20 20 13 0 #rect
Fs0 f85 @|RichDialogProcessEndIcon #fIcon
Fs0 f86 expr out #txt
Fs0 f86 1200 428 1200 462 #arcP
Fs0 f51 guid 13D993809DFC5A45 #txt
Fs0 f51 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f51 actionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f51 actionTable 'out=in;
' #txt
Fs0 f51 actionCode 'import ch.ivyteam.ivy.addons.filemanager.ErrorUtil;
import ch.ivyteam.ivy.richdialog.exec.RdEvent;
in.errorUtil=null;
if(event instanceof RdEvent){
	RdEvent rd = event as RdEvent;
	if(rd.getParameter() instanceof ErrorUtil)
	{
		in.errorUtil = rd.getParameter() as ErrorUtil;
	}
}' #txt
Fs0 f51 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error</name>
        <nameStyle>5,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f51 398 686 20 20 13 0 #rect
Fs0 f51 @|RichDialogProcessStartIcon #fIcon
Fs0 f54 targetWindow NEW:card: #txt
Fs0 f54 targetDisplay TOP #txt
Fs0 f54 richDialogId ch.ivyteam.ivy.addons.filemanager.util.MessageDialog #txt
Fs0 f54 startMethod start(String,String) #txt
Fs0 f54 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f54 requestActionDecl '<String text, String iconUri> param;' #txt
Fs0 f54 requestMappingAction 'param.iconUri="/ch/ivyteam/ivy/addons/icons/close/48";
' #txt
Fs0 f54 requestActionCode 'if(in.#errorUtil!=null){
	param.text="<html>"+in.errorUtil.message+(in.errorUtil.throwable!=null?"<br>"+in.errorUtil.throwable.getMessage():"");
}else{
	param.text="<html>"+ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
}' #txt
Fs0 f54 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData out;
' #txt
Fs0 f54 responseMappingAction 'out=in;
' #txt
Fs0 f54 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error\")%>"/width 450 /height 180 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f54 isAsynch false #txt
Fs0 f54 isInnerRd true #txt
Fs0 f54 userContext '* ' #txt
Fs0 f54 390 740 36 24 20 -2 #rect
Fs0 f54 @|RichDialogIcon #fIcon
Fs0 f55 expr out #txt
Fs0 f55 408 706 408 740 #arcP
Fs0 f57 type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
Fs0 f57 398 806 20 20 13 0 #rect
Fs0 f57 @|RichDialogProcessEndIcon #fIcon
Fs0 f58 expr out #txt
Fs0 f58 408 764 408 806 #arcP
>Proto Fs0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel></swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>309</swimlaneSize>
    <swimlaneSize>400</swimlaneSize>
    <swimlaneColor>-10027162</swimlaneColor>
    <swimlaneColor>-154</swimlaneColor>
</elementInfo>
' #txt
>Proto Fs0 .type ch.ivyteam.ivy.addons.filemanager.SimpleFileChooserDialog.SimpleFileChooserDialogData #txt
>Proto Fs0 .processKind RICH_DIALOG #txt
>Proto Fs0 .rdData2UIAction 'panel.customLabel.text=in.customLabel;
panel.desktopHandlerPanel.visible=false;
panel.pathLabel.text=in.configurationController.rootPath;
panel.uploadButton.visible=in.uploadEnabled;
' #txt
>Proto Fs0 -8 -8 16 16 16 26 #rect
>Proto Fs0 '' #fIcon
Fs0 f6 mainOut f10 tail #connect
Fs0 f10 head f9 mainIn #connect
Fs0 f9 mainOut f13 tail #connect
Fs0 f13 head f11 mainIn #connect
Fs0 f0 mainOut f16 tail #connect
Fs0 f16 head f2 mainIn #connect
Fs0 f2 mainOut f18 tail #connect
Fs0 f18 head f17 mainIn #connect
Fs0 f17 mainOut f15 tail #connect
Fs0 f15 head f14 mainIn #connect
Fs0 f21 mainOut f25 tail #connect
Fs0 f25 head f24 in #connect
Fs0 f27 head f26 mainIn #connect
Fs0 f26 mainOut f28 tail #connect
Fs0 f28 head f22 mainIn #connect
Fs0 f24 out f30 tail #connect
Fs0 f30 head f29 mainIn #connect
Fs0 f24 out f27 tail #connect
Fs0 f29 mainOut f23 tail #connect
Fs0 f23 head f22 mainIn #connect
Fs0 f5 mainOut f31 tail #connect
Fs0 f31 head f11 mainIn #connect
Fs0 f19 mainOut f32 tail #connect
Fs0 f32 head f8 mainIn #connect
Fs0 f3 mainOut f20 tail #connect
Fs0 f20 head f8 mainIn #connect
Fs0 f8 mainOut f4 tail #connect
Fs0 f4 head f1 mainIn #connect
Fs0 f12 mainOut f33 tail #connect
Fs0 f33 head f7 mainIn #connect
Fs0 f7 mainOut f39 tail #connect
Fs0 f39 head f34 mainIn #connect
Fs0 f38 mainOut f40 tail #connect
Fs0 f40 head f36 mainIn #connect
Fs0 f35 mainOut f42 tail #connect
Fs0 f42 head f8 mainIn #connect
Fs0 f43 mainOut f49 tail #connect
Fs0 f49 head f48 mainIn #connect
Fs0 f62 mainOut f64 tail #connect
Fs0 f64 head f63 mainIn #connect
Fs0 f63 mainOut f66 tail #connect
Fs0 f66 head f65 mainIn #connect
Fs0 f69 mainOut f70 tail #connect
Fs0 f70 head f9 mainIn #connect
Fs0 f71 mainOut f72 tail #connect
Fs0 f72 head f8 mainIn #connect
Fs0 f36 mainOut f74 tail #connect
Fs0 f74 head f73 mainIn #connect
Fs0 f73 mainOut f41 tail #connect
Fs0 f41 head f37 mainIn #connect
Fs0 f67 mainOut f76 tail #connect
Fs0 f76 head f75 mainIn #connect
Fs0 f75 mainOut f77 tail #connect
Fs0 f77 head f73 mainIn #connect
Fs0 f48 mainOut f92 tail #connect
Fs0 f92 head f91 mainIn #connect
Fs0 f91 mainOut f44 tail #connect
Fs0 f44 head f46 mainIn #connect
Fs0 f50 mainOut f45 tail #connect
Fs0 f45 head f237 mainIn #connect
Fs0 f239 out f159 tail #connect
Fs0 f159 head f158 mainIn #connect
Fs0 f239 out f242 tail #connect
Fs0 f242 head f241 mainIn #connect
Fs0 f158 mainOut f206 tail #connect
Fs0 f206 head f204 mainIn #connect
Fs0 f241 mainOut f52 tail #connect
Fs0 f52 head f47 mainIn #connect
Fs0 f237 mainOut f53 tail #connect
Fs0 f53 head f239 in #connect
Fs0 f68 mainOut f80 tail #connect
Fs0 f80 head f56 mainIn #connect
Fs0 f204 mainOut f81 tail #connect
Fs0 f81 head f68 mainIn #connect
Fs0 f47 mainOut f82 tail #connect
Fs0 f82 head f56 mainIn #connect
Fs0 f56 mainOut f84 tail #connect
Fs0 f84 head f83 mainIn #connect
Fs0 f83 mainOut f86 tail #connect
Fs0 f86 head f85 mainIn #connect
Fs0 f51 mainOut f55 tail #connect
Fs0 f55 head f54 mainIn #connect
Fs0 f54 mainOut f58 tail #connect
Fs0 f58 head f57 mainIn #connect
